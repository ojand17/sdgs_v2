<!DOCTYPE html>
<html lang="en"
      xmlns:="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <head th:include="admin/layout :: header">
    
    <style>
    .pointer {cursor: pointer;}
    </style>
</head>
<body>
	<title>Submission Rate</title>
    <div th:include="admin/layout :: menu"></div>

<!--  Content  -->
    <div id="content">
        <div id="content-header">
            <div id="breadcrumb" class="lang_eng" style="display: none"> <a href="#" title="Go to Home" class="tip-bottom"><i class="icon-home"></i>Submission Rate </a></div>
            <div id="breadcrumb" class="lang_indo"> <a href="#" title="Ke Home" class="tip-bottom"><i class="icon-home"></i>Pengajuan Nilai </a></div>
        </div>
        <div class="container-fluid" id="teruskan">
            <div class="row-fluid">
                <div class="widget-box">
                    <div class="widget-title lang_eng" id="judul-eng" style="display: none">
                        <span class="icon"><i class="icon-tasks"></i></span>
                        <h5>Submission Rate </h5>
                    </div>
                    <div class="widget-title lang_indo" id="judul-indo">
                        <span class="icon"><i class="icon-tasks"></i></span>
                        <h5>Pengajuan Nilai </h5>
                    </div>
                    <div class="widget-content">
                        <div class="pull-left app" style="width:100%">
                            <select th:field="*{listprov}" class="span3" id="id_prov" name="id_prov">
                                <option value="0" >-- Pilih --</option>
                                <option th:each="list : ${listprov}" th:value="${list.id_prov}" th:text="${list.acronym}"></option>
                            </select>
                            <select id="idrole" name="idrole" class="form-control">
                                <option value="0" >-- Pilih --</option>
                            </select>
                            <select id="periode" name="periode" class="form-control">
                                <option value="0" >-- Pilih --</option>
                            </select>
<!--                            <select id="type" name="type" class="form-control">
                                <option value="entry_gov_budget" >Budget</option>
                                <option value="entry_gov_indicator" >Indicator</option>
                            </select>-->
                            <select id="pil_prog" name="pil_prog" class="form-control">
                                <option value="0" ><span class=""> -- Pilih -- </span> </option>
                                <option value="budget" ><span class=""> Budget </span> </option>
                                <option value="indicator" ><span class=""> Indicator </span> </option>
                            </select>
                            <select id="period" name="period" class="form-control">
                                <option value="0" ><span class=""> -- Pilih -- </span> </option>
                            </select>
                            <div id="datetimepicker1" class="input-append date">
                                <input id="time_activity" class="input-small" name="time_activity" data-format="yyyy/MM/dd" type="text"></input>
                                <span class="add-on">
                                    <i data-time-icon="icon-time" data-date-icon="icon-calendar" class="icon-calendar">
                                    </i>
				</span>
                            </div>
                            <a class="btn btn-success appl" id="apply_btn" data-periode="1" style="margin-left: 10px; margin-top: -10px">
                                <span class="lang_indo">Cari</span>
                                <span class="lang_eng">Submit</span>
                            </a>
                            <button type="button" style="margin-left: 10px;" class="btn btn-default pull-right" onclick="printJS('tabel-entri-sdg', 'html')">
							    PDF
							 </button>
                            <a class="btn btn-warning pull-right" href="#" onclick="tableToExcel('tabel-entri-sdg', 'Report Best Practice')">Excel</a><br/>
<!--                            <div class="input-append pull-right">
                                <input placeholder="Search..." class="span10" id="text-cari" type="text"/>
                                <span class="add-on"><i class="icon-search"></i></span>
                            </div>-->
                        </div>
<!--                        <div class="row-fluid">
                            <div class="span6">
                            </div>
                            <div class="span6" align="right">
                                <div class="input-append">
                                    <input placeholder="Search..." class="span10" id="text-cari" type="text"/>
                                    <span class="add-on"><i class="icon-search"></i></span>
                                </div>
                            </div>
                    	</div>-->
                        <div class="row-fluid">
                            <div class="span12" id="sub_excel">
                                <table  id="tabel-entri-sdg" class="table table-striped table-bordered">
                                    <thead >
<!--                                        <tr class="lang_eng" style="display: none">
                                            <th style="text-align:center;font-size:80%;width: 10%">Indicator Code</th>
                                            <th style="text-align:center;font-size:80%;width: 45%">Indicator Name</th>
                                            <th style="text-align:center;font-size:80%;">Data Source</th>
                                            <th style="text-align:center;font-size:80%;">Unit</th>
                                            <th style="text-align:center;font-size:80%;">Baseline</th>
                                            <th style="text-align:center;font-size:80%;">Target SDGs</th>
                                            <th style="text-align:center;font-size:80%;">SDGs Achievements I</th>
                                            <th style="text-align:center;font-size:80%;">SDGs Achievements II</th>
                                            <th style="text-align:center;font-size:80%;">SDGs Achievements III</th>
                                            <th style="text-align:center;font-size:80%;">SDGs Achievements IV</th>
                                            <th style="text-align:center;font-size:80%;">Status</th>
                                        </tr>
                                        <tr class="lang_indo" id="thead_indo">
                                            <th style="text-align:center;font-size:80%;width: 10%">Kode Indikator</th>
                                            <th style="text-align:center;font-size:80%;width: 45%">Nama Indikator</th>
                                            <th style="text-align:center;font-size:80%;">Sumber Data</th>
                                            <th style="text-align:center;font-size:80%;">Unit</th>
                                            <th style="text-align:center;font-size:80%;">Garis Dasar</th>
                                            <th style="text-align:center;font-size:80%;">Target SDG</th>
                                            <th style="text-align:center;font-size:80%;">Pencapaian SDG I</th>
                                            <th style="text-align:center;font-size:80%;">Pencapaian SDG II</th>
                                            <th style="text-align:center;font-size:80%;">Pencapaian SDG III</th>
                                            <th style="text-align:center;font-size:80%;">Pencapaian SDG IV</th>
                                            <th style="text-align:center;font-size:80%;">Status</th>
                                        </tr>-->
                                    </thead>
                                    <tbody id="tbody_entri-sdg">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- <div class="btn-toolbar lang_eng" style="float:right; display: none" id="btn_eng">
                <a class="btn btn-success btn-small" id="apply_btn" data-id="#">Apply</a>
            </div>
            <div class="btn-toolbar lang_indo" style="float:right" id="btn_indo">
                <a class="btn btn-success btn-small" id="apply_btn" data-id="#">Terapkan</a>
            </div> -->
        </div>
        <div class="modal hide fade addModal" data-backdrop="static" role="dialog" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="float:right">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h3 class="modal-title lang_indo" id="exampleModalLabel">Pengajuan Nilai</h3>
                        <h3 class="modal-title lang_eng" id="exampleModalLabel" style="display: none">Submission Rate</h3>
                    </div>
                    <form class="form-horizontal">
                        <div class="modal-body">
                            <form id="form-submission">
                                <div class="control-group">
                                    <table id="tbl_program" class='table table-bordered'>
                                        <thead></thead>
                                        <tbody></tbody>
                                    </table>
                                    <input name="id_role" id="id_role" type="hidden" class="input-block-level">
                                    <input name="catrole" id="catrole" type="hidden" class="input-block-level">
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer" id="simpan_">
                            <button type="button" class="btn btn-secondary lang_indo" data-dismiss="modal">Tutup</button>
                            <button type="button" class="btn btn-secondary lang_eng" data-dismiss="modal" style="display: none">Close</button>
                            <button type="button" id="simpan" class="btn btn-success">
                            	<span class="lang_indo">Simpan</span>
                            	<span class="lang_eng" style="display: none">Submit</span>
                            </button>
                            <button type="button" id="apply" class="btn btn-primary">
                            	<span class="lang_indo">Apply</span>
                            	<span class="lang_eng" style="display: none">Apply</span>
                            </button>
                            <button type="button" id="unapply" class="btn btn-danger" style="display: none">
                            	<span class="lang_indo">UnApply</span>
                            	<span class="lang_eng" style="display: none">UnApply</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="modal hide fade addModal_nilai" data-backdrop="static" role="dialog" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="float:right">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h3 class="modal-title lang_indo" id="exampleModalLabel">Pengajuan Nilai</h3>
                        <h3 class="modal-title lang_eng" id="exampleModalLabel" style="display: none">Submission Rate</h3>
                    </div>
                    <form class="form-horizontal">
                        <div class="modal-body">
                            <form id="form-submission">
                                <div class="control-group">
                                    <table id="tbl_program_nilai" class='table table-bordered'>
                                        <thead></thead>
                                        <tbody></tbody>
                                    </table>
                                    <input name="id_role1" id="id_role1" type="hidden" class="input-block-level">
                                    <input name="catrole1" id="catrole1" type="hidden" class="input-block-level">
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer" id="simpan_">
                            <button type="button" class="btn btn-secondary lang_indo" data-dismiss="modal">Tutup</button>
                            <button type="button" class="btn btn-secondary lang_eng" data-dismiss="modal" style="display: none">Close</button>
                            
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="modal hide fade addModal_date" data-backdrop="static" role="dialog" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="float:right">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h3 class="modal-title lang_indo" id="exampleModalLabel">Pengajuan Nilai</h3>
                        <h3 class="modal-title lang_eng" id="exampleModalLabel" style="display: none">Submission Rate</h3>
                    </div>
                    <form class="form-horizontal">
                        <div class="modal-body">
                            <form id="form-submission">
                                <div class="control-group">
                                    <table id="tbl_program_date" class='table table-bordered'>
                                        <thead></thead>
                                        <tbody></tbody>
                                    </table>
                                    <input name="id_role2" id="id_role2" type="hidden" class="input-block-level">
                                    <input name="catrole2" id="catrole2" type="hidden" class="input-block-level">
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer" id="simpan_">
                            <button type="button" class="btn btn-secondary lang_indo" data-dismiss="modal">Tutup</button>
                            <button type="button" class="btn btn-secondary lang_eng" data-dismiss="modal" style="display: none">Close</button>
                            
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="modal hide fade addModal_catrole" data-backdrop="static" role="dialog" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="float:right">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h3 class="modal-title lang_indo" id="exampleModalLabel">Pengajuan Nilai</h3>
                        <h3 class="modal-title lang_eng" id="exampleModalLabel" style="display: none">Submission Rate</h3>
                    </div>
                    <form class="form-horizontal">
                        <div class="modal-body">
                            <form id="form-submission">
                                <div class="control-group">
                                    <table id="tbl_program_catrole" class='table table-bordered'>
                                        <thead></thead>
                                        <tbody></tbody>
                                    </table>
                                    <input name="id_role3" id="id_role3" type="hidden" class="input-block-level">
                                    <input name="catrole3" id="catrole3" type="hidden" class="input-block-level">
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer" id="simpan_">
                            <button type="button" class="btn btn-secondary lang_indo" data-dismiss="modal">Tutup</button>
                            <button type="button" class="btn btn-secondary lang_eng" data-dismiss="modal" style="display: none">Close</button>
                            
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div th:include="admin/layout :: footer"></div>
    

</body>
<div class="modal-loading-new"></div>
<style th:inline="text">
			.modal-loading-new {
				opacity: 0.4!important;
				display:    none;
				position:   fixed;
				z-index:    1000;
				top:        0;
				left:       0;
				height:     100%;
				width:      100%;
				background: #333 url([[@{/img/loading.gif}]]) 50% 50% no-repeat;
			}
			/* When the body has the loading class, we turn the scrollbar off with overflow:hidden */
			body.loading {
				overflow: hidden;   
			}
			body.loading .modal-loading-new {
				display: block;
			}
			.select2-results__option{
			    position: relative;
			    margin-left: 10px;
			    list-style: none;
			}
		</style>

<script th:inline="javascript" >
    // <![CDATA[
            //$(document).ready(function (e) {
            
            //validasi role
//            alert('yaa');
        var id_role     = [[${id_role}]];
        var id_prov     = [[${id_prov}]];
        var privilege   = [[${privilege}]];
            
        $('#time_activity').datepicker({
            autoclose: true,
            format: "yyyy-mm-dd"
        });
        
        if(id_role == '1'){

        }else{
            $.ajax({
                type: "GET",
                url: urls+'list-get-option-role-sub/'+id_prov,
                success: function (result) {
                    $("#idrole").html('<option value="0" >-- Pilih --</option>');
                    $("#idrole").append('<option value="999999" >All</option>');
                    $("#idrole").append('<option value="9999991" >All Government</option>');
                    $("#idrole").append('<option value="9999992" >All Non Government</option>');
                    $("#idrole").append('<option value="9999993" >All Corporation</option>');
                    var array = result.content;
                    if (array != '') {
                        for (i in array) {
                            $("#idrole").append('<option value="'+array[i][0]+'" >'+array[i][1]+'</option>');
                        }
                    }
                    if(privilege == 'SUPER'){
                        $("#idrole").val('0').trigger("change").attr('disabled',false);
                    }else if(privilege == 'ADMIN'){
                        $("#idrole").val('0').trigger("change").attr('disabled',false);
                    }else{
                        $("#idrole").val(id_role).trigger("change").attr('disabled',true);
                    }
                }
            });

            $.ajax({
                type: "GET",
                url: urls+'list-get-option-monper/'+id_prov,
                success: function (result1) {
                    $("#periode").html('<option value="0" >-- Pilih --</option>');
                    var array1 = result1.content;
                    if (array1 != '') {
                        for (i in array1) {
                            var selisih     = (array1[i][2] - array1[i][1]);
//                                console.log(array1[i][2]);
                            var x;
                            for(x=0; x<=selisih; x++){
//                                    console.log((array1[i][1]+x));
                                $("#periode").append('<option value="'+array1[i][0]+'###'+(array1[i][1]+x)+'" >'+(array1[i][1]+x)+'</option>');
                            }

                        }
                    }
                    
                }
            });

            $("#id_prov").val(id_prov).trigger("change").attr('disabled',true);
//            grid();
        }
            
        $("#id_prov").on('change', function(e){
            var id_prov = this.value ;
            $.ajax({
                type: "GET",
                url: urls+'list-get-option-role-sub/'+id_prov,
                success: function (result) {
                    $("#idrole").html('<option value="0" >-- Pilih --</option>');
                    $("#idrole").html('<option value="999999" >All</option>');
                    $("#idrole").append('<option value="9999991" >All Government</option>');
                    $("#idrole").append('<option value="9999992" >All Non Government</option>');
                    $("#idrole").append('<option value="9999993" >All Corporation</option>');
                    var array = result.content;
                    if (array != '') {
                        for (i in array) {
                            $("#idrole").append('<option value="'+array[i][0]+'" >'+array[i][1]+'</option>');
                        }
                    }
                    if(privilege == 'SUPER'){
                        $("#idrole").val('0').trigger("change").attr('disabled',false);
                    }else if(privilege == 'ADMIN'){
                        $("#idrole").val('0').trigger("change").attr('disabled',false);
                    }else{
                        $("#idrole").val(id_role).trigger("change").attr('disabled',true);
                    }
                }
            });
            $.ajax({
                type: "GET",
                url: urls+'list-get-option-monper/'+id_prov,
                success: function (result1) {
                    $("#periode").html('<option value="0" >-- Pilih --</option>');
                    var array1 = result1.content;
                    if (array1 != '') {
                        for (i in array1) {
                            var selisih     = (array1[i][2] - array1[i][1]);
//                                console.log(array1[i][2]);
                            var x;
                            for(x=0; x<=selisih; x++){
//                                    console.log((array1[i][1]+x));
                                $("#periode").append('<option value="'+array1[i][0]+'###'+(array1[i][1]+x)+'" >'+(array1[i][1]+x)+'</option>');
                            }

                        }
                    }
//                    $("#periode").val(monper_1+"###"+tahun_1).trigger("change").attr('disabled',true);
                }
            });
            
            
//            grid();
        });
            
        $("#periode").on('change', function(e){
            var tipe    = $("#pil_prog").val();
            var role    = $("#idrole").val();
            var periode = $("#periode").val();
            var data    = periode.split("###");
            var catrole = '';
            $.ajax({
                async:false,
                type: "GET",
                url: urls+'list-cek-catrole-best/'+role,
                success: function (cek_catrole) {
                    catrole = cek_catrole.content;
                }
            });

            if(tipe == 'budget'){
                if(role == '999999'){
                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                    $("#period").html(s_html);
                }else{
                    if(catrole == 'Government' || role == '9999991'){
                        $.ajax({
                            type: "GET",
                            url: urls+'list-get-sts-monper-gov/'+data[0],
                            success: function (result1) {
                                var sts = result1.content;
                                console.log(sts);
                                if(sts == 'yearly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" selected>End of fiscal year</option>';
                                }else if(sts == 'semesterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Semester 1</option><option value="2" >Semester 2</option>';
                                }else if(sts == 'quarterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                                }else{}
                                $("#period").html(s_html);
                                if(sts == 'yearly'){
                                    $("#period").trigger('change');
                                }
                            }
                        });
                    }else if(catrole == 'NSA'|| role == '9999992'){
                        $.ajax({
                            type: "GET",
                            url: urls+'list-get-sts-monper-nongov/'+data[0],
                            success: function (result1) {
                                var sts = result1.content;
                                console.log(sts);
                                if(sts == 'yearly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" selected>End of fiscal year</option>';
                                }else if(sts == 'semesterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Semester 1</option><option value="2" >Semester 2</option>';
                                }else if(sts == 'quarterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                                }else{}
                                $("#period").html(s_html);
                                if(sts == 'yearly'){
                                    $("#period").trigger('change');
                                }
                            }
                        });
                    }else if(catrole == 'Corporation' || role == '9999993'){
                        $.ajax({
                            type: "GET",
                            url: urls+'list-get-sts-monper-corporation/'+data[0],
                            success: function (result1) {
                                var sts = result1.content;
                                console.log(sts);
                                if(sts == 'yearly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" selected>End of fiscal year</option>';
                                }else if(sts == 'semesterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Semester 1</option><option value="2" >Semester 2</option>';
                                }else if(sts == 'quarterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                                }else{}
                                $("#period").html(s_html);
                                if(sts == 'yearly'){
                                    $("#period").trigger('change');
                                }
                            }
                        });
                    }else{
                        var s_html = '<option value="0" >-- Pilih --</option>';
                        $("#period").html(s_html);
                    }
                }
                
            }else if(tipe == 'indicator'){
                if(role == '999999'  ){
                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                    $("#period").html(s_html);
                }else{
                    if(catrole == 'Government' || role == '9999991'){
                        $.ajax({
                            type: "GET",
                            url: urls+'list-get-sts-monper-gov_act/'+data[0],
                            success: function (result1) {
                                var sts = result1.content;
                                console.log(sts);
                                if(sts == 'yearly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" selected>End of fiscal year</option>';
                                }else if(sts == 'semesterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Semester 1</option><option value="2" >Semester 2</option>';
                                }else if(sts == 'quarterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                                }else{}
                                $("#period").html(s_html);
                                if(sts == 'yearly'){
                                    $("#period").trigger('change');
                                }
                            }
                        });
                    }else if(catrole == 'NSA' || role == '9999992'){
                        $.ajax({
                            type: "GET",
                            url: urls+'list-get-sts-monper-nongov_act/'+data[0],
                            success: function (result1) {
                                var sts = result1.content;
                                console.log(sts);
                                if(sts == 'yearly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" selected>End of fiscal year</option>';
                                }else if(sts == 'semesterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Semester 1</option><option value="2" >Semester 2</option>';
                                }else if(sts == 'quarterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                                }else{}
                                $("#period").html(s_html);
                                if(sts == 'yearly'){
                                    $("#period").trigger('change');
                                }
                            }
                        });
                    }else if(catrole == 'Corporation' || role == '9999993'){
                        $.ajax({
                            type: "GET",
                            url: urls+'list-get-sts-monper-corporation/'+data[0],
                            success: function (result1) {
                                var sts = result1.content;
                                console.log(sts);
                                if(sts == 'yearly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" selected>End of fiscal year</option>';
                                }else if(sts == 'semesterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Semester 1</option><option value="2" >Semester 2</option>';
                                }else if(sts == 'quarterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                                }else{}
                                $("#period").html(s_html);
                                if(sts == 'yearly'){
                                    $("#period").trigger('change');
                                }
                            }
                        });
                    }else{
                        var s_html = '<option value="0" >-- Pilih --</option>';
                        $("#period").html(s_html);
                    }
                }
                
            }else{
                var s_html = '<option value="0" >-- Pilih --</option>';
                $("#period").html(s_html);
            }
        });
        
        $("#pil_prog").on('change', function(e){
            var tipe    = $("#pil_prog").val();
            var role    = $("#idrole").val();
            var periode = $("#periode").val();
            var data    = periode.split("###");
            var catrole = '';
            $.ajax({
                async:false,
                type: "GET",
                url: urls+'list-cek-catrole-best/'+role,
                success: function (cek_catrole) {
                    catrole = cek_catrole.content;
                }
            });

            if(tipe == 'budget'){
                if(role == '999999'){
                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                    $("#period").html(s_html);
                }else{
                    if(catrole == 'Government' || role == '9999991'){
                        $.ajax({
                            type: "GET",
                            url: urls+'list-get-sts-monper-gov/'+data[0],
                            success: function (result1) {
                                var sts = result1.content;
                                console.log(sts);
                                if(sts == 'yearly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" selected>End of fiscal year</option>';
                                }else if(sts == 'semesterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Semester 1</option><option value="2" >Semester 2</option>';
                                }else if(sts == 'quarterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                                }else{}
                                $("#period").html(s_html);
                                if(sts == 'yearly'){
                                    $("#period").trigger('change');
                                }
                            }
                        });
                    }else if(catrole == 'NSA' || role == '9999992'){
                        $.ajax({
                            type: "GET",
                            url: urls+'list-get-sts-monper-nongov/'+data[0],
                            success: function (result1) {
                                var sts = result1.content;
                                console.log(sts);
                                if(sts == 'yearly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" selected>End of fiscal year</option>';
                                }else if(sts == 'semesterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Semester 1</option><option value="2" >Semester 2</option>';
                                }else if(sts == 'quarterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                                }else{}
                                $("#period").html(s_html);
                                if(sts == 'yearly'){
                                    $("#period").trigger('change');
                                }
                            }
                        });
                    }else if(catrole == 'Corporation' || role == '9999993'){
                        $.ajax({
                            type: "GET",
                            url: urls+'list-get-sts-monper-corporation/'+data[0],
                            success: function (result1) {
                                var sts = result1.content;
                                console.log(sts);
                                if(sts == 'yearly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" selected>End of fiscal year</option>';
                                }else if(sts == 'semesterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Semester 1</option><option value="2" >Semester 2</option>';
                                }else if(sts == 'quarterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                                }else{}
                                $("#period").html(s_html);
                                if(sts == 'yearly'){
                                    $("#period").trigger('change');
                                }
                            }
                        });
                    }else{
                        var s_html = '<option value="0" >-- Pilih --</option>';
                        $("#period").html(s_html);
                    }
                }
                
            }else if(tipe == 'indicator'){
                if(role == '999999'){
                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                    $("#period").html(s_html);
                }else{
                    if(catrole == 'Government' || role == '9999991'){
                        $.ajax({
                            type: "GET",
                            url: urls+'list-get-sts-monper-gov_act/'+data[0],
                            success: function (result1) {
                                var sts = result1.content;
                                console.log(sts);
                                if(sts == 'yearly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" selected>End of fiscal year</option>';
                                }else if(sts == 'semesterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Semester 1</option><option value="2" >Semester 2</option>';
                                }else if(sts == 'quarterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                                }else{}
                                $("#period").html(s_html);
                                if(sts == 'yearly'){
                                    $("#period").trigger('change');
                                }
                            }
                        });
                    }else if(catrole == 'NSA' || role == '9999992'){
                        $.ajax({
                            type: "GET",
                            url: urls+'list-get-sts-monper-nongov_act/'+data[0],
                            success: function (result1) {
                                var sts = result1.content;
                                console.log(sts);
                                if(sts == 'yearly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" selected>End of fiscal year</option>';
                                }else if(sts == 'semesterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Semester 1</option><option value="2" >Semester 2</option>';
                                }else if(sts == 'quarterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                                }else{}
                                $("#period").html(s_html);
                                if(sts == 'yearly'){
                                    $("#period").trigger('change');
                                }
                            }
                        });
                    }else if(catrole == 'Corporation' || role == '9999993'){
                        $.ajax({
                            type: "GET",
                            url: urls+'list-get-sts-monper-corporation_act/'+data[0],
                            success: function (result1) {
                                var sts = result1.content;
                                console.log(sts);
                                if(sts == 'yearly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" selected>End of fiscal year</option>';
                                }else if(sts == 'semesterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Semester 1</option><option value="2" >Semester 2</option>';
                                }else if(sts == 'quarterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                                }else{}
                                $("#period").html(s_html);
                                if(sts == 'yearly'){
                                    $("#period").trigger('change');
                                }
                            }
                        });
                    }else{
                        var s_html = '<option value="0" >-- Pilih --</option>';
                        $("#period").html(s_html);
                    }
                }
                
            }else{
                var s_html = '<option value="0" >-- Pilih --</option>';
                $("#period").html(s_html);
            }
        });
        
        $("#idrole").on('change', function(e){
            var tipe    = $("#pil_prog").val();
            var role    = $("#idrole").val();
            var periode = $("#periode").val();
            var data    = periode.split("###");
            var catrole = '';
            $.ajax({
                async:false,
                type: "GET",
                url: urls+'list-cek-catrole-best/'+role,
                success: function (cek_catrole) {
                    catrole = cek_catrole.content;
                }
            });

            if(tipe == 'budget'){
                if(role == '999999'){
                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                    $("#period").html(s_html);
                }else{
                    if(catrole == 'Government' || role == '9999991'){
                        $.ajax({
                            type: "GET",
                            url: urls+'list-get-sts-monper-gov/'+data[0],
                            success: function (result1) {
                                var sts = result1.content;
                                console.log(sts);
                                if(sts == 'yearly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" selected>End of fiscal year</option>';
                                }else if(sts == 'semesterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Semester 1</option><option value="2" >Semester 2</option>';
                                }else if(sts == 'quarterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                                }else{}
                                $("#period").html(s_html);
                                if(sts == 'yearly'){
                                    $("#period").trigger('change');
                                }
                            }
                        });
                    }else if(catrole == 'NSA' || role == '9999992'){
                        $.ajax({
                            type: "GET",
                            url: urls+'list-get-sts-monper-nongov/'+data[0],
                            success: function (result1) {
                                var sts = result1.content;
                                console.log(sts);
                                if(sts == 'yearly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" selected>End of fiscal year</option>';
                                }else if(sts == 'semesterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Semester 1</option><option value="2" >Semester 2</option>';
                                }else if(sts == 'quarterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                                }else{}
                                $("#period").html(s_html);
                                if(sts == 'yearly'){
                                    $("#period").trigger('change');
                                }
                            }
                        });
                    }else if(catrole == 'Corporation' || role == '9999993'){
                        $.ajax({
                            type: "GET",
                            url: urls+'list-get-sts-monper-corporation/'+data[0],
                            success: function (result1) {
                                var sts = result1.content;
                                console.log(sts);
                                if(sts == 'yearly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" selected>End of fiscal year</option>';
                                }else if(sts == 'semesterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Semester 1</option><option value="2" >Semester 2</option>';
                                }else if(sts == 'quarterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                                }else{}
                                $("#period").html(s_html);
                                if(sts == 'yearly'){
                                    $("#period").trigger('change');
                                }
                            }
                        });
                    }else{
                        var s_html = '<option value="0" >-- Pilih --</option>';
                        $("#period").html(s_html);
                    }
                }
                
            }else if(tipe == 'indicator'){
                if(role == '999999'){
                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                    $("#period").html(s_html);
                }else{
                    if(catrole == 'Government' || role == '9999991'){
                        $.ajax({
                            type: "GET",
                            url: urls+'list-get-sts-monper-gov_act/'+data[0],
                            success: function (result1) {
                                var sts = result1.content;
                                console.log(sts);
                                if(sts == 'yearly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" selected>End of fiscal year</option>';
                                }else if(sts == 'semesterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Semester 1</option><option value="2" >Semester 2</option>';
                                }else if(sts == 'quarterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                                }else{}
                                $("#period").html(s_html);
                                if(sts == 'yearly'){
                                    $("#period").trigger('change');
                                }
                            }
                        });
                    }else if(catrole == 'NSA' || role == '9999992'){
                        $.ajax({
                            type: "GET",
                            url: urls+'list-get-sts-monper-nongov_act/'+data[0],
                            success: function (result1) {
                                var sts = result1.content;
                                console.log(sts);
                                if(sts == 'yearly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" selected>End of fiscal year</option>';
                                }else if(sts == 'semesterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Semester 1</option><option value="2" >Semester 2</option>';
                                }else if(sts == 'quarterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                                }else{}
                                $("#period").html(s_html);
                                if(sts == 'yearly'){
                                    $("#period").trigger('change');
                                }
                            }
                        });
                    }else if(catrole == 'Corporation' || role == '9999993'){
                        $.ajax({
                            type: "GET",
                            url: urls+'list-get-sts-monper-corporation_act/'+data[0],
                            success: function (result1) {
                                var sts = result1.content;
                                console.log(sts);
                                if(sts == 'yearly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" selected>End of fiscal year</option>';
                                }else if(sts == 'semesterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Semester 1</option><option value="2" >Semester 2</option>';
                                }else if(sts == 'quarterly'){
                                    var s_html = '<option value="0" >-- Pilih --</option><option value="1" >Quarter 1</option><option value="2" >Quarter 2<option value="3" >Quarter 3</option><option value="4" >Quarter 4</option>';
                                }else{}
                                $("#period").html(s_html);
                                if(sts == 'yearly'){
                                    $("#period").trigger('change');
                                }
                            }
                        });
                    }else{
                        var s_html = '<option value="0" >-- Pilih --</option>';
                        $("#period").html(s_html);
                    }
                }
                
            }else{
                var s_html = '<option value="0" >-- Pilih --</option>';
                $("#period").html(s_html);
            }
        });
        
        $("#period").on('change', function(e){
//            grid();
        });
            
            
            
            //tutup validasi role
            
            //Bahasa
            var titleDel = "Anda Yakin";
	        var messDel = "Menghapus Data?";
	        var buttDel = 'Ya, Hapus data ini!';
	        var titleApp = "Anda Yakin";
	        var messApp = "Apply Data ini?";
	        var buttApp = 'Ya, Apply data ini!';
	        var buttUnApp = 'Ya, Batal Apply data ini!';
	        var titleOk	= "Hapus";
	        var messOk = "Data berhasil dihapus";
	        var messNOk = "Data tidak dapat dihapus";
                var messUnApp = "Batal Terapkan data ini?";
	        var required = "Harus diisi";
	        function bhs(cek){
                    if(cek){
                        $(".lang_indo").show();
                        $(".lang_eng").hide();
                        titleDel = "Anda Yakin";
                        messDel = "Menghapus Data?";
                        buttDel = 'Ya, Hapus data ini!';
                        titleOk	= "Hapus";
	    	        messOk = "Data berhasil dihapus";
	    	        messNOk = "Data tidak dapat dihapus";
	    	        required = "Harus diisi";
	    	        titleApp = "Anda Yakin";
	    	        messApp = "Apply Data ini?";
	    	        buttApp = 'Ya, Apply data ini!';
                        buttUnApp = 'Ya, Batal Apply data ini!';
                        messUnApp = "UnApply data ini?";
                    }else{	    	        
                        $(".lang_indo").hide();
                        $(".lang_eng").show();
                        titleDel = "Are you sure";
                        messDel = "Delete this data?";
                        buttDel = 'Yes, Delete this data!';
                        titleOk	= "Delete";
	    	        messOk = "Delete successful";
	    	        messNOk = "Can't delete data";
	    	        required = "Required";
	    	        titleApp = "Are you sure";
	    	        messApp = "Apply this data?";
	    	        buttApp = 'Ya, Apply this data!';
                        buttUnApp = 'Ya, UnApply this data!';
                        messUnApp = "Unapply this data?";
                    }
	        }
            if(lang){
                    bhs(lang=="0");
                    grid_modal();
            }else{
                    bhs($('#fs').is(':checked'));
                    grid_modal();
            }

            $('#fs').on('change', function(e){
                grid_modal();
//                grid();
                bhs($(this).is(':checked'));
                
            });

            var v_idprov    = $("#id_prov").val();
            var v_idrole    = $("#idrole").val();
            var v_dataid    = $("#periode").val();
            var v_data_id   = v_dataid.split("###");;
            var id_monper   = v_data_id[0];
            var tahun       = v_data_id[1];
            
            
            $('.app').on('click', '.appl', function(e){
                var v_idprov    = $("#id_prov").val();
                var v_dataid    = $("#periode").val();
                var v_pil_prog  = $("#pil_prog").val();
                var v_period    = $("#period").val();
                
                $cek = 0;
                if (v_idprov == '0'){	
                    if($('#fs').is(':checked')){
                        swal("Anda harus memilih Provinsi");
                    }else{
                        swal("You must Choose Province");
                    }
                    $cek += 1;
                }
                if (v_dataid == '0'){					
                    if($('#fs').is(':checked')){
                        swal("Anda harus memilih Tahun");
                    }else{
                        swal("You must Choose Year");
                    }
                    $cek += 1;
                }
                if (v_pil_prog == '0'){					
                    if($('#fs').is(':checked')){
                        swal("Anda harus memilih Program");
                    }else{
                        swal("You must Choose Program");
                    }
                    $cek += 1;
                }
                if (v_period == '0'){					
                    if($('#fs').is(':checked')){
                        swal("Anda harus memilih Periode");
                    }else{
                        swal("You must Choose Period");
                    }
                    $cek += 1;
                }
                if ($cek == 0){
                    grid();
                }
                
            });
            
            
            //modal
            $('#tabel-entri-sdg').on('click', ".id_role", function(e){
                var id_role     = $(this).data("id_role");
                var catrole     = $(this).data("catrole");
                $("#catrole").val(catrole);
                $("#id_role").val(id_role);
                var v_pil_prog  = $("#pil_prog").val();
                //budget indicator
                if(v_pil_prog == 'indicator'){
                    grid_modal();
                    apply_btn();
                }else{
                    grid_modal_budget();
                    apply_btn_budget();
                }
                
                $('.addModal').modal("show");
            });
            
            //cek apply
            function apply_btn(){
                var id_role     = $("#id_role").val();
                var catrole     = $("#catrole").val();
                var v_dataid    = $("#periode").val();
                var v_data_id   = v_dataid.split("###");;
                var id_monper   = v_data_id[0];
                var tahun       = v_data_id[1];
                var v_period    = $("#period").val();
                if(catrole == 'Government'){
                    var type = 'entry_gov_indicator';
                }else if(catrole == 'NSA'){
                    var type = 'entry_nsa_indicator';
                }else if(catrole == 'Corporation'){
                    var type = 'entry_usaha_indicator';
                }
                console.log('get-status-approve/'+id_role+'/'+id_monper+'/'+tahun+'/'+type+'/'+v_period);
                $.ajax({
                    type: "GET",
                    url: urls+'get-status-approve/'+id_role+'/'+id_monper+'/'+tahun+'/'+type+'/'+v_period,
                    success: function (result1) {
                        if(result1.content == "1"){
                            $('#simpan').hide();
                            $('#apply').hide();
                            $('#unapply').show();
                        }else if(result1.content == "2"){
                            $('#simpan').hide();
                            $('#apply').hide();
                            $('#unapply').hide();
                        }else if(result1.content == "3"){
                            $('#simpan').hide();
                            $('#apply').hide();
                            $('#unapply').show();
                        }else if(result1.content == "4"){
                            $('#simpan').hide();
                            $('#apply').hide();
                            $('#unapply').hide();
                        }else{
                            $('#simpan').show();
                            $('#apply').show();
                            $('#unapply').hide();
                        }
                    }
                });
            } 
            
            function apply_btn_budget(){
                var id_role     = $("#id_role").val();
                var catrole     = $("#catrole").val();
                var v_dataid    = $("#periode").val();
                var v_data_id   = v_dataid.split("###");;
                var id_monper   = v_data_id[0];
                var tahun       = v_data_id[1];
                var v_period    = $("#period").val();
                if(catrole == 'Government'){
                    var type = 'entry_gov_budget';
                }else if(catrole == 'NSA'){
                    var type = 'entry_nsa_budget';
                }else if(catrole == 'Corporation'){
                    var type = 'entry_usaha_budget';
                }
                console.log('get-status-approve/'+id_role+'/'+id_monper+'/'+tahun+'/'+type+'/'+v_period);
                $.ajax({
                    type: "GET",
                    url: urls+'get-status-approve/'+id_role+'/'+id_monper+'/'+tahun+'/'+type+'/'+v_period,
                    success: function (result1) {
                        if(result1.content == "1"){
                            $('#simpan').hide();
                            $('#apply').hide();
                            $('#unapply').show();
                        }else if(result1.content == "2"){
                            $('#simpan').hide();
                            $('#apply').hide();
                            $('#unapply').hide();
                        }else if(result1.content == "3"){
                            $('#simpan').hide();
                            $('#apply').hide();
                            $('#unapply').show();
                        }else if(result1.content == "4"){
                            $('#simpan').hide();
                            $('#apply').hide();
                            $('#unapply').hide();
                        }else{
                            $('#simpan').show();
                            $('#apply').show();
                            $('#unapply').hide();
                        }
                    }
                });
            } 
            
            //grid modal
            function grid_modal(){
                var id_role     = $("#id_role").val();
                var catrole     = $("#catrole").val();
                var v_dataid    = $("#periode").val();
                var v_data_id   = v_dataid.split("###");;
                var id_monper   = v_data_id[0];
                var tahun       = v_data_id[1];
                var v_period    = $("#period").val();
                var d_time      = $("#time_activity").val();
                var v_pil_prog  = $("#pil_prog").val();
                if(d_time == ''){
                    var isi_time = '777777';
//                                console.log('kosong')
                }else{
                    var isi_time = d_time;
//                                console.log('isi '+d_time)
                }
                
                var dt ="";
                if(catrole == 'Government'){
                    var type    = 'entry_gov_indicator';
                    var type_b  = 'entry_gov_budget';
                    var tb      = 'gov_activity';
                    var tb2     = 'gov_indicator';
                }else if(catrole == 'NSA'){
                    var type    = 'entry_nsa_indicator';
                    var type_b  = 'entry_nsa_budget';
                    var tb      = 'nsa_activity';
                    var tb2     = 'nsa_indicator';
                }else if(catrole == 'Corporation'){
                    var type    = 'entry_usaha_indicator';
                    var type_b  = 'entry_usaha_budget';
                    var tb      = 'usaha_activity';
                    var tb2     = 'usaha_indicator';
                }else{}
                if(v_pil_prog == 'indicator'){
                    var link2 = urls+'get-cek-data-all/'+id_role+'/'+tahun+'/'+v_period+'/'+type+'/'+tb+'/'+tb2+'/'+isi_time+'/'+id_monper;
                }else{
                    var link2 = urls+'get-cek-data-all-budget/'+id_role+'/'+tahun+'/'+v_period+'/'+type_b+'/'+tb+'/'+tb2+'/'+isi_time+'/'+id_monper;
                }
                $.ajax({
                    type: "GET",
                    async:false,
                    url: link2,
                    success: function (result3) {
                        dt = result3.content[0];
                    }
                });
                
                if(dt[0] == null){
                    var ketdt = '0';
                }else{
                    var ketdt = dt[0];
                }
                if(dt[1] == null){
                    var ketdt1 = '0';
                }else{
                    var ketdt1 = dt[1];
                }
                
                if(ketdt1 == '0'){
                    $("#tbl_program > tbody").html("");
                }else if(ketdt == '0'){
                    $("#tbl_program > tbody").html("");
                }else{
                    $("#tbl_program > tbody").html("");
                    $.ajax({
                        type: "GET",
                        async:false,
                        url: urls + "get_sub_prog_level1/"+id_monper+"/"+id_role+"/"+catrole,
                        success: function (data_level1) {
                            console.log(data_level1.content);
                            var level1 = data_level1.content;
                            if (level1 != '') {
                                for (i in level1) {
                                    if($("#fs").is(':checked')){
                                        var prog_1 = level1[i][3]+" "+level1[i][1];
                                    }else{
                                        var prog_1 = level1[i][3]+" "+level1[i][2];
                                    }
                                    var tb_prog = '<tr> <td ><b>'+prog_1+'</b></td> <td style="width: 30%;"></td> </tr>';
                                    $("#tbl_program > tbody").append(tb_prog);

                                    $.ajax({
                                        type: "GET",
                                        async:false,
                                        url: urls + "get_sub_prog_level2/"+level1[i][0]+"/"+id_role+"/"+catrole,
                                        success: function (data_level2) {
    //                                        console.log(data_level2.content);
                                            var level2 = data_level2.content;
                                            if (level2 != '') {
                                                for (o in level2) {
                                                    if($("#fs").is(':checked')){
                                                        var prog_2 = level1[i][3]+"."+level2[o][3]+" "+level2[o][1];
                                                    }else{
                                                        var prog_2 = level1[i][3]+"."+level2[o][3]+" "+level2[o][2];
                                                    }
                                                    var tb_prog2 = '<tr> <td style="text-indent: 2em">'+prog_2+'</td> <td style="width: 30%;"></td> </tr>';
                                                    $("#tbl_program > tbody").append(tb_prog2);

                                                    $.ajax({
                                                        type: "GET",
                                                        async:false,
                                                        url: urls + "get_sub_prog_level3/"+level1[i][0]+"/"+level2[o][0]+"/"+id_role+"/"+catrole+"/"+v_period+"/"+id_monper+"/"+tahun+"/"+isi_time,
                                                        success: function (data_level3) {
                    //                                        console.log(data_level2.content);
                                                            var level3 = data_level3.content;
                                                            if (level3 != '') {
                                                                for (p in level3) {
                                                                    if($("#fs").is(':checked')){
                                                                        var prog_3 = level1[i][3]+"."+level2[o][3]+"."+level3[p][13]+" "+level3[p][1];
                                                                    }else{
                                                                        var prog_3 = level1[i][3]+"."+level2[o][3]+"."+level3[p][13]+" "+level3[p][2];
                                                                    }
                                                                    if(v_period == '1'){
                                                                        var ket_input = '<input name="achievement1" id="submission[][achievement1]" type="text" value="'+level3[p][5]+'" class="input-block-level"><input name="achievement2" id="submission[][achievement2]" type="hidden" value="'+level3[p][6]+'" class="input-block-level"><input name="achievement3" id="submission[][achievement3]" type="hidden" value="'+level3[p][7]+'" class="input-block-level"><input name="achievement4" id="submission[][achievement4]" type="hidden" value="'+level3[p][8]+'" class="input-block-level">';
                                                                    }else if(v_period == '2'){
                                                                        var ket_input = '<input name="achievement1" id="submission[][achievement1]" type="hidden" value="'+level3[p][5]+'" class="input-block-level"><input name="achievement2" id="submission[][achievement2]" type="text" value="'+level3[p][6]+'" class="input-block-level"><input name="achievement3" id="submission[][achievement3]" type="hidden" value="'+level3[p][7]+'" class="input-block-level"><input name="achievement4" id="submission[][achievement4]" type="hidden" value="'+level3[p][8]+'" class="input-block-level">';
                                                                    }else if(v_period == '3'){
                                                                        var ket_input = '<input name="achievement1" id="submission[][achievement1]" type="hidden" value="'+level3[p][5]+'" class="input-block-level"><input name="achievement2" id="submission[][achievement2]" type="hidden" value="'+level3[p][6]+'" class="input-block-level"><input name="achievement3" id="submission[][achievement3]" type="text" value="'+level3[p][7]+'" class="input-block-level"><input name="achievement4" id="submission[][achievement4]" type="hidden" value="'+level3[p][8]+'" class="input-block-level">';
                                                                    }else if(v_period == '4'){
                                                                        var ket_input = '<input name="achievement1" id="submission[][achievement1]" type="hidden" value="'+level3[p][5]+'" class="input-block-level"><input name="achievement2" id="submission[][achievement2]" type="hidden" value="'+level3[p][6]+'" class="input-block-level"><input name="achievement3" id="submission[][achievement3]" type="hidden" value="'+level3[p][7]+'" class="input-block-level"><input name="achievement4" id="submission[][achievement4]" type="text" value="'+level3[p][8]+'" class="input-block-level">';
                                                                    }else{}
    //                                                                if(v_period == '1'){
    //                                                                    var ket_input = '<input name="submission[][achievement1]" id="submission[][achievement1]" type="text" value="'+level3[p][5]+'" class="input-block-level"><input name="submission[][achievement2]" id="submission[][achievement2]" type="hidden" value="'+level3[p][6]+'" class="input-block-level"><input name="submission[][achievement3]" id="submission[][achievement3]" type="hidden" value="'+level3[p][7]+'" class="input-block-level"><input name="submission[][achievement4]" id="submission[][achievement4]" type="hidden" value="'+level3[p][8]+'" class="input-block-level">';
    //                                                                }else if(v_period == '2'){
    //                                                                    var ket_input = '<input name="submission[][achievement1]" id="submission[][achievement1]" type="hidden" value="'+level3[p][5]+'" class="input-block-level"><input name="submission[][achievement2]" id="submission[][achievement2]" type="text" value="'+level3[p][6]+'" class="input-block-level"><input name="submission[][achievement3]" id="submission[][achievement3]" type="hidden" value="'+level3[p][7]+'" class="input-block-level"><input name="submission[][achievement4]" id="submission[][achievement4]" type="hidden" value="'+level3[p][8]+'" class="input-block-level">';
    //                                                                }else if(v_period == '3'){
    //                                                                    var ket_input = '<input name="submission[][achievement1]" id="submission[][achievement1]" type="hidden" value="'+level3[p][5]+'" class="input-block-level"><input name="submission[][achievement2]" id="submission[][achievement2]" type="hidden" value="'+level3[p][6]+'" class="input-block-level"><input name="submission[][achievement3]" id="submission[][achievement3]" type="text" value="'+level3[p][7]+'" class="input-block-level"><input name="submission[][achievement4]" id="submission[][achievement4]" type="hidden" value="'+level3[p][8]+'" class="input-block-level">';
    //                                                                }else if(v_period == '4'){
    //                                                                    var ket_input = '<input name="submission[][achievement1]" id="submission[][achievement1]" type="hidden" value="'+level3[p][5]+'" class="input-block-level"><input name="submission[][achievement2]" id="submission[][achievement2]" type="hidden" value="'+level3[p][6]+'" class="input-block-level"><input name="submission[][achievement3]" id="submission[][achievement3]" type="hidden" value="'+level3[p][7]+'" class="input-block-level"><input name="submission[][achievement4]" id="submission[][achievement4]" type="text" value="'+level3[p][8]+'" class="input-block-level">';
    //                                                                }else{}

                                                                    var tb_prog3 = '<tr> <td style="text-indent: 4em">'+prog_3+'</td> <td style="width: 30%;"><input name="id_indicator" id="id_indicator" type="hidden" value="'+level3[p][0]+'" class="input-block-level"><input name="id_entry" id="id_entry" type="hidden" value="'+level3[p][4]+'" class="input-block-level">'+ket_input+' '+level3[p][3]+'</td> </tr>';
                                                                    $("#tbl_program > tbody").append(tb_prog3);



                                                                }
                                                            }
                                                        }
                                                    });

                                                }
                                            }
                                        }
                                    });

                                }
                            }
                        }
                    });
                }
            }
            
            function grid_modal_budget(){
                var id_role     = $("#id_role").val();
                var catrole     = $("#catrole").val();
                var v_dataid    = $("#periode").val();
                var v_data_id   = v_dataid.split("###");;
                var id_monper   = v_data_id[0];
                var tahun       = v_data_id[1];
                var v_period    = $("#period").val();
                var d_time      = $("#time_activity").val();
                if(d_time == ''){
                    var isi_time = '777777';
//                                console.log('kosong')
                }else{
                    var isi_time = d_time;
//                                console.log('isi '+d_time)
                }
                
                var v_pil_prog  = $("#pil_prog").val();
                var dt ="";
                if(catrole == 'Government'){
                    var type    = 'entry_gov_indicator';
                    var type_b  = 'entry_gov_budget';
                    var tb      = 'gov_activity';
                    var tb2     = 'gov_indicator';
                }else if(catrole == 'NSA'){
                    var type    = 'entry_nsa_indicator';
                    var type_b  = 'entry_nsa_budget';
                    var tb      = 'nsa_activity';
                    var tb2     = 'nsa_indicator';
                }else if(catrole == 'Corporation'){
                    var type    = 'entry_usaha_indicator';
                    var type_b  = 'entry_usaha_budget';
                    var tb      = 'usaha_activity';
                    var tb2     = 'usaha_indicator';
                }else{}
                if(v_pil_prog == 'indicator'){
                    var link2 = urls+'get-cek-data-all/'+id_role+'/'+tahun+'/'+v_period+'/'+type+'/'+tb+'/'+tb2+'/'+isi_time+'/'+id_monper;
                }else{
                    var link2 = urls+'get-cek-data-all-budget/'+id_role+'/'+tahun+'/'+v_period+'/'+type_b+'/'+tb+'/'+tb2+'/'+isi_time+'/'+id_monper;
                }
                $.ajax({
                    type: "GET",
                    async:false,
                    url: link2,
                    success: function (result3) {
                        dt = result3.content[0];
                    }
                });
                
                if(dt[0] == null){
                    var ketdt = '0';
                }else{
                    var ketdt = dt[0];
                }
                
                if(dt[1] == null){
                    var ketdt1 = '0';
                }else{
                    var ketdt1 = dt[1];
                }
                
                if(ketdt1 == '0'){
                    $("#tbl_program > tbody").html("");
                }else if(ketdt == '0'){
                    $("#tbl_program > tbody").html("");
                }else{
                    $("#tbl_program > tbody").html("");
                    $.ajax({
                        type: "GET",
                        async:false,
                        url: urls + "get_sub_prog_level1/"+id_monper+"/"+id_role+"/"+catrole,
                        success: function (data_level1) {
                            console.log(data_level1.content);
                            var level1 = data_level1.content;
                            if (level1 != '') {
                                for (i in level1) {
                                    if($("#fs").is(':checked')){
                                        var prog_1 = level1[i][3]+" "+level1[i][1];
                                    }else{
                                        var prog_1 = level1[i][3]+" "+level1[i][2];
                                    }
                                    var tb_prog = '<tr> <td ><b>'+prog_1+'</b></td> <td style="width: 30%;"></td> </tr>';
                                    $("#tbl_program > tbody").append(tb_prog);

                                    $.ajax({
                                        type: "GET",
                                        async:false,
                                        url: urls + "get_sub_prog_level2_budget/"+level1[i][0]+"/"+id_role+"/"+catrole+"/"+v_period+"/"+id_monper+"/"+tahun+"/"+isi_time,
                                        success: function (data_level2) {
    //                                        console.log(data_level2.content);
                                            var level2 = data_level2.content;
                                            if (level2 != '') {
                                                for (o in level2) {
                                                    if($("#fs").is(':checked')){
                                                        var prog_2 = level1[i][3]+"."+level2[o][13]+" "+level2[o][1];
                                                    }else{
                                                        var prog_2 = level1[i][3]+"."+level2[o][13]+" "+level2[o][2];
                                                    }
                                                    if(v_period == '1'){
                                                        var ket_input = '<input name="achievement1" id="submission[][achievement1]" type="text" value="'+level2[o][5]+'" class="input-block-level"><input name="achievement2" id="submission[][achievement2]" type="hidden" value="'+level2[o][6]+'" class="input-block-level"><input name="achievement3" id="submission[][achievement3]" type="hidden" value="'+level2[o][7]+'" class="input-block-level"><input name="achievement4" id="submission[][achievement4]" type="hidden" value="'+level2[o][8]+'" class="input-block-level">';
                                                    }else if(v_period == '2'){
                                                        var ket_input = '<input name="achievement1" id="submission[][achievement1]" type="hidden" value="'+level2[o][5]+'" class="input-block-level"><input name="achievement2" id="submission[][achievement2]" type="text" value="'+level2[o][6]+'" class="input-block-level"><input name="achievement3" id="submission[][achievement3]" type="hidden" value="'+level2[o][7]+'" class="input-block-level"><input name="achievement4" id="submission[][achievement4]" type="hidden" value="'+level2[o][8]+'" class="input-block-level">';
                                                    }else if(v_period == '3'){
                                                        var ket_input = '<input name="achievement1" id="submission[][achievement1]" type="hidden" value="'+level2[o][5]+'" class="input-block-level"><input name="achievement2" id="submission[][achievement2]" type="hidden" value="'+level2[o][6]+'" class="input-block-level"><input name="achievement3" id="submission[][achievement3]" type="text" value="'+level2[o][7]+'" class="input-block-level"><input name="achievement4" id="submission[][achievement4]" type="hidden" value="'+level2[o][8]+'" class="input-block-level">';
                                                    }else if(v_period == '4'){
                                                        var ket_input = '<input name="achievement1" id="submission[][achievement1]" type="hidden" value="'+level2[o][5]+'" class="input-block-level"><input name="achievement2" id="submission[][achievement2]" type="hidden" value="'+level2[o][6]+'" class="input-block-level"><input name="achievement3" id="submission[][achievement3]" type="hidden" value="'+level2[o][7]+'" class="input-block-level"><input name="achievement4" id="submission[][achievement4]" type="text" value="'+level2[o][8]+'" class="input-block-level">';
                                                    }else{}
                                                    var tb_prog2 = '<tr> <td style="text-indent: 2em">'+prog_2+'</td> <td style="width: 30%;"><input name="id_indicator" id="id_indicator" type="hidden" value="'+level2[o][0]+'" class="input-block-level"><input name="id_entry" id="id_entry" type="hidden" value="'+level2[o][4]+'" class="input-block-level">'+ket_input+' '+level2[o][3]+'</td> </tr>';
                                                    $("#tbl_program > tbody").append(tb_prog2);


                                                }
                                            }
                                        }
                                    });

                                }
                            }
                        }
                    });
                }
                
            }
            
            //modal nilai
            //modal
            $('#tabel-entri-sdg').on('click', ".id_role_nilai", function(e){
                var id_role     = $(this).data("id_role");
                var catrole     = $(this).data("catrole");
                $("#catrole1").val(catrole);
                $("#id_role1").val(id_role);
                var v_pil_prog  = $("#pil_prog").val();
                //budget indicator
                if(v_pil_prog == 'indicator'){
                    grid_modal_nilai();
                }else{
                    grid_modal_nilai_budget();
                }
                
                $('.addModal_nilai').modal("show");
            });
            
            //grid modal
            function grid_modal_nilai(){
                var id_role     = $("#id_role1").val();
                var catrole     = $("#catrole1").val();
                var v_dataid    = $("#periode").val();
                var v_data_id   = v_dataid.split("###");;
                var id_monper   = v_data_id[0];
                var tahun       = v_data_id[1];
                var v_period    = $("#period").val();
                var d_time      = $("#time_activity").val();
                if(d_time == ''){
                    var isi_time = '777777';
//                                console.log('kosong')
                }else{
                    var isi_time = d_time;
//                                console.log('isi '+d_time)
                }
                
                var v_pil_prog  = $("#pil_prog").val();
                var dt ="";
                if(catrole == 'Government'){
                    var type    = 'entry_gov_indicator';
                    var type_b  = 'entry_gov_budget';
                    var tb      = 'gov_activity';
                    var tb2     = 'gov_indicator';
                }else if(catrole == 'NSA'){
                    var type    = 'entry_nsa_indicator';
                    var type_b  = 'entry_nsa_budget';
                    var tb      = 'nsa_activity';
                    var tb2     = 'nsa_indicator';
                }else if(catrole == 'Corporation'){
                    var type    = 'entry_usaha_indicator';
                    var type_b  = 'entry_usaha_budget';
                    var tb      = 'usaha_activity';
                    var tb2     = 'usaha_indicator';
                }else{}
                if(v_pil_prog == 'indicator'){
                    var link2 = urls+'get-cek-data-all/'+id_role+'/'+tahun+'/'+v_period+'/'+type+'/'+tb+'/'+tb2+'/'+isi_time+'/'+id_monper;
                }else{
                    var link2 = urls+'get-cek-data-all-budget/'+id_role+'/'+tahun+'/'+v_period+'/'+type_b+'/'+tb+'/'+tb2+'/'+isi_time+'/'+id_monper;
                }
                $.ajax({
                    type: "GET",
                    async:false,
                    url: link2,
                    success: function (result3) {
                        dt = result3.content[0];
                    }
                });
                
                if(dt[0] == null){
                    var ketdt = '0';
                }else{
                    var ketdt = dt[0];
                }
                
                if(dt[1] == null){
                    var ketdt1 = '0';
                }else{
                    var ketdt1 = dt[1];
                }
                
                if(ketdt1 == '0'){
                    $("#tbl_program_nilai > tbody").html("");
                }else if(ketdt == '0'){
                    $("#tbl_program_nilai > tbody").html("");
                }else{
                    $("#tbl_program_nilai > tbody").html("");
                    $.ajax({
                        type: "GET",
                        async:false,
                        url: urls + "get_sub_prog_level1/"+id_monper+"/"+id_role+"/"+catrole,
                        success: function (data_level1) {
                            console.log(data_level1.content);
                            var level1 = data_level1.content;
                            if (level1 != '') {
                                for (i in level1) {
                                    if($("#fs").is(':checked')){
                                        var prog_1 = level1[i][3]+" "+level1[i][1];
                                    }else{
                                        var prog_1 = level1[i][3]+" "+level1[i][2];
                                    }
                                    var tb_prog = '<tr> <td ><b>'+prog_1+'</b></td> <td style="width: 30%;"></td> </tr>';
                                    $("#tbl_program_nilai > tbody").append(tb_prog);

                                    $.ajax({
                                        type: "GET",
                                        async:false,
                                        url: urls + "get_sub_prog_level2/"+level1[i][0]+"/"+id_role+"/"+catrole,
                                        success: function (data_level2) {
    //                                        console.log(data_level2.content);
                                            var level2 = data_level2.content;
                                            if (level2 != '') {
                                                for (o in level2) {
                                                    if($("#fs").is(':checked')){
                                                        var prog_2 = level1[i][3]+"."+level2[o][3]+" "+level2[o][1];
                                                    }else{
                                                        var prog_2 = level1[i][3]+"."+level2[o][3]+" "+level2[o][2];
                                                    }
                                                    var tb_prog2 = '<tr> <td style="text-indent: 2em">'+prog_2+'</td> <td style="width: 30%;"></td> </tr>';
                                                    $("#tbl_program_nilai > tbody").append(tb_prog2);

                                                    $.ajax({
                                                        type: "GET",
                                                        async:false,
                                                        url: urls + "get_sub_prog_level3/"+level1[i][0]+"/"+level2[o][0]+"/"+id_role+"/"+catrole+"/"+v_period+"/"+id_monper+"/"+tahun+"/"+isi_time,
                                                        success: function (data_level3) {
                    //                                        console.log(data_level2.content);
                                                            var level3 = data_level3.content;
                                                            if (level3 != '') {
                                                                for (p in level3) {
                                                                    if($("#fs").is(':checked')){
                                                                        var prog_3 = level1[i][3]+"."+level2[o][3]+"."+level3[p][13]+" "+level3[p][1];
                                                                    }else{
                                                                        var prog_3 = level1[i][3]+"."+level2[o][3]+"."+level3[p][13]+" "+level3[p][2];
                                                                    }
                                                                    if(v_period == '1'){
                                                                        var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="text" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                        if(level3[p][5] == '0'){
                                                                            var warna = 'style="background-color: #ffa5a5"';
                                                                        }else{
                                                                            var warna = '';
                                                                        }
                                                                    }else if(v_period == '2'){
                                                                        var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="text" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                        if(level3[p][6] == '0'){
                                                                            var warna = 'style="background-color: #ffa5a5"';
                                                                        }else{
                                                                            var warna = '';
                                                                        }
                                                                    }else if(v_period == '3'){
                                                                        if(level3[p][7] == '0'){
                                                                            var warna = 'style="background-color: #ffa5a5"';
                                                                        }else{
                                                                            var warna = '';
                                                                        }
                                                                        var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="text" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                    }else if(v_period == '4'){
                                                                        if(level3[p][8] == '0'){
                                                                            var warna = 'style="background-color: #ffa5a5"';
                                                                        }else{
                                                                            var warna = '';
                                                                        }
                                                                        var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="text" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                    }else{}
    //                                                                if(v_period == '1'){
    //                                                                    var ket_input = '<input name="submission[][achievement1]" id="submission[][achievement1]" type="text" value="'+level3[p][5]+'" class="input-block-level"><input name="submission[][achievement2]" id="submission[][achievement2]" type="hidden" value="'+level3[p][6]+'" class="input-block-level"><input name="submission[][achievement3]" id="submission[][achievement3]" type="hidden" value="'+level3[p][7]+'" class="input-block-level"><input name="submission[][achievement4]" id="submission[][achievement4]" type="hidden" value="'+level3[p][8]+'" class="input-block-level">';
    //                                                                }else if(v_period == '2'){
    //                                                                    var ket_input = '<input name="submission[][achievement1]" id="submission[][achievement1]" type="hidden" value="'+level3[p][5]+'" class="input-block-level"><input name="submission[][achievement2]" id="submission[][achievement2]" type="text" value="'+level3[p][6]+'" class="input-block-level"><input name="submission[][achievement3]" id="submission[][achievement3]" type="hidden" value="'+level3[p][7]+'" class="input-block-level"><input name="submission[][achievement4]" id="submission[][achievement4]" type="hidden" value="'+level3[p][8]+'" class="input-block-level">';
    //                                                                }else if(v_period == '3'){
    //                                                                    var ket_input = '<input name="submission[][achievement1]" id="submission[][achievement1]" type="hidden" value="'+level3[p][5]+'" class="input-block-level"><input name="submission[][achievement2]" id="submission[][achievement2]" type="hidden" value="'+level3[p][6]+'" class="input-block-level"><input name="submission[][achievement3]" id="submission[][achievement3]" type="text" value="'+level3[p][7]+'" class="input-block-level"><input name="submission[][achievement4]" id="submission[][achievement4]" type="hidden" value="'+level3[p][8]+'" class="input-block-level">';
    //                                                                }else if(v_period == '4'){
    //                                                                    var ket_input = '<input name="submission[][achievement1]" id="submission[][achievement1]" type="hidden" value="'+level3[p][5]+'" class="input-block-level"><input name="submission[][achievement2]" id="submission[][achievement2]" type="hidden" value="'+level3[p][6]+'" class="input-block-level"><input name="submission[][achievement3]" id="submission[][achievement3]" type="hidden" value="'+level3[p][7]+'" class="input-block-level"><input name="submission[][achievement4]" id="submission[][achievement4]" type="text" value="'+level3[p][8]+'" class="input-block-level">';
    //                                                                }else{}

                                                                    var tb_prog3 = '<tr '+warna+'> <td style="text-indent: 4em">'+prog_3+'</td> <td style="width: 30%;"><input name="id_indicator11" id="id_indicator11" type="hidden" value="'+level3[p][0]+'" class="input-block-level"><input name="id_entry11" id="id_entry11" type="hidden" value="'+level3[p][4]+'" class="input-block-level">'+ket_input+' '+level3[p][3]+'</td> </tr>';
                                                                    $("#tbl_program_nilai > tbody").append(tb_prog3);



                                                                }
                                                            }
                                                        }
                                                    });

                                                }
                                            }
                                        }
                                    });

                                }
                            }
                        }
                    });
                }
            }
            
            function grid_modal_nilai_budget(){
                var id_role     = $("#id_role1").val();
                var catrole     = $("#catrole1").val();
                var v_dataid    = $("#periode").val();
                var v_data_id   = v_dataid.split("###");;
                var id_monper   = v_data_id[0];
                var tahun       = v_data_id[1];
                var v_period    = $("#period").val();
                var d_time      = $("#time_activity").val();
                if(d_time == ''){
                    var isi_time = '777777';
//                                console.log('kosong')
                }else{
                    var isi_time = d_time;
//                                console.log('isi '+d_time)
                }
                
                var v_pil_prog  = $("#pil_prog").val();
                var dt ="";
                if(catrole == 'Government'){
                    var type    = 'entry_gov_indicator';
                    var type_b  = 'entry_gov_budget';
                    var tb      = 'gov_activity';
                    var tb2     = 'gov_indicator';
                }else if(catrole == 'NSA'){
                    var type    = 'entry_nsa_indicator';
                    var type_b  = 'entry_nsa_budget';
                    var tb      = 'nsa_activity';
                    var tb2     = 'nsa_indicator';
                }else if(catrole == 'Corporation'){
                    var type    = 'entry_usaha_indicator';
                    var type_b  = 'entry_usaha_budget';
                    var tb      = 'usaha_activity';
                    var tb2     = 'usaha_indicator';
                }else{}
                if(v_pil_prog == 'indicator'){
                    var link2 = urls+'get-cek-data-all/'+id_role+'/'+tahun+'/'+v_period+'/'+type+'/'+tb+'/'+tb2+'/'+isi_time+'/'+id_monper;
                }else{
                    var link2 = urls+'get-cek-data-all-budget/'+id_role+'/'+tahun+'/'+v_period+'/'+type_b+'/'+tb+'/'+tb2+'/'+isi_time+'/'+id_monper;
                }
                $.ajax({
                    type: "GET",
                    async:false,
                    url: link2,
                    success: function (result3) {
                        dt = result3.content[0];
                    }
                });
                
                if(dt[0] == null){
                    var ketdt = '0';
                }else{
                    var ketdt = dt[0];
                }
                
                if(dt[1] == null){
                    var ketdt1 = '0';
                }else{
                    var ketdt1 = dt[1];
                }
                
                if(ketdt1 == '0'){
                    $("#tbl_program_nilai > tbody").html("");
                }else if(ketdt == '0'){
                    $("#tbl_program_nilai > tbody").html("");
                }else{
                    $("#tbl_program_nilai > tbody").html("");
                    $.ajax({
                        type: "GET",
                        async:false,
                        url: urls + "get_sub_prog_level1/"+id_monper+"/"+id_role+"/"+catrole,
                        success: function (data_level1) {
                            console.log(data_level1.content);
                            var level1 = data_level1.content;
                            if (level1 != '') {
                                for (i in level1) {
                                    if($("#fs").is(':checked')){
                                        var prog_1 = level1[i][3]+" "+level1[i][1];
                                    }else{
                                        var prog_1 = level1[i][3]+" "+level1[i][2];
                                    }
                                    var tb_prog = '<tr> <td ><b>'+prog_1+'</b></td> <td style="width: 30%;"></td> </tr>';
                                    $("#tbl_program_nilai > tbody").append(tb_prog);

                                    $.ajax({
                                        type: "GET",
                                        async:false,
                                        url: urls + "get_sub_prog_level2_budget/"+level1[i][0]+"/"+id_role+"/"+catrole+"/"+v_period+"/"+id_monper+"/"+tahun+"/"+isi_time,
                                        success: function (data_level2) {
    //                                        console.log(data_level2.content);
                                            var level2 = data_level2.content;
                                            if (level2 != '') {
                                                for (o in level2) {
                                                    if($("#fs").is(':checked')){
                                                        var prog_2 = level1[i][3]+"."+level2[o][13]+" "+level2[o][1];
                                                    }else{
                                                        var prog_2 = level1[i][3]+"."+level2[o][13]+" "+level2[o][2];
                                                    }
                                                    if(v_period == '1'){
                                                        if(level2[o][5] == '0'){
                                                            var warna = 'style="background-color: #ffa5a5"';
                                                        }else{
                                                            var warna = '';
                                                        }
                                                        var ket_input = '<input name="achievement1" id="submission[][achievement1]" type="text" value="'+level2[o][5]+'" class="input-block-level" readonly><input name="achievement2" id="submission[][achievement2]" type="hidden" value="'+level2[o][6]+'" class="input-block-level" readonly><input name="achievement3" id="submission[][achievement3]" type="hidden" value="'+level2[o][7]+'" class="input-block-level" readonly><input name="achievement4" id="submission[][achievement4]" type="hidden" value="'+level2[o][8]+'" class="input-block-level" readonly>';
                                                    }else if(v_period == '2'){
                                                        if(level2[o][5] == '0'){
                                                            var warna = 'style="background-color: #ffa5a5"';
                                                        }else{
                                                            var warna = '';
                                                        }
                                                        var ket_input = '<input name="achievement1" id="submission[][achievement1]" type="hidden" value="'+level2[o][5]+'" class="input-block-level" readonly><input name="achievement2" id="submission[][achievement2]" type="text" value="'+level2[o][6]+'" class="input-block-level" readonly><input name="achievement3" id="submission[][achievement3]" type="hidden" value="'+level2[o][7]+'" class="input-block-level" readonly><input name="achievement4" id="submission[][achievement4]" type="hidden" value="'+level2[o][8]+'" class="input-block-level" readonly>';
                                                    }else if(v_period == '3'){
                                                        if(level2[o][5] == '0'){
                                                            var warna = 'style="background-color: #ffa5a5"';
                                                        }else{
                                                            var warna = '';
                                                        }
                                                        var ket_input = '<input name="achievement1" id="submission[][achievement1]" type="hidden" value="'+level2[o][5]+'" class="input-block-level" readonly><input name="achievement2" id="submission[][achievement2]" type="hidden" value="'+level2[o][6]+'" class="input-block-level" readonly><input name="achievement3" id="submission[][achievement3]" type="text" value="'+level2[o][7]+'" class="input-block-level" readonly><input name="achievement4" id="submission[][achievement4]" type="hidden" value="'+level2[o][8]+'" class="input-block-level" readonly>';
                                                    }else if(v_period == '4'){
                                                        if(level2[o][5] == '0'){
                                                            var warna = 'style="background-color: #ffa5a5"';
                                                        }else{
                                                            var warna = '';
                                                        }
                                                        var ket_input = '<input name="achievement1" id="submission[][achievement1]" type="hidden" value="'+level2[o][5]+'" class="input-block-level" readonly><input name="achievement2" id="submission[][achievement2]" type="hidden" value="'+level2[o][6]+'" class="input-block-level" readonly><input name="achievement3" id="submission[][achievement3]" type="hidden" value="'+level2[o][7]+'" class="input-block-level" readonly><input name="achievement4" id="submission[][achievement4]" type="text" value="'+level2[o][8]+'" class="input-block-level" readonly>';
                                                    }else{}
                                                    var tb_prog2 = '<tr '+warna+'> <td style="text-indent: 2em">'+prog_2+'</td> <td style="width: 30%;"><input name="id_indicator" id="id_indicator" type="hidden" value="'+level2[o][0]+'" class="input-block-level"><input name="id_entry" id="id_entry" type="hidden" value="'+level2[o][4]+'" class="input-block-level">'+ket_input+' '+level2[o][3]+'</td> </tr>';
                                                    $("#tbl_program_nilai > tbody").append(tb_prog2);


                                                }
                                            }
                                        }
                                    });

                                }
                            }
                        }
                    });
                }
            }
            
            //modal date
            //modal
            $('#tabel-entri-sdg').on('click', ".id_role_date", function(e){
                var id_role     = $(this).data("id_role");
                var catrole     = $(this).data("catrole");
                $("#catrole2").val(catrole);
                $("#id_role2").val(id_role);
                var v_pil_prog  = $("#pil_prog").val();
                //budget indicator
                if(v_pil_prog == 'indicator'){
                    grid_modal_date();
                }else{
                    grid_modal_date_budget();
                }
                
                $('.addModal_date').modal("show");
            });
            
            //grid modal
            function grid_modal_date(){
                var id_role     = $("#id_role2").val();
                var catrole     = $("#catrole2").val();
                var v_dataid    = $("#periode").val();
                var v_data_id   = v_dataid.split("###");;
                var id_monper   = v_data_id[0];
                var tahun       = v_data_id[1];
                var v_period    = $("#period").val();
                var d_time      = $("#time_activity").val();
                if(d_time == ''){
                    var isi_time = '777777';
//                                console.log('kosong')
                }else{
                    var isi_time = d_time;
//                                console.log('isi '+d_time)
                }
                
                var v_pil_prog  = $("#pil_prog").val();
                var dt ="";
                if(catrole == 'Government'){
                    var type    = 'entry_gov_indicator';
                    var type_b  = 'entry_gov_budget';
                    var tb      = 'gov_activity';
                    var tb2     = 'gov_indicator';
                }else if(catrole == 'NSA'){
                    var type    = 'entry_nsa_indicator';
                    var type_b  = 'entry_nsa_budget';
                    var tb      = 'nsa_activity';
                    var tb2     = 'nsa_indicator';
                }else if(catrole == 'Corporation'){
                    var type    = 'entry_usaha_indicator';
                    var type_b  = 'entry_usaha_budget';
                    var tb      = 'usaha_activity';
                    var tb2     = 'usaha_indicator';
                }else{}
                if(v_pil_prog == 'indicator'){
                    var link2 = urls+'get-cek-data-all/'+id_role+'/'+tahun+'/'+v_period+'/'+type+'/'+tb+'/'+tb2+'/'+isi_time+'/'+id_monper;
                }else{
                    var link2 = urls+'get-cek-data-all-budget/'+id_role+'/'+tahun+'/'+v_period+'/'+type_b+'/'+tb+'/'+tb2+'/'+isi_time+'/'+id_monper;
                }
                $.ajax({
                    type: "GET",
                    async:false,
                    url: link2,
                    success: function (result3) {
                        dt = result3.content[0];
                    }
                });
                
                if(dt[0] == null){
                    var ketdt = '0';
                }else{
                    var ketdt = dt[0];
                }
                
                if(dt[1] == null){
                    var ketdt1 = '0';
                }else{
                    var ketdt1 = dt[1];
                }
                
                if(ketdt1 == '0'){
                    $("#tbl_program_date > tbody").html("");
                }else if(ketdt == '0'){
                    $("#tbl_program_date > tbody").html("");
                }else{
                    $("#tbl_program_date > tbody").html("");
                    $.ajax({
                        type: "GET",
                        async:false,
                        url: urls + "get_sub_prog_level1/"+id_monper+"/"+id_role+"/"+catrole,
                        success: function (data_level1) {
                            console.log(data_level1.content);
                            var level1 = data_level1.content;
                            if (level1 != '') {
                                for (i in level1) {
                                    if($("#fs").is(':checked')){
                                        var prog_1 = level1[i][3]+" "+level1[i][1];
                                    }else{
                                        var prog_1 = level1[i][3]+" "+level1[i][2];
                                    }
                                    var tb_prog = '<tr> <td ><b>'+prog_1+'</b></td> <td style="width: 30%;"></td> </tr>';
                                    $("#tbl_program_date > tbody").append(tb_prog);

                                    $.ajax({
                                        type: "GET",
                                        async:false,
                                        url: urls + "get_sub_prog_level2/"+level1[i][0]+"/"+id_role+"/"+catrole,
                                        success: function (data_level2) {
    //                                        console.log(data_level2.content);
                                            var level2 = data_level2.content;
                                            if (level2 != '') {
                                                for (o in level2) {
                                                    if($("#fs").is(':checked')){
                                                        var prog_2 = level1[i][3]+"."+level2[o][3]+" "+level2[o][1];
                                                    }else{
                                                        var prog_2 = level1[i][3]+"."+level2[o][3]+" "+level2[o][2];
                                                    }
                                                    var tb_prog2 = '<tr> <td style="text-indent: 2em">'+prog_2+'</td> <td style="width: 30%;"></td> </tr>';
                                                    $("#tbl_program_date > tbody").append(tb_prog2);

                                                    $.ajax({
                                                        type: "GET",
                                                        async:false,
                                                        url: urls + "get_sub_prog_level3/"+level1[i][0]+"/"+level2[o][0]+"/"+id_role+"/"+catrole+"/"+v_period+"/"+id_monper+"/"+tahun+"/"+isi_time,
                                                        success: function (data_level3) {
                    //                                        console.log(data_level2.content);
                                                            var level3 = data_level3.content;
                                                            var sts;
                                                            if (level3 != '') {
                                                                for (p in level3) {
                                                                    if($("#fs").is(':checked')){
                                                                        var prog_3 = level1[i][3]+"."+level2[o][3]+"."+level3[p][13]+" "+level3[p][1];
                                                                    }else{
                                                                        var prog_3 = level1[i][3]+"."+level2[o][3]+"."+level3[p][13]+" "+level3[p][2];
                                                                    }
                                                                    if(catrole == 'Government'){
                                                                        $.ajax({
                                                                            type: "GET",
                                                                            async:false,
                                                                            url: urls+'list-get-sts-monper-gov_act/'+id_monper,
                                                                            success: function (resultmonper) {
                                                                                sts = resultmonper.content;
                                                                            }
                                                                        });
                                                                        if(sts == 'yearly'){
                                                                            if(v_period == '1'){
                                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="text" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                                if(level3[p][9] <= (tahun+1)+'-01-15'){
                                                                                    var warna = '';
                                                                                }else{
                                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                                }
                                                                            }else{}
                                                                        }else if(sts == 'semesterly'){
                                                                            if(v_period == '1'){
                                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="text" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                                if(level3[p][9] <= tahun+'-07-15'){
                                                                                    var warna = '';
                                                                                }else{
                                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                                }
                                                                            }else if(v_period == '2'){
                                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="text" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                                if(level3[p][10] <= (tahun+1)+'-01-15'){
                                                                                    var warna = '';
                                                                                }else{
                                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                                }
                                                                            }else{}

                                                                        }else if(sts == 'quarterly'){
                                                                            if(v_period == '1'){
                                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="text" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                                if(level3[p][9] <= tahun+'-04-15'){
                                                                                    var warna = '';
                                                                                }else{
                                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                                }
                                                                            }else if(v_period == '2'){
                                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="text" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                                if(level3[p][10] <= tahun+'-07-15'){
                                                                                    var warna = '';
                                                                                }else{
                                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                                }
                                                                            }else if(v_period == '3'){
                                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="text" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                                if(level3[p][11] <= tahun+'-10-15'){
                                                                                    var warna = '';
                                                                                }else{
                                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                                }
                                                                            }else if(v_period == '4'){
                                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="text" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                                if(level3[p][12] <= (tahun+1)+'-01-15'){
                                                                                    var warna = '';
                                                                                }else{
                                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                                }
                                                                            }else{}
                                                                        }else{}

                                                                    }else if(catrole == 'NSA'){
                                                                        $.ajax({
                                                                            type: "GET",
                                                                            async:false,
                                                                            url: urls+'list-get-sts-monper-nongov_act/'+id_monper,
                                                                            success: function (resultmonper) {
                                                                                sts = resultmonper.content;
                                                                            }
                                                                        });
                                                                        if(sts == 'yearly'){
                                                                            if(v_period == '1'){
                                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="text" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                                if(level3[p][9] <= (tahun+1)+'-01-15'){
                                                                                    var warna = '';
                                                                                }else{
                                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                                }
                                                                            }else{}
                                                                        }else if(sts == 'semesterly'){
                                                                            if(v_period == '1'){
                                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="text" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                                if(level3[p][9] <= tahun+'-07-15'){
                                                                                    var warna = '';
                                                                                }else{
                                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                                }
                                                                            }else if(v_period == '2'){
                                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="text" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                                if(level3[p][10] <= (tahun+1)+'-01-15'){
                                                                                    var warna = '';
                                                                                }else{
                                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                                }
                                                                            }else{}

                                                                        }else if(sts == 'quarterly'){
                                                                            if(v_period == '1'){
                                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="text" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                                if(level3[p][9] <= tahun+'-04-15'){
                                                                                    var warna = '';
                                                                                }else{
                                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                                }
                                                                            }else if(v_period == '2'){
                                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="text" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                                if(level3[p][10] <= tahun+'-07-15'){
                                                                                    var warna = '';
                                                                                }else{
                                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                                }
                                                                            }else if(v_period == '3'){
                                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="text" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                                if(level3[p][11] <= tahun+'-10-15'){
                                                                                    var warna = '';
                                                                                }else{
                                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                                }
                                                                            }else if(v_period == '4'){
                                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="text" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                                if(level3[p][12] <= (tahun+1)+'-01-15'){
                                                                                    var warna = '';
                                                                                }else{
                                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                                }
                                                                            }else{}
                                                                        }else{}

                                                                    }else if(catrole == 'Corporation'){
                                                                        $.ajax({
                                                                            type: "GET",
                                                                            async:false,
                                                                            url: urls+'list-get-sts-monper-corporation_act/'+id_monper,
                                                                            success: function (resultmonper) {
                                                                                sts = resultmonper.content;
                                                                            }
                                                                        });
                                                                        if(sts == 'yearly'){
                                                                            if(v_period == '1'){
                                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="text" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                                if(level3[p][9] <= (tahun+1)+'-01-15'){
                                                                                    var warna = '';
                                                                                }else{
                                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                                }
                                                                            }else{}
                                                                        }else if(sts == 'semesterly'){
                                                                            if(v_period == '1'){
                                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="text" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                                if(level3[p][9] <= tahun+'-07-15'){
                                                                                    var warna = '';
                                                                                }else{
                                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                                }
                                                                            }else if(v_period == '2'){
                                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="text" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                                if(level3[p][10] <= (tahun+1)+'-01-15'){
                                                                                    var warna = '';
                                                                                }else{
                                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                                }
                                                                            }else{}

                                                                        }else if(sts == 'quarterly'){
                                                                            if(v_period == '1'){
                                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="text" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                                if(level3[p][9] <= tahun+'-04-15'){
                                                                                    var warna = '';
                                                                                }else{
                                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                                }
                                                                            }else if(v_period == '2'){
                                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="text" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                                if(level3[p][10] <= tahun+'-07-15'){
                                                                                    var warna = '';
                                                                                }else{
                                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                                }
                                                                            }else if(v_period == '3'){
                                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="text" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                                if(level3[p][11] <= tahun+'-10-15'){
                                                                                    var warna = '';
                                                                                }else{
                                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                                }
                                                                            }else if(v_period == '4'){
                                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="text" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                                if(level3[p][12] <= (tahun+1)+'-01-15'){
                                                                                    var warna = '';
                                                                                }else{
                                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                                }
                                                                            }else{}
                                                                        }else{}

                                                                    }else{}


                                                                    var tb_prog3 = '<tr '+warna+'> <td style="text-indent: 4em">'+prog_3+'</td> <td style="width: 30%;"><input name="id_indicator11" id="id_indicator11" type="hidden" value="'+level3[p][0]+'" class="input-block-level"><input name="id_entry11" id="id_entry11" type="hidden" value="'+level3[p][4]+'" class="input-block-level">'+ket_input+' '+level3[p][3]+'</td> </tr>';
                                                                    $("#tbl_program_date > tbody").append(tb_prog3);



                                                                }
                                                            }
                                                        }
                                                    });

                                                }
                                            }
                                        }
                                    });

                                }
                            }
                        }
                    });
                }
            }
            
            function grid_modal_date_budget(){
                var id_role     = $("#id_role2").val();
                var catrole     = $("#catrole2").val();
                var v_dataid    = $("#periode").val();
                var v_data_id   = v_dataid.split("###");;
                var id_monper   = v_data_id[0];
                var tahun       = v_data_id[1];
                var v_period    = $("#period").val();
                var d_time      = $("#time_activity").val();
                if(d_time == ''){
                    var isi_time = '777777';
//                                console.log('kosong')
                }else{
                    var isi_time = d_time;
//                                console.log('isi '+d_time)
                }
                
                var v_pil_prog  = $("#pil_prog").val();
                var dt ="";
                if(catrole == 'Government'){
                    var type    = 'entry_gov_indicator';
                    var type_b  = 'entry_gov_budget';
                    var tb      = 'gov_activity';
                    var tb2     = 'gov_indicator';
                }else if(catrole == 'NSA'){
                    var type    = 'entry_nsa_indicator';
                    var type_b  = 'entry_nsa_budget';
                    var tb      = 'nsa_activity';
                    var tb2     = 'nsa_indicator';
                }else if(catrole == 'Corporation'){
                    var type    = 'entry_usaha_indicator';
                    var type_b  = 'entry_usaha_budget';
                    var tb      = 'usaha_activity';
                    var tb2     = 'usaha_indicator';
                }else{}
                if(v_pil_prog == 'indicator'){
                    var link2 = urls+'get-cek-data-all/'+id_role+'/'+tahun+'/'+v_period+'/'+type+'/'+tb+'/'+tb2+'/'+isi_time+'/'+id_monper;
                }else{
                    var link2 = urls+'get-cek-data-all-budget/'+id_role+'/'+tahun+'/'+v_period+'/'+type_b+'/'+tb+'/'+tb2+'/'+isi_time+'/'+id_monper;
                }
                $.ajax({
                    type: "GET",
                    async:false,
                    url: link2,
                    success: function (result3) {
                        dt = result3.content[0];
                    }
                });
                
                if(dt[0] == null){
                    var ketdt = '0';
                }else{
                    var ketdt = dt[0];
                }
                
                if(dt[1] == null){
                    var ketdt1 = '0';
                }else{
                    var ketdt1 = dt[1];
                }
                
                if(ketdt1 == '0'){
                    $("#tbl_program_date > tbody").html("");
                }else if(ketdt == '0'){
                    $("#tbl_program_date > tbody").html("");
                }else{
                    $("#tbl_program_date > tbody").html("");
                    $.ajax({
                        type: "GET",
                        async:false,
                        url: urls + "get_sub_prog_level1/"+id_monper+"/"+id_role+"/"+catrole,
                        success: function (data_level1) {
                            console.log(data_level1.content);
                            var level1 = data_level1.content;
                            if (level1 != '') {
                                for (i in level1) {
                                    if($("#fs").is(':checked')){
                                        var prog_1 = level1[i][3]+" "+level1[i][1];
                                    }else{
                                        var prog_1 = level1[i][3]+" "+level1[i][2];
                                    }
                                    var tb_prog = '<tr> <td ><b>'+prog_1+'</b></td> <td style="width: 30%;"></td> </tr>';
                                    $("#tbl_program_date > tbody").append(tb_prog);

                                    $.ajax({
                                        type: "GET",
                                        async:false,
                                        url: urls + "get_sub_prog_level2_budget/"+level1[i][0]+"/"+id_role+"/"+catrole+"/"+v_period+"/"+id_monper+"/"+tahun+"/"+isi_time,
                                        success: function (data_level2) {
    //                                        console.log(data_level2.content);
                                            var level3 = data_level2.content;
                                            var sts;
                                            if (level3 != '') {
                                                for (p in level3) {
                                                    if($("#fs").is(':checked')){
                                                        var prog_3 = level1[i][3]+"."+level3[p][13]+" "+level3[p][1];
                                                    }else{
                                                        var prog_3 = level1[i][3]+"."+level3[p][13]+" "+level3[p][2];
                                                    }
                                                    if(catrole == 'Government'){
                                                        $.ajax({
                                                            type: "GET",
                                                            async:false,
                                                            url: urls+'list-get-sts-monper-gov_act/'+id_monper,
                                                            success: function (resultmonper) {
                                                                sts = resultmonper.content;
                                                            }
                                                        });
                                                        if(sts == 'yearly'){
                                                            if(v_period == '1'){
                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="text" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                if(level3[p][9] <= (tahun+1)+'-01-15'){
                                                                    var warna = '';
                                                                }else{
                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                }
                                                            }else{}
                                                        }else if(sts == 'semesterly'){
                                                            if(v_period == '1'){
                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="text" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                if(level3[p][9] <= tahun+'-07-15'){
                                                                    var warna = '';
                                                                }else{
                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                }
                                                            }else if(v_period == '2'){
                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="text" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                if(level3[p][10] <= (tahun+1)+'-01-15'){
                                                                    var warna = '';
                                                                }else{
                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                }
                                                            }else{}

                                                        }else if(sts == 'quarterly'){
                                                            if(v_period == '1'){
                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="text" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                if(level3[p][9] <= tahun+'-04-15'){
                                                                    var warna = '';
                                                                }else{
                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                }
                                                            }else if(v_period == '2'){
                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="text" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                if(level3[p][10] <= tahun+'-07-15'){
                                                                    var warna = '';
                                                                }else{
                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                }
                                                            }else if(v_period == '3'){
                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="text" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                if(level3[p][11] <= tahun+'-10-15'){
                                                                    var warna = '';
                                                                }else{
                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                }
                                                            }else if(v_period == '4'){
                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="text" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                if(level3[p][12] <= (tahun+1)+'-01-15'){
                                                                    var warna = '';
                                                                }else{
                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                }
                                                            }else{}
                                                        }else{}

                                                    }else if(catrole == 'NSA'){
                                                        $.ajax({
                                                            type: "GET",
                                                            async:false,
                                                            url: urls+'list-get-sts-monper-nongov_act/'+id_monper,
                                                            success: function (resultmonper) {
                                                                sts = resultmonper.content;
                                                            }
                                                        });
                                                        if(sts == 'yearly'){
                                                            if(v_period == '1'){
                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="text" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                if(level3[p][9] <= (tahun+1)+'-01-15'){
                                                                    var warna = '';
                                                                }else{
                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                }
                                                            }else{}
                                                        }else if(sts == 'semesterly'){
                                                            if(v_period == '1'){
                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="text" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                if(level3[p][9] <= tahun+'-07-15'){
                                                                    var warna = '';
                                                                }else{
                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                }
                                                            }else if(v_period == '2'){
                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="text" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                if(level3[p][10] <= (tahun+1)+'-01-15'){
                                                                    var warna = '';
                                                                }else{
                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                }
                                                            }else{}

                                                        }else if(sts == 'quarterly'){
                                                            if(v_period == '1'){
                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="text" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                if(level3[p][9] <= tahun+'-04-15'){
                                                                    var warna = '';
                                                                }else{
                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                }
                                                            }else if(v_period == '2'){
                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="text" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                if(level3[p][10] <= tahun+'-07-15'){
                                                                    var warna = '';
                                                                }else{
                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                }
                                                            }else if(v_period == '3'){
                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="text" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                if(level3[p][11] <= tahun+'-10-15'){
                                                                    var warna = '';
                                                                }else{
                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                }
                                                            }else if(v_period == '4'){
                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="text" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                if(level3[p][12] <= (tahun+1)+'-01-15'){
                                                                    var warna = '';
                                                                }else{
                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                }
                                                            }else{}
                                                        }else{}

                                                    }else if(catrole == 'Corporation'){
                                                        $.ajax({
                                                            type: "GET",
                                                            async:false,
                                                            url: urls+'list-get-sts-monper-corporation_act/'+id_monper,
                                                            success: function (resultmonper) {
                                                                sts = resultmonper.content;
                                                            }
                                                        });
                                                        if(sts == 'yearly'){
                                                            if(v_period == '1'){
                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="text" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                if(level3[p][9] <= (tahun+1)+'-01-15'){
                                                                    var warna = '';
                                                                }else{
                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                }
                                                            }else{}
                                                        }else if(sts == 'semesterly'){
                                                            if(v_period == '1'){
                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="text" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                if(level3[p][9] <= tahun+'-07-15'){
                                                                    var warna = '';
                                                                }else{
                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                }
                                                            }else if(v_period == '2'){
                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="text" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                if(level3[p][10] <= (tahun+1)+'-01-15'){
                                                                    var warna = '';
                                                                }else{
                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                }
                                                            }else{}

                                                        }else if(sts == 'quarterly'){
                                                            if(v_period == '1'){
                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="text" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                if(level3[p][9] <= tahun+'-04-15'){
                                                                    var warna = '';
                                                                }else{
                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                }
                                                            }else if(v_period == '2'){
                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="text" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                if(level3[p][10] <= tahun+'-07-15'){
                                                                    var warna = '';
                                                                }else{
                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                }
                                                            }else if(v_period == '3'){
                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="text" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                if(level3[p][11] <= tahun+'-10-15'){
                                                                    var warna = '';
                                                                }else{
                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                }
                                                            }else if(v_period == '4'){
                                                                var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="text" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                if(level3[p][12] <= (tahun+1)+'-01-15'){
                                                                    var warna = '';
                                                                }else{
                                                                    var warna = 'style="background-color: #ffa5a5"';
                                                                }
                                                            }else{}
                                                        }else{}

                                                    }else{}


                                                    var tb_prog3 = '<tr '+warna+'> <td style="text-indent: 4em">'+prog_3+'</td> <td style="width: 30%;"><input name="id_indicator11" id="id_indicator11" type="hidden" value="'+level3[p][0]+'" class="input-block-level"><input name="id_entry11" id="id_entry11" type="hidden" value="'+level3[p][4]+'" class="input-block-level">'+ket_input+' '+level3[p][3]+'</td> </tr>';
                                                    $("#tbl_program_date > tbody").append(tb_prog3);



                                                }
                                            }

                                        }
                                    });

                                }
                            }
                        }
                    });
                }
                
            }
            
            
            //modal catrole
            //modal
            $('#tabel-entri-sdg').on('click', ".data_all_role", function(e){
//                var id_role     = $(this).data("id_role");
                var catrole     = $(this).data("catrole");
                $("#catrole3").val(catrole);
//                $("#id_role2").val(id_role);
                var v_pil_prog  = $("#pil_prog").val();
                //budget indicator
                if(v_pil_prog == 'indicator'){
                    grid_modal_catrole();
                }else{
                    grid_modal_catrole_budget();
                }
                
                $('.addModal_catrole').modal("show");
            });
            
            //grid modal
            function grid_modal_catrole(){
//                var id_role     = $("#id_role2").val();
                var catrole     = $("#catrole3").val();
                var v_dataid    = $("#periode").val();
                var v_data_id   = v_dataid.split("###");;
                var id_monper   = v_data_id[0];
                var tahun       = v_data_id[1];
                var v_period    = $("#period").val();
                var v_id_prov   = $("#id_prov").val();
                var d_time      = $("#time_activity").val();
                if(d_time == ''){
                    var isi_time = '777777';
//                                console.log('kosong')
                }else{
                    var isi_time = d_time;
//                                console.log('isi '+d_time)
                }
                
                $("#tbl_program_catrole > tbody").html("");
                $.ajax({
                    type: "GET",
                    async:false,
                    url: urls + "get_sub_prog_level1_catrole/"+id_monper+"/"+catrole+"/"+v_id_prov,
                    success: function (data_level1) {
                        console.log(data_level1.content);
                        var level1 = data_level1.content;
                        if (level1 != '') {
                            for (i in level1) {
                                if($("#fs").is(':checked')){
                                    var prog_1 = level1[i][3]+" "+level1[i][1];
                                }else{
                                    var prog_1 = level1[i][3]+" "+level1[i][2];
                                }
                                var tb_prog = '<tr> <td ><b>'+prog_1+'</b></td> <td style="width: 30%;"></td> </tr>';
                                $("#tbl_program_catrole > tbody").append(tb_prog);
                                
                                $.ajax({
                                    type: "GET",
                                    async:false,
                                    url: urls + "get_sub_prog_level2_catrole/"+level1[i][0]+"/"+catrole+"/"+v_id_prov,
                                    success: function (data_level2) {
//                                        console.log(data_level2.content);
                                        var level2 = data_level2.content;
                                        if (level2 != '') {
                                            for (o in level2) {
                                                if($("#fs").is(':checked')){
                                                    var prog_2 = level1[i][3]+"."+level2[o][3]+" "+level2[o][1];
                                                }else{
                                                    var prog_2 = level1[i][3]+"."+level2[o][3]+" "+level2[o][2];
                                                }
                                                var tb_prog2 = '<tr> <td style="text-indent: 2em">'+prog_2+'</td> <td style="width: 30%;"></td> </tr>';
                                                $("#tbl_program_catrole > tbody").append(tb_prog2);

                                                $.ajax({
                                                    type: "GET",
                                                    async:false,
                                                    url: urls + "get_sub_prog_level3_catrole/"+level1[i][0]+"/"+level2[o][0]+"/"+v_id_prov+"/"+catrole+"/"+v_period+"/"+id_monper+"/"+tahun+"/"+isi_time,
                                                    success: function (data_level3) {
                //                                        console.log(data_level2.content);
                                                        var level3 = data_level3.content;
                                                        if (level3 != '') {
                                                            for (p in level3) {
                                                                if($("#fs").is(':checked')){
                                                                    var prog_3 = level1[i][3]+"."+level2[o][3]+"."+level3[p][13]+" "+level3[p][1];
                                                                }else{
                                                                    var prog_3 = level1[i][3]+"."+level2[o][3]+"."+level3[p][13]+" "+level3[p][2];
                                                                }
                                                                if(v_period == '1'){
                                                                    var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="text" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                    if(level3[p][5] == '0'){
                                                                        var warna = 'style="background-color: #ffa5a5"';
                                                                    }else{
                                                                        var warna = '';
                                                                    }
                                                                }else if(v_period == '2'){
                                                                    var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="text" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                    if(level3[p][6] == '0'){
                                                                        var warna = 'style="background-color: #ffa5a5"';
                                                                    }else{
                                                                        var warna = '';
                                                                    }
                                                                }else if(v_period == '3'){
                                                                    if(level3[p][7] == '0'){
                                                                        var warna = 'style="background-color: #ffa5a5"';
                                                                    }else{
                                                                        var warna = '';
                                                                    }
                                                                    var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="text" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="hidden" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                }else if(v_period == '4'){
                                                                    if(level3[p][8] == '0'){
                                                                        var warna = 'style="background-color: #ffa5a5"';
                                                                    }else{
                                                                        var warna = '';
                                                                    }
                                                                    var ket_input = '<input name="achievement11" id="submission[][achievement11]" type="hidden" value="'+level3[p][5]+'" class="input-block-level" readonly><input name="achievement21" id="submission[][achievement21]" type="hidden" value="'+level3[p][6]+'" class="input-block-level" readonly><input name="achievement31" id="submission[][achievement31]" type="hidden" value="'+level3[p][7]+'" class="input-block-level" readonly><input name="achievement41" id="submission[][achievement41]" type="text" value="'+level3[p][8]+'" class="input-block-level" readonly>';
                                                                }else{}
//                                                                if(v_period == '1'){
//                                                                    var ket_input = '<input name="submission[][achievement1]" id="submission[][achievement1]" type="text" value="'+level3[p][5]+'" class="input-block-level"><input name="submission[][achievement2]" id="submission[][achievement2]" type="hidden" value="'+level3[p][6]+'" class="input-block-level"><input name="submission[][achievement3]" id="submission[][achievement3]" type="hidden" value="'+level3[p][7]+'" class="input-block-level"><input name="submission[][achievement4]" id="submission[][achievement4]" type="hidden" value="'+level3[p][8]+'" class="input-block-level">';
//                                                                }else if(v_period == '2'){
//                                                                    var ket_input = '<input name="submission[][achievement1]" id="submission[][achievement1]" type="hidden" value="'+level3[p][5]+'" class="input-block-level"><input name="submission[][achievement2]" id="submission[][achievement2]" type="text" value="'+level3[p][6]+'" class="input-block-level"><input name="submission[][achievement3]" id="submission[][achievement3]" type="hidden" value="'+level3[p][7]+'" class="input-block-level"><input name="submission[][achievement4]" id="submission[][achievement4]" type="hidden" value="'+level3[p][8]+'" class="input-block-level">';
//                                                                }else if(v_period == '3'){
//                                                                    var ket_input = '<input name="submission[][achievement1]" id="submission[][achievement1]" type="hidden" value="'+level3[p][5]+'" class="input-block-level"><input name="submission[][achievement2]" id="submission[][achievement2]" type="hidden" value="'+level3[p][6]+'" class="input-block-level"><input name="submission[][achievement3]" id="submission[][achievement3]" type="text" value="'+level3[p][7]+'" class="input-block-level"><input name="submission[][achievement4]" id="submission[][achievement4]" type="hidden" value="'+level3[p][8]+'" class="input-block-level">';
//                                                                }else if(v_period == '4'){
//                                                                    var ket_input = '<input name="submission[][achievement1]" id="submission[][achievement1]" type="hidden" value="'+level3[p][5]+'" class="input-block-level"><input name="submission[][achievement2]" id="submission[][achievement2]" type="hidden" value="'+level3[p][6]+'" class="input-block-level"><input name="submission[][achievement3]" id="submission[][achievement3]" type="hidden" value="'+level3[p][7]+'" class="input-block-level"><input name="submission[][achievement4]" id="submission[][achievement4]" type="text" value="'+level3[p][8]+'" class="input-block-level">';
//                                                                }else{}
                                                                
                                                                var tb_prog3 = '<tr '+warna+'> <td style="text-indent: 4em">'+prog_3+'</td> <td style="width: 30%;"><input name="id_indicator11" id="id_indicator11" type="hidden" value="'+level3[p][0]+'" class="input-block-level"><input name="id_entry11" id="id_entry11" type="hidden" value="'+level3[p][4]+'" class="input-block-level">'+ket_input+' '+level3[p][3]+'</td> </tr>';
                                                                $("#tbl_program_catrole > tbody").append(tb_prog3);

                                                                

                                                            }
                                                        }
                                                    }
                                                });

                                            }
                                        }
                                    }
                                });
                                
                            }
                        }
                    }
                });
            }
            
            function grid_modal_catrole_budget(){
//                var id_role     = $("#id_role2").val();
                var catrole     = $("#catrole3").val();
                var v_dataid    = $("#periode").val();
                var v_data_id   = v_dataid.split("###");;
                var id_monper   = v_data_id[0];
                var tahun       = v_data_id[1];
                var v_period    = $("#period").val();
                var v_id_prov   = $("#id_prov").val();
                var d_time      = $("#time_activity").val();
                if(d_time == ''){
                    var isi_time = '777777';
//                                console.log('kosong')
                }else{
                    var isi_time = d_time;
//                                console.log('isi '+d_time)
                }
                $("#tbl_program_catrole > tbody").html("");
                $.ajax({
                    type: "GET",
                    async:false,
                    url: urls + "get_sub_prog_level1_catrole/"+id_monper+"/"+catrole+"/"+v_id_prov,
                    success: function (data_level1) {
                        console.log(data_level1.content);
                        var level1 = data_level1.content;
                        if (level1 != '') {
                            for (i in level1) {
                                if($("#fs").is(':checked')){
                                    var prog_1 = level1[i][3]+" "+level1[i][1];
                                }else{
                                    var prog_1 = level1[i][3]+" "+level1[i][2];
                                }
                                var tb_prog = '<tr> <td ><b>'+prog_1+'</b></td> <td style="width: 30%;"></td> </tr>';
                                $("#tbl_program_catrole > tbody").append(tb_prog);
                                
                                $.ajax({
                                    type: "GET",
                                    async:false,
                                    url: urls + "get_sub_prog_level2_catrole_budget/"+level1[i][0]+"/"+v_id_prov+"/"+catrole+"/"+v_period+"/"+id_monper+"/"+tahun+"/"+isi_time,
                                    success: function (data_level2) {
//                                        console.log(data_level2.content);
                                        var level2 = data_level2.content;
                                        if (level2 != '') {
                                            for (o in level2) {
                                                if($("#fs").is(':checked')){
                                                    var prog_2 = level1[i][3]+"."+level2[o][13]+" "+level2[o][1];
                                                }else{
                                                    var prog_2 = level1[i][3]+"."+level2[o][13]+" "+level2[o][2];
                                                }
                                                if(v_period == '1'){
                                                    if(level2[o][5] == '0'){
                                                        var warna = 'style="background-color: #ffa5a5"';
                                                    }else{
                                                        var warna = '';
                                                    }
                                                    var ket_input = '<input name="achievement1" id="submission[][achievement1]" type="text" value="'+level2[o][5]+'" class="input-block-level" readonly><input name="achievement2" id="submission[][achievement2]" type="hidden" value="'+level2[o][6]+'" class="input-block-level" readonly><input name="achievement3" id="submission[][achievement3]" type="hidden" value="'+level2[o][7]+'" class="input-block-level" readonly><input name="achievement4" id="submission[][achievement4]" type="hidden" value="'+level2[o][8]+'" class="input-block-level" readonly>';
                                                }else if(v_period == '2'){
                                                    if(level2[o][5] == '0'){
                                                        var warna = 'style="background-color: #ffa5a5"';
                                                    }else{
                                                        var warna = '';
                                                    }
                                                    var ket_input = '<input name="achievement1" id="submission[][achievement1]" type="hidden" value="'+level2[o][5]+'" class="input-block-level" readonly><input name="achievement2" id="submission[][achievement2]" type="text" value="'+level2[o][6]+'" class="input-block-level" readonly><input name="achievement3" id="submission[][achievement3]" type="hidden" value="'+level2[o][7]+'" class="input-block-level" readonly><input name="achievement4" id="submission[][achievement4]" type="hidden" value="'+level2[o][8]+'" class="input-block-level" readonly>';
                                                }else if(v_period == '3'){
                                                    if(level2[o][5] == '0'){
                                                        var warna = 'style="background-color: #ffa5a5"';
                                                    }else{
                                                        var warna = '';
                                                    }
                                                    var ket_input = '<input name="achievement1" id="submission[][achievement1]" type="hidden" value="'+level2[o][5]+'" class="input-block-level" readonly><input name="achievement2" id="submission[][achievement2]" type="hidden" value="'+level2[o][6]+'" class="input-block-level" readonly><input name="achievement3" id="submission[][achievement3]" type="text" value="'+level2[o][7]+'" class="input-block-level" readonly><input name="achievement4" id="submission[][achievement4]" type="hidden" value="'+level2[o][8]+'" class="input-block-level" readonly>';
                                                }else if(v_period == '4'){
                                                    if(level2[o][5] == '0'){
                                                        var warna = 'style="background-color: #ffa5a5"';
                                                    }else{
                                                        var warna = '';
                                                    }
                                                    var ket_input = '<input name="achievement1" id="submission[][achievement1]" type="hidden" value="'+level2[o][5]+'" class="input-block-level" readonly><input name="achievement2" id="submission[][achievement2]" type="hidden" value="'+level2[o][6]+'" class="input-block-level" readonly><input name="achievement3" id="submission[][achievement3]" type="hidden" value="'+level2[o][7]+'" class="input-block-level" readonly><input name="achievement4" id="submission[][achievement4]" type="text" value="'+level2[o][8]+'" class="input-block-level" readonly>';
                                                }else{}
                                                var tb_prog2 = '<tr '+warna+'> <td style="text-indent: 2em">'+prog_2+'</td> <td style="width: 30%;"><input name="id_indicator" id="id_indicator" type="hidden" value="'+level2[o][0]+'" class="input-block-level"><input name="id_entry" id="id_entry" type="hidden" value="'+level2[o][4]+'" class="input-block-level">'+ket_input+' '+level2[o][3]+'</td> </tr>';
                                                $("#tbl_program_catrole > tbody").append(tb_prog2);


                                            }
                                        }
                                    }
                                });
                                
                            }
                        }
                    }
                });
            }
            
            
            //memanggil tb spp
            function grid()
            {
                var v_idprov    = $("#id_prov").val();
                var v_dataid    = $("#periode").val();
                var v_data_id   = v_dataid.split("###");;
                var id_monper   = v_data_id[0];
                var tahun       = v_data_id[1];
                var v_period    = $("#period").val();
                var v_id_role   = $("#idrole").val();
                var v_pil_prog  = $("#pil_prog").val();
                //budget indicator

                var header = '';
                header += '<thead > <tr class="" > <th style="text-align:center;font-size:80%;"> <span class="lang_eng" style="display:none">Actor</span> <span style="display:none">/</span> <span class="lang_indo">Aktor</span> </th>';
                header += '<th style="text-align:center;font-size:80%;"><span class="lang_eng" style="display:none">Saved / Expected Government / Non Government Program Indicator</span> <span style="display:none">/</span> <span class="lang_indo">Simpan / Program Pemerintah/Non Pemerintah Yang Di Harapkan</span> </th>';
                header += '<th style="text-align:center;font-size:80%;"> <span class="lang_eng" style="display:none">Percent</span> <span style="display:none">/</span> <span class="lang_indo">Persentase</span> </th>';
                header += '<th style="text-align:center;font-size:80%;"> <span class="lang_eng" style="display:none">On Time</span> <span style="display:none">/</span> <span class="lang_indo">Tepat Waktu</span> </th>';
                header +=   '<th style="text-align:center;font-size:80%;"> <span class="lang_eng" style="display:none">Percent On Time</span> <span style="display:none">/</span> <span class="lang_indo">Persentase Tepat Waktu</span> </th> ';
                header +=   '<th style="text-align:center;font-size:80%;%"> <span class="lang_eng" style="display:none">Current apply status</span> <span style="display:none">/</span> <span class="lang_indo">Status apply saat ini</span> </th> ';
                header +=   '<th style="text-align:center;font-size:80%;%"> <span class="lang_eng" style="display:none">Current approval status</span> <span style="display:none">/</span> <span class="lang_indo">Status approve saat ini</span> </th> ';
                header +=   '<th style="text-align:center;font-size:80%;%"> <span class="lang_eng" style="display:none">Current show report status</span> <span style="display:none">/</span> <span class="lang_indo">Status show report saat ini</span> </th> ';                            
                header +=   '</tr> </thead> <tbody id="tbody_entri-sdg"> </tbody> ';

                $('#tabel-entri-sdg').html(header);

                if(v_pil_prog == 'indicator'){
                    var link1 = urls+'x/val/'+v_idprov+'/'+v_period+'/'+id_monper+'/'+tahun+'/'+v_id_role;
                }else{
                    var link1 = urls+'x/val_budget/'+v_idprov+'/'+v_period+'/'+id_monper+'/'+tahun+'/'+v_id_role;
                }
                $('#tabel-entri-sdg').DataTable({
//                        var table1 = $('#tabel-entri-sdg').DataTable({
                    responsive: true,
                    sDom: 'lrtip',
                    "bLengthChange": false,
                    "cache": false,
                    "autoWidth": false,
                    "responsive":true,
                    "bDestroy": true,
                    "ordering": false,
                    "paging": false,
                    
                    "ajax": {
                        "url": link1,
                        dataSrc: 'content',
                        beforeSend : function(xhr){
                            $('body').addClass("loading"); 
                        },
                       complete: function(){
                                $('body').removeClass("loading");
                        },
                    },
                    
                    "searching": true,
                    "columns": [
                        {"data": function (row, data, index, display) {
                            if(row[3] == '1'){
                                var ps = "style='font-size:90%;'";
//                                return "<div "+ps+" ><b>"+row[1]+"</b></div>";
//                                var d_id_role    = row[0];
                                var d_dataid    = $("#periode").val();
                                var d_data_id   = d_dataid.split("###");;
                                var d_id_monper = d_data_id[0];
                                var d_tahun     = d_data_id[1];
                                var d_period    = $("#period").val();
                                var d_time      = $("#time_activity").val();
                                var dt          = "";
                                if(d_time == ''){
                                    var isi_time = '777777';
    //                                console.log('kosong')
                                }else{
                                    var isi_time = d_time;
    //                                console.log('isi '+d_time)
                                }
                                if(row[2] == 'Government'){
                                    var type    = 'entry_gov_indicator';
                                    var type_b  = 'entry_gov_budget';
                                    var tb      = 'gov_activity';
                                    var tb2     = 'gov_indicator';
                                }else if(row[2] == 'NSA'){
                                    var type    = 'entry_nsa_indicator';
                                    var type_b  = 'entry_nsa_budget';
                                    var tb      = 'nsa_activity';
                                    var tb2     = 'nsa_indicator';
                                }else if(row[2] == 'Corporation'){
                                    var type    = 'entry_usaha_indicator';
                                    var type_b  = 'entry_usaha_budget';
                                    var tb      = 'usaha_activity';
                                    var tb2     = 'usaha_indicator';
                                }else{}
                                if(v_pil_prog == 'indicator'){
                                    var link2 = urls+'get-jumlah-catrole/'+d_tahun+'/'+d_period+'/'+type+'/'+tb+'/'+tb2+'/'+isi_time+'/'+d_id_monper+'/'+row[2]+'/'+v_idprov;
                                }else{
                                    var link2 = urls+'get-jumlah-catrole-budget/'+d_tahun+'/'+d_period+'/'+type_b+'/'+tb+'/'+tb2+'/'+isi_time+'/'+d_id_monper+'/'+row[2]+'/'+v_idprov;
                                }
                                $.ajax({
                                    type: "GET",
                                    async:false,
                                    url: link2,
                                    success: function (result3) {
                                        dt = result3.content[0];
                                    }
                                });
                                if(v_id_role == "999999"){
                                    return "<div "+ps+" ><b>"+row[1]+"</b> <a class='data_all_role' data-catrole='"+row[2]+"' href='#'> - "+dt+"</a></div>";
                                }else{
                                    return "<div "+ps+" ><b>"+row[1]+"</b> </div>";
                                }
                                
                            }else{
                                var ps = "style='font-size:90%; margin-left: 30px'";
//                                return "<div "+ps+" >"+row[1]+"</div>";
                                return "<div "+ps+" ><a class='id_role' data-id_role='"+row[0]+"' data-catrole='"+row[2]+"' href='#'>"+row[1]+"</a></div>";
                            }
                        }},
                        {"data": function (row, data, index, display) {
                            var d_id_role    = row[0];
                            var d_dataid    = $("#periode").val();
                            var d_data_id   = d_dataid.split("###");;
                            var d_id_monper = d_data_id[0];
                            var d_tahun     = d_data_id[1];
                            var d_period    = $("#period").val();
                            var d_time      = $("#time_activity").val();
                            var dt          = "";
                            if(d_time == ''){
                                var isi_time = '777777';
//                                console.log('kosong')
                            }else{
                                var isi_time = d_time;
//                                console.log('isi '+d_time)
                            }
                            if(row[2] == 'Government'){
                                var type    = 'entry_gov_indicator';
                                var type_b  = 'entry_gov_budget';
                                var tb      = 'gov_activity';
                                var tb2     = 'gov_indicator';
                            }else if(row[2] == 'NSA'){
                                var type    = 'entry_nsa_indicator';
                                var type_b  = 'entry_nsa_budget';
                                var tb      = 'nsa_activity';
                                var tb2     = 'nsa_indicator';
                            }else if(row[2] == 'Corporation'){
                                var type    = 'entry_usaha_indicator';
                                var type_b  = 'entry_usaha_budget';
                                var tb      = 'usaha_activity';
                                var tb2     = 'usaha_indicator';
                            }else{}
                            if(v_pil_prog == 'indicator'){
                                var link2 = urls+'get-cek-data-all/'+d_id_role+'/'+d_tahun+'/'+d_period+'/'+type+'/'+tb+'/'+tb2+'/'+isi_time+'/'+d_id_monper;
                            }else{
                                var link2 = urls+'get-cek-data-all-budget/'+d_id_role+'/'+d_tahun+'/'+d_period+'/'+type_b+'/'+tb+'/'+tb2+'/'+isi_time+'/'+d_id_monper;
                            }
                            $.ajax({
                                type: "GET",
                                async:false,
                                url: link2,
                                success: function (result3) {
                                    dt = result3.content[0];
                                }
                            });
//                            console.log(dt[0]);
                            if(row[3] == '1'){
                                return "<div style='font-size:90%;'></div>";
                            }else{
                                if(dt[0] == null){
                                    var ketdt = '0';
                                }else{
                                    var ketdt = dt[0];
                                }
                                if(dt[1] == null){
                                    var ketdt1 = '0';
                                }else{
                                    var ketdt1 = dt[1];
                                }
                                return "<div style='font-size:90%;'><span style='display:none'>'</span><a class='id_role_nilai' data-id_role='"+row[0]+"' data-catrole='"+row[2]+"' href='#'>"+ketdt+"</a> / <a class='id_role_nilai' data-id_role='"+row[0]+"' data-catrole='"+row[2]+"' href='#'>"+ketdt1+"</a></div>";
                            }
                        }},
                        {"data": function (row, data, index, display) {
                            var d_id_role    = row[0];
                            var d_dataid    = $("#periode").val();
                            var d_data_id   = d_dataid.split("###");;
                            var d_id_monper = d_data_id[0];
                            var d_tahun     = d_data_id[1];
                            var d_period    = $("#period").val();
                            var d_time      = $("#time_activity").val();
                            var dt          = "";
                            if(d_time == ''){
                                var isi_time = '777777';
//                                console.log('kosong')
                            }else{
                                var isi_time = d_time;
//                                console.log('isi '+d_time)
                            }
                            if(row[2] == 'Government'){
                                var type    = 'entry_gov_indicator';
                                var type_b  = 'entry_gov_budget';
                                var tb      = 'gov_activity';
                                var tb2     = 'gov_indicator';
                            }else if(row[2] == 'NSA'){
                                var type    = 'entry_nsa_indicator';
                                var type_b  = 'entry_nsa_budget';
                                var tb      = 'nsa_activity';
                                var tb2     = 'nsa_indicator';
                            }else if(row[2] == 'Corporation'){
                                var type    = 'entry_usaha_indicator';
                                var type_b  = 'entry_usaha_budget';
                                var tb      = 'usaha_activity';
                                var tb2     = 'usaha_indicator';
                            }else{}
                            if(v_pil_prog == 'indicator'){
                                var link2 = urls+'get-cek-data-all/'+d_id_role+'/'+d_tahun+'/'+d_period+'/'+type+'/'+tb+'/'+tb2+'/'+isi_time+'/'+d_id_monper;
                            }else{
                                var link2 = urls+'get-cek-data-all-budget/'+d_id_role+'/'+d_tahun+'/'+d_period+'/'+type_b+'/'+tb+'/'+tb2+'/'+isi_time+'/'+d_id_monper;
                            }
                            $.ajax({
                                type: "GET",
                                async:false,
                                url: link2,
                                success: function (result3) {
                                    dt = result3.content[0];
                                }
                            });
//                            console.log(dt[0]);
                            if(dt[0] == null){
                                var ketdt = '0';
                            }else{
                                var ketdt = dt[0];
                            }
                            if(dt[1] == null){
                                var ketdt1 = '0';
                            }else{
                                var ketdt1 = dt[1];
                            }
                            var hsl_ps = (ketdt/ketdt1)*100
                            if(row[3] == '1'){
                                return "<div style='font-size:90%;'></div>";
                            }else{
                                var kk = hsl_ps+'1';
//                                console.log(" - - "+kk+' -- '+ketdt1+' -- '+(ketdt/ketdt1)*100);
                                if(kk == 'NaN1'){
                                    var hsl_ps1 = '0.00';
                                }else{
                                    var hsl_ps1 = hsl_ps.toFixed(2);
                                }
                                return "<div style='font-size:90%;'>"+hsl_ps1+"%</div>";
                            }
                        }},
                        {"data": function (row, data, index, display) {
                            var d_id_role    = row[0];
                            var d_dataid    = $("#periode").val();
                            var d_data_id   = d_dataid.split("###");;
                            var d_id_monper = d_data_id[0];
                            var d_tahun     = d_data_id[1];
                            var d_period    = $("#period").val();
                            var dt          = "";
                            var sts         = '';
                            var d_time      = $("#time_activity").val();
                            if(d_time == ''){
                                var isi_time = '777777';
//                                console.log('kosong')
                            }else{
                                var isi_time = d_time;
//                                console.log('isi '+d_time)
                            }
                            if(row[2] == 'Government'){
                                var type    = 'entry_gov_indicator';
                                var type_b  = 'entry_gov_budget';
                                var tb      = 'gov_activity';
                                var tb2     = 'gov_indicator';
                            }else if(row[2] == 'NSA'){
                                var type    = 'entry_nsa_indicator';
                                var type_b  = 'entry_nsa_budget';
                                var tb      = 'nsa_activity';
                                var tb2     = 'nsa_indicator';
                            }else if(row[2] == 'Corporation'){
                                var type    = 'entry_usaha_indicator';
                                var type_b  = 'entry_usaha_budget';
                                var tb      = 'usaha_activity';
                                var tb2     = 'usaha_indicator';
                            }else{}
                            
                            
                            if(row[2] == 'Government'){
                                $.ajax({
                                    type: "GET",
                                    async:false,
                                    url: urls+'list-get-sts-monper-gov_act/'+id_monper,
                                    success: function (resultmonper) {
                                        sts = resultmonper.content;
                                    }
                                });
                                
                                if(v_pil_prog == 'indicator'){
                                    var link3 = urls+'get-cek-data-all-deadline/'+d_id_role+'/'+d_tahun+'/'+d_period+'/'+type+'/'+tb+'/'+tb2+'/'+sts+'/'+isi_time+'/'+d_id_monper;
                                }else{
                                    var link3 = urls+'get-cek-data-all-deadline-budget/'+d_id_role+'/'+d_tahun+'/'+d_period+'/'+type_b+'/'+tb+'/'+tb2+'/'+sts+'/'+isi_time+'/'+d_id_monper;
                                }
                                
                                $.ajax({
                                    type: "GET",
                                    async:false,
                                    url: link3,
                                    success: function (result3) {
                                        dt = result3.content[0];
                                    }
                                });
                                
                                if(row[3] == '1'){
                                    return "<div style='font-size:90%;'></div>";
                                }else{
                                    if(dt[0] == null){
                                        var ketdt = '0';
                                    }else{
                                        var ketdt = dt[0];
                                    }
                                    if(dt[1] == null){
                                        var ketdt1 = '0';
                                    }else{
                                        var ketdt1 = dt[1];
                                    }
                                    return "<div style='font-size:90%;'><span style='display:none'>'</span><a class='id_role_date' data-id_role='"+row[0]+"' data-catrole='"+row[2]+"' href='#'>"+ketdt+"</a> / <a class='id_role_date' data-id_role='"+row[0]+"' data-catrole='"+row[2]+"' href='#'>"+ketdt1+"</a></div>";
                                }
                                
                            }else if(row[2] == 'NSA'){
                                $.ajax({
                                    type: "GET",
                                    async:false,
                                    url: urls+'list-get-sts-monper-nongov_act/'+id_monper,
                                    success: function (resultmonper) {
                                        sts = resultmonper.content;
                                    }
                                });
                                
                                if(v_pil_prog == 'indicator'){
                                    var link3 = urls+'get-cek-data-all-deadline/'+d_id_role+'/'+d_tahun+'/'+d_period+'/'+type+'/'+tb+'/'+tb2+'/'+sts+'/'+isi_time+'/'+d_id_monper;
                                }else{
                                    var link3 = urls+'get-cek-data-all-deadline-budget/'+d_id_role+'/'+d_tahun+'/'+d_period+'/'+type_b+'/'+tb+'/'+tb2+'/'+sts+'/'+isi_time+'/'+d_id_monper;
                                }
                                
                                $.ajax({
                                    type: "GET",
                                    async:false,
                                    url: link3,
                                    success: function (result3) {
                                        dt = result3.content[0];
                                    }
                                });
                                if(row[3] == '1'){
                                    return "<div style='font-size:90%;'></div>";
                                }else{
                                    if(dt[0] == null){
                                        var ketdt = '0';
                                    }else{
                                        var ketdt = dt[0];
                                    }
                                    if(dt[1] == null){
                                        var ketdt1 = '0';
                                    }else{
                                        var ketdt1 = dt[1];
                                    }
                                    return "<div style='font-size:90%;'><span style='display:none'>'</span><a class='id_role_date' data-id_role='"+row[0]+"' data-catrole='"+row[2]+"' href='#'>"+ketdt+"</a> / <a class='id_role_date' data-id_role='"+row[0]+"' data-catrole='"+row[2]+"' href='#'>"+ketdt1+"</a></div>";
                                }
                            }else if(row[2] == 'Corporation'){
                                $.ajax({
                                    type: "GET",
                                    async:false,
                                    url: urls+'list-get-sts-monper-corporation_act/'+id_monper,
                                    success: function (resultmonper) {
                                        sts = resultmonper.content;
                                    }
                                });
                                
                                if(v_pil_prog == 'indicator'){
                                    var link3 = urls+'get-cek-data-all-deadline/'+d_id_role+'/'+d_tahun+'/'+d_period+'/'+type+'/'+tb+'/'+tb2+'/'+sts+'/'+isi_time+'/'+d_id_monper;
                                }else{
                                    var link3 = urls+'get-cek-data-all-deadline-budget/'+d_id_role+'/'+d_tahun+'/'+d_period+'/'+type_b+'/'+tb+'/'+tb2+'/'+sts+'/'+isi_time+'/'+d_id_monper;
                                }
                                
                                $.ajax({
                                    type: "GET",
                                    async:false,
                                    url: link3,
                                    success: function (result3) {
                                        dt = result3.content[0];
                                    }
                                });
                                if(row[3] == '1'){
                                    return "<div style='font-size:90%;'></div>";
                                }else{
                                    if(dt[0] == null){
                                        var ketdt = '0';
                                    }else{
                                        var ketdt = dt[0];
                                    }
                                    if(dt[1] == null){
                                        var ketdt1 = '0';
                                    }else{
                                        var ketdt1 = dt[1];
                                    }
                                    return "<div style='font-size:90%;'><span style='display:none'>'</span><a class='id_role_date' data-id_role='"+row[0]+"' data-catrole='"+row[2]+"' href='#'>"+ketdt+"</a> / <a class='id_role_date' data-id_role='"+row[0]+"' data-catrole='"+row[2]+"' href='#'>"+ketdt1+"</a></div>";
                                }
                            }else{
                                
                            }
                        }},
                        {"data": function (row, data, index, display) {
                            var d_id_role    = row[0];
                            var d_dataid    = $("#periode").val();
                            var d_data_id   = d_dataid.split("###");;
                            var d_id_monper = d_data_id[0];
                            var d_tahun     = d_data_id[1];
                            var d_period    = $("#period").val();
                            var dt          = "";
                            var sts         = '';
                            var d_time      = $("#time_activity").val();
                            if(d_time == ''){
                                var isi_time = '777777';
//                                console.log('kosong')
                            }else{
                                var isi_time = d_time;
//                                console.log('isi '+d_time)
                            }
                            if(row[2] == 'Government'){
                                var type    = 'entry_gov_indicator';
                                var type_b  = 'entry_gov_budget';
                                var tb      = 'gov_activity';
                                var tb2     = 'gov_indicator';
                            }else if(row[2] == 'NSA'){
                                var type    = 'entry_nsa_indicator';
                                var type_b  = 'entry_nsa_budget';
                                var tb      = 'nsa_activity';
                                var tb2     = 'nsa_indicator';
                            }else if(row[2] == 'Corporation'){
                                var type    = 'entry_usaha_indicator';
                                var type_b  = 'entry_usaha_budget';
                                var tb      = 'usaha_activity';
                                var tb2     = 'usaha_indicator';
                            }else{}
                            if(row[2] == 'Government'){
                                $.ajax({
                                    type: "GET",
                                    async:false,
                                    url: urls+'list-get-sts-monper-gov_act/'+id_monper,
                                    success: function (resultmonper) {
                                        sts = resultmonper.content;
                                    }
                                });
                                
                                if(v_pil_prog == 'indicator'){
                                    var link3 = urls+'get-cek-data-all-deadline/'+d_id_role+'/'+d_tahun+'/'+d_period+'/'+type+'/'+tb+'/'+tb2+'/'+sts+'/'+isi_time+'/'+d_id_monper;
                                }else{
                                    var link3 = urls+'get-cek-data-all-deadline-budget/'+d_id_role+'/'+d_tahun+'/'+d_period+'/'+type_b+'/'+tb+'/'+tb2+'/'+sts+'/'+isi_time+'/'+d_id_monper;
                                }
                                $.ajax({
                                    type: "GET",
                                    async:false,
                                    url: link3,
                                    success: function (result3) {
                                        dt = result3.content[0];
                                    }
                                });
                                if(dt[0] == null){
                                    var ketdt = '0';
                                }else{
                                    var ketdt = dt[0];
                                }
                                if(dt[1] == null){
                                    var ketdt1 = '0';
                                }else{
                                    var ketdt1 = dt[1];
                                }
                                var hsl_ps = (ketdt/ketdt1)*100
                                if(row[3] == '1'){
                                    return "<div style='font-size:90%;'></div>";
                                }else{
                                    var kk = hsl_ps+'1';
    //                                console.log(" - - "+kk+' -- '+ketdt1+' -- '+(ketdt/ketdt1)*100);
                                    if(kk == 'NaN1'){
                                        var hsl_ps1 = '0.00';
                                    }else{
                                        var hsl_ps1 = hsl_ps.toFixed(2);
                                    }
                                    return "<div style='font-size:90%;'>"+hsl_ps1+"%</div>";
                                }
                                
                            }else if(row[2] == 'NSA'){
                                $.ajax({
                                    type: "GET",
                                    async:false,
                                    url: urls+'list-get-sts-monper-nongov_act/'+id_monper,
                                    success: function (resultmonper) {
                                        sts = resultmonper.content;
                                    }
                                });
                                
                                if(v_pil_prog == 'indicator'){
                                    var link3 = urls+'get-cek-data-all-deadline/'+d_id_role+'/'+d_tahun+'/'+d_period+'/'+type+'/'+tb+'/'+tb2+'/'+sts+'/'+isi_time+'/'+d_id_monper;
                                }else{
                                    var link3 = urls+'get-cek-data-all-deadline-budget/'+d_id_role+'/'+d_tahun+'/'+d_period+'/'+type_b+'/'+tb+'/'+tb2+'/'+sts+'/'+isi_time+'/'+d_id_monper;
                                }
                                
                                $.ajax({
                                    type: "GET",
                                    async:false,
                                    url: link3,
                                    success: function (result3) {
                                        dt = result3.content[0];
                                    }
                                });
                                if(dt[0] == null){
                                    var ketdt = '0';
                                }else{
                                    var ketdt = dt[0];
                                }
                                if(dt[1] == null){
                                    var ketdt1 = '0';
                                }else{
                                    var ketdt1 = dt[1];
                                }
                                var hsl_ps = (ketdt/ketdt1)*100
                                if(row[3] == '1'){
                                    return "<div style='font-size:90%;'></div>";
                                }else{
                                    var kk = hsl_ps+'1';
    //                                console.log(" - - "+kk+' -- '+ketdt1+' -- '+(ketdt/ketdt1)*100);
                                    if(kk == 'NaN1'){
                                        var hsl_ps1 = '0.00';
                                    }else{
                                        var hsl_ps1 = hsl_ps.toFixed(2);
                                    }
                                    return "<div style='font-size:90%;'>"+hsl_ps1+"%</div>";
                                }
                            }else if(row[2] == 'Corporation'){
                                $.ajax({
                                    type: "GET",
                                    async:false,
                                    url: urls+'list-get-sts-monper-corporation_act/'+id_monper,
                                    success: function (resultmonper) {
                                        sts = resultmonper.content;
                                    }
                                });
                                
                                if(v_pil_prog == 'indicator'){
                                    var link3 = urls+'get-cek-data-all-deadline/'+d_id_role+'/'+d_tahun+'/'+d_period+'/'+type+'/'+tb+'/'+tb2+'/'+sts+'/'+isi_time+'/'+d_id_monper;
                                }else{
                                    var link3 = urls+'get-cek-data-all-deadline-budget/'+d_id_role+'/'+d_tahun+'/'+d_period+'/'+type_b+'/'+tb+'/'+tb2+'/'+sts+'/'+isi_time+'/'+d_id_monper;
                                }
                                
                                $.ajax({
                                    type: "GET",
                                    async:false,
                                    url: link3,
                                    success: function (result3) {
                                        dt = result3.content[0];
                                    }
                                });
                                if(dt[0] == null){
                                    var ketdt = '0';
                                }else{
                                    var ketdt = dt[0];
                                }
                                if(dt[1] == null){
                                    var ketdt1 = '0';
                                }else{
                                    var ketdt1 = dt[1];
                                }
                                var hsl_ps = (ketdt/ketdt1)*100
                                if(row[3] == '1'){
                                    return "<div style='font-size:90%;'></div>";
                                }else{
                                    var kk = hsl_ps+'1';
    //                                console.log(" - - "+kk+' -- '+ketdt1+' -- '+(ketdt/ketdt1)*100);
                                    if(kk == 'NaN1'){
                                        var hsl_ps1 = '0.00';
                                    }else{
                                        var hsl_ps1 = hsl_ps.toFixed(2);
                                    }
                                    return "<div style='font-size:90%;'>"+hsl_ps1+"%</div>";
                                }
                            }else{
                                
                            }
                        }},
                        {"data": function (row, data, index, display){
                            var a_id_role    = row[0];
                            var a_dataid    = $("#periode").val();
                            var a_data_id   = a_dataid.split("###");;
                            var a_id_monper = a_data_id[0];
                            var a_tahun     = a_data_id[1];
                            var a_period    = $("#period").val();
                            var app         = "";
                            if(v_pil_prog == 'indicator'){
                                var link3 = urls+'get-cek-app/'+a_id_role+'/'+a_id_monper+'/'+a_tahun+'/'+a_period;
                            }else{
                                var link3 = urls+'get-cek-app-budget/'+a_id_role+'/'+a_id_monper+'/'+a_tahun+'/'+a_period;
                            }
                            $.ajax({
                                type: "GET",
                                async:false,
                                url: link3,
                                success: function (result1) {
                                    app = result1.content;
                                }
                            });
                            if(app == '0'){
                                var hsl_app = 'NO';
                            }else{
                                var hsl_app = 'YES';
                            }
                            if(row[3] == '1'){
                                return "<div style='font-size:90%;'></div>";
                            }else{
                                return "<div style='font-size:90%;'>"+hsl_app+"</div>";
                            }
                        }},
                        {"data": function (row, data, index, display){
                            var a_id_role    = row[0];
                            var a_dataid    = $("#periode").val();
                            var a_data_id   = a_dataid.split("###");;
                            var a_id_monper = a_data_id[0];
                            var a_tahun     = a_data_id[1];
                            var a_period    = $("#period").val();
                            var app         = "";
                            if(v_pil_prog == 'indicator'){
                                var link3 = urls+'get-cek-app-approve/'+a_id_role+'/'+a_id_monper+'/'+a_tahun+'/'+a_period;
                            }else{
                                var link3 = urls+'get-cek-app-approve-budget/'+a_id_role+'/'+a_id_monper+'/'+a_tahun+'/'+a_period;
                            }
                            $.ajax({
                                type: "GET",
                                async:false,
                                url: link3,
                                success: function (result1) {
                                    app = result1.content;
                                }
                            });
                            if(app == '0'){
                                var hsl_app = 'NO';
                            }else{
                                var hsl_app = 'YES';
                            }
                            if(row[3] == '1'){
                                return "<div style='font-size:90%;'></div>";
                            }else{
                                return "<div style='font-size:90%;'>"+hsl_app+"</div>";
                            }
                        }},
                        {"data": function (row, data, index, display) {
                            var s_id_role    = row[0];
                            var s_dataid    = $("#periode").val();
                            var s_data_id   = s_dataid.split("###");;
                            var s_id_monper = s_data_id[0];
                            var s_tahun     = s_data_id[1];
                            var s_period    = $("#period").val();
                            var sho         = "";
                            if(row[2] == 'Government'){
                                if(v_pil_prog == 'indicator'){
                                    var type    = 'entry_gov_indicator';
                                }else{
                                    var type    = 'entry_gov_budget';
                                }
                                
                            }else if(row[2] == 'NSA'){
                                if(v_pil_prog == 'indicator'){
                                    var type    = 'entry_nsa_indicator';
                                }else{
                                    var type    = 'entry_nsa_budget';
                                }
                            }else if(row[2] == 'Corporation'){
                                if(v_pil_prog == 'indicator'){
                                    var type    = 'entry_usaha_indicator';
                                }else{
                                    var type    = 'entry_usaha_budget';
                                }
                            }else{}
                            
                            $.ajax({
                                type: "GET",
                                async:false,
                                url: urls+'get-cek-sho/'+s_id_monper+'/'+s_tahun+'/'+s_period+'/'+type,
                                success: function (result2) {
                                    sho = result2.content;
                                }
                            });
                            if(sho == '0'){
                                var hsl_sho = 'NO';
                            }else if(sho == '1'){
                                var hsl_sho = 'YES';
                            }else{
                                var hsl_sho = '';
                            }
                            if(row[3] == '1'){
                                return "<div style='font-size:90%;'>"+hsl_sho+"</div>";
                            }else{
                                return "<div style='font-size:90%;'></div>";
                            }
                        }},
                    ],
                    "columnDefs": [
                    ],
                    select: true
                });	
            }
            

            
            var token = $("meta[name='_csrf']").attr("content");
            var header = $("meta[name='_csrf_header']").attr("content");
            
            
            $('#simpan_').on('click', '#simpan', function(e){
                var v_dataid    = $("#periode").val();
                var v_data_id   = v_dataid.split("###");;
                var id_monper   = v_data_id[0];
                var tahun       = v_data_id[1];
                
                var v_period    = $("#period").val();
                var catrole     = $("#catrole").val();
                var f_achievement = [];
                var dat_achievement;
                $.each($("input[name='achievement"+v_period+"']"), function(){
                    f_achievement.push($(this).val());
	        });
                if(f_achievement.length>0){
                    dat_achievement = f_achievement.toString();
                }else{
                    dat_achievement = '0';
                }
                console.log(dat_achievement);
                
                var f_id_indicator = [];
                var dat_id_indicator;
                $.each($("input[name='id_indicator']"), function(){
                    f_id_indicator.push($(this).val());
	        });
                if(f_id_indicator.length>0){
                    dat_id_indicator = f_id_indicator.toString();
                }else{
                    dat_id_indicator = '0';
                }
                console.log(dat_id_indicator);
                
                var f_id_entry = [];
                var dat_id_entry;
                $.each($("input[name='id_entry']"), function(){
                    f_id_entry.push($(this).val());
	        });
                if(f_id_entry.length>0){
                    dat_id_entry = f_id_entry.toString();
                }else{
                    dat_id_entry = '0';
                }
                console.log(dat_id_entry);
                var v_pil_prog  = $("#pil_prog").val();
                //budget indicator
                if(v_pil_prog == 'indicator'){
                    var linkaja = urls+'save-submission/'+dat_id_indicator+'/'+dat_achievement+'/'+dat_id_entry+'/'+v_period+'/'+catrole+'/'+id_monper+'/'+tahun;
                }else{
                    var linkaja = urls+'save-submission-budget/'+dat_id_indicator+'/'+dat_achievement+'/'+dat_id_entry+'/'+v_period+'/'+catrole+'/'+id_monper+'/'+tahun;
                }
                
//                var data    = JSON.stringify({
//                                'id': id,
//                                'id_sdg_indicator': id_sdg_indicator,
//                                'achievement1': achievement1,
//                                'achievement2': achievement2,
//                                'achievement3': achievement3,
//                                'achievement4': achievement4,
//                                /* 'new_value1': '0',
//                                'new_value2': '0',
//                                'new_value3': '0',
//                                'new_value4': '0', */
//                                'year_entry': tahun,
//                                'id_role': v_idrole,
//                                'created_by': v_idrole,
//                                'id_monper': id_monper
//                            });
                $.ajax({
                    type: "POST",
                    url: linkaja,
                    beforeSend : function(xhr){
                    	xhr.setRequestHeader(header,token);
//                        $('body').addClass("loading"); 
                    },
                    headers:{'Accept':'application/json','Content-Type':'application/json'},
//                    data: data,
                    success: function (result) {
//                        $('body').removeClass("loading");
                        grid();
                    	$('.addModal').modal('hide');
                    },
                });
            });
            
            $('#tabel-entri-sdg').on('click', '.update', function(){
                var dataid          = $(this).data('id');
                var data            = dataid.split('###');
                var id_indicator    = data[0];
                var value1          = data[1];
                var value2          = data[2];
                var value3          = data[3];
                var value4          = data[4];
                var kode            = data[5];
                var id              = data[6];
                
                if(value1 == 'null' || value1 == ""){
                    var achieve1 = '0';
                }else{
                    var achieve1 = value1;
                }
                
                if(value2 == 'null' || value2 == ""){
                    var achieve2 = '0';
                }else{
                    var achieve2 = value2;
                }
                if(value3 == 'null' || value3 == ""){
                    var achieve3 = '0';
                }else{
                    var achieve3 = value3;
                }
                if(value4 == 'null' || value4 == ""){
                    var achieve4 = '0';
                }else{
                    var achieve4 = value4;
                }
                
                $('#id_sdg_indicator').val(id_indicator);
                if(kode == '1'){
                    $('#achievement1').val(achieve1).show();
                    $('#achievement2').val(achieve2).hide();
                    $('#achievement3').val(achieve3).hide();
                    $('#achievement4').val(achieve4).hide();
                }else if(kode == '2'){
                    $('#achievement1').val(achieve1).hide();
                    $('#achievement2').val(achieve2).show();
                    $('#achievement3').val(achieve3).hide();
                    $('#achievement4').val(achieve4).hide();
                }else if(kode == '3'){
                    $('#achievement1').val(achieve1).hide();
                    $('#achievement2').val(achieve2).hide();
                    $('#achievement3').val(achieve3).show();
                    $('#achievement4').val(achieve4).hide();
                }else if(kode == '4'){
                    $('#achievement1').val(achieve1).hide();
                    $('#achievement2').val(achieve2).hide();
                    $('#achievement3').val(achieve3).hide();
                    $('#achievement4').val(achieve4).show();
                }else{
                    $('#achievement1').val("0").hide();
                    $('#achievement2').val("0").hide();
                    $('#achievement3').val("0").hide();
                    $('#achievement4').val("0").hide();
                }
                $('#id').val(id).hide();
                $('.addModal').modal("show");
                $('#simpan_').show();
            });
            
            $("#tabel-entri-sdg").on('click', '.apply', function () {
            	var data  = $(this).attr('data-id').split('###');
                var id_form_type = data[0];
                var id_role = data[1];
                var id_monper = data[2];
                var year = data[3];
                var approval = data[4];
                var type = data[5];
                var period = data[6];
                var dataPost = JSON.stringify({
                    'id_form_type': id_form_type,
                    'id_role': id_role,
                    'id_monper': id_monper,
                    'year': year,
                    'approval': approval,
                    'type': type,
                    'period': period,
                });
                
                swal({
                    title: titleApp,
                    text: messApp,
                    type: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: buttApp
                }).then(function () {
                	$.ajax({
                        type: "POST",
                        url: urls+'save-approval',
                        beforeSend : function(xhr){
                        	xhr.setRequestHeader(header,token);
                        },
                        headers:{'Accept':'application/json','Content-Type':'application/json'},
                        data: dataPost,
                        success: function (result) {
                            grid();
                        },
                    });
                }, function (dismiss) {
                    if (dismiss === 'cancel') {
                    }
                });
            });

            // var valdaerah = $("#daerah").val();
            // $("#daerah").on("change", function() {
            //     var selectPer = $("#periode option:selected").html();
            //     var selectVal = $("option:selected", this).val();
            //     if (selectVal == "000") {
            //         // $(this).html();
            //         alert(selectPer);
            //     }
            // });
            var selValDaerah = $("#daerah option:selected").val();
            $("#periode").on("change", function(){
                if (selValDaerah == "000") {
                    // $(this).html("RAN "+teks);
                    alert("teks");
                }
            });
            
            
            //apply
            $("#simpan_").on('click', '#apply', function () {
                var id_form_type    = '0';
                var id_role         = $("#id_role").val();
                var v_dataid        = $("#periode").val();
                var v_data_id       = v_dataid.split("###");
                
                var id_monper       = v_data_id[0];
                var year            = v_data_id[1];
                var cat_role        = $("#catrole").val();
                var pil_prog        = $("#pil_prog").val();
                if(cat_role == "Government"){
                    if(pil_prog == "budget"){
                        var tipe_approve = "entry_gov_budget";
                    }else if(pil_prog == "indicator"){
                        var tipe_approve = "entry_gov_indicator";
                    }else{}
                }else if(cat_role == "NSA"){
                    if(pil_prog == "budget"){
                        var tipe_approve = "entry_nsa_budget";
                    }else if(pil_prog == "indicator"){
                        var tipe_approve = "entry_nsa_indicator";
                    }else{}
                }else if(cat_role == "Corporation"){
                    if(pil_prog == "budget"){
                        var tipe_approve = "entry_usaha_budget";
                    }else if(pil_prog == "indicator"){
                        var tipe_approve = "entry_usaha_indicator";
                    }else{}
                }else{}
                var approval    = "1";
                var type        = tipe_approve;
                var period      = $("#period").val();
                var dataPost    = JSON.stringify({
                    'id_form_type': id_form_type,
                    'id_role': id_role,
                    'id_monper': id_monper,
                    'year': year,
                    'approval': approval,
                    'type': type,
                    'periode': period,
                });
                $('.addModal').modal('hide');
                swal({
                    title: titleApp,
                    text: messApp,
                    type: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: buttApp
                }).then(function () {
                    $.ajax({
                    type: "POST",
                    url: urls+'save-approval',
                    beforeSend : function(xhr){
                            xhr.setRequestHeader(header,token);
                    },
                    headers:{'Accept':'application/json','Content-Type':'application/json'},
                    data: dataPost,
                    success: function (result) {
                        grid();
                        $('.addModal').modal('hide');
                    },
                });
                }, function (dismiss) {
                    if (dismiss === 'cancel') {
                        $('.addModal').modal('show');
                    }
                });
            }).on('click', '#unapply', function () {
            	var id_form_type    = '0';
                var id_role         = $("#id_role").val();
                var v_dataid        = $("#periode").val();
                var v_data_id       = v_dataid.split("###");
                
                var id_monper       = v_data_id[0];
                var year            = v_data_id[1];
                var cat_role        = $("#catrole").val();
                var pil_prog        = $("#pil_prog").val();
                if(cat_role == "Government"){
                    if(pil_prog == "budget"){
                        var tipe_approve = "entry_gov_budget";
                    }else if(pil_prog == "indicator"){
                        var tipe_approve = "entry_gov_indicator";
                    }else{}
                }else if(cat_role == "NSA"){
                    if(pil_prog == "budget"){
                        var tipe_approve = "entry_nsa_budget";
                    }else if(pil_prog == "indicator"){
                        var tipe_approve = "entry_nsa_indicator";
                    }else{}
                }else if(cat_role == "Corporation"){
                    if(pil_prog == "budget"){
                        var tipe_approve = "entry_usaha_budget";
                    }else if(pil_prog == "indicator"){
                        var tipe_approve = "entry_usaha_indicator";
                    }else{}
                }else{}
                var approval    = "1";
                var type        = tipe_approve;
                var period      = $("#period").val();    
                $('.addModal').modal('hide');
                swal({
                    title: titleApp,
                    text: messUnApp,
                    type: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: buttUnApp
                }).then(function () {
                	$.ajax({
                        type: "DELETE",
                        url: urls+'unapply/'+type+'/'+year+'/'+id_monper+'/'+period+'/'+id_role,
                        beforeSend : function(xhr){
                        	xhr.setRequestHeader(header,token);
                        },
                        headers:{'Accept':'application/json','Content-Type':'application/json'},
                        success: function (result) {
                            grid();
                            $('.addModal').modal('hide');
                        },
                    });
                }, function (dismiss) {
                    if (dismiss === 'cancel') {
                        $('.addModal').modal('show');
                    }
                });
            });
            
            var tableToExcel = (function() {
            var uri = 'data:application/vnd.ms-excel;base64,'
            , template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>'
            , base64 = function(s) { return window.btoa(unescape(encodeURIComponent(s))) }
            , format = function(s, c) { return s.replace(/{(\w+)}/g, function(m, p) { return c[p]; }) }
            return function(table, name) {
            if (!table.nodeType) table = document.getElementById(table)
            var ctx = {worksheet: name || 'Worksheet', table: table.innerHTML}
            window.location.href = uri + base64(format(template, ctx))
            }
            })()
        //});
    // ]]>
</script>
</html>