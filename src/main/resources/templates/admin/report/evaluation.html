<!DOCTYPE html>
<html lang="en"
      xmlns:="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<meta name="_csrf" th:content="${_csrf.token}"/>
<meta name="_csrf_header" th:content="${_csrf.headerName}"/>
<head th:include="admin/layout :: header">
</head>
<title>Report / Evaluation Report</title>
<body>
<div th:include="admin/layout :: menu"></div>
<div id="content">
    <div id="content-header">
        <div id="breadcrumb" class="lang_indo"> <a href="#" title="Ke Home" class="tip-bottom"><i class="icon-home"></i>Laporan / Evaluasi</a></div>
        <div id="breadcrumb" class="lang_eng" style="display:none"> <a href="#" title="Ke Home" class="tip-bottom"><i class="icon-home"></i>Report / Evaluation</a></div>
    </div>
    <div class="container-fluid">
        <div class="row-fluid">
        	<form id="form-sdgGoals">
        		<div class="row-fluid">
        			<div class="control-group">
	        			<div class="controls">
		        			<select id="daerah" name="daerah" class="input-xlarge">
			                    <option value="0" >-- Pilih Daerah --</option>
			                    <option th:each="f:${listprov}" th:value="${f.id_prov}" th:text="${f.acronym}"></option>
			                </select>
			                <select id="role" name="idrole" class="input-xlarge">
			                    <option value="0" >-- Pilih Role --</option>
			                </select>
			                <select id="periode" name="idmonper" class="input-xlarge">
			                    <option value="0" >-- Pilih Tahun --</option>
			                </select>
	        			</div>
	        		</div>
        		</div>
        		<div class="row-fluid">
        			<div class="control-group">
	        			<div class="controls">
	        				
			                <!-- <select id="goals" name="goals" class="input-xlarge" multiple="multiple">
			                    <option value="0" >-- All --</option>
			                    <option id="optgoals" th:each="f:${listgoals}" th:value="${f.id}" th:text="${f.nm_goals}"></option>
			                </select> -->
	        			</div>
	        		</div>
	        		<div class="control-group">
					    <div class="controls">
							<div class="accordion" id="accordion2">
								<div class="accordion-group">
								    <div class="accordion-heading">
								      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
								        <label class="lang_eng control-label" style="display:none">Choose SDGs Goals/Target</label>
					    				<label class="lang_indo control-label">Pilih Goals/Target SDG</label>
								      </a>
								    </div>
								    <div id="collapseOne" class="accordion-body collapse">
								      <div class="accordion-inner">
								      </div>
								    </div>
								  </div>
							</div>
					    	<!-- <select name="sdg_indicator" id="sdg_indicator" class=" input-block-level"  multiple="multiple" style="width:100%">
					    		<option value="0">--select--</option>
		        				<option th:each="f:${sdgIndicator}" th:value="${f.id_goals}+'---'+${f.id_target}+'---'+${f.id_indicator}" th:text="${f.nm_indicator}"></option>
		        			</select> -->
						    <span class="help-block" id="error_unit"></span>
					    </div>
					  </div>
        		</div>
        		
        	</form>
                
               <!--  <select id="target" name="target" class="form-control">
                    <option value="0" >-- Pilih Target --</option>
                </select>
                <select id="indikator" name="indikator" class="form-control">
                    <option value="0" >-- Pilih Indikator --</option>
				</select> -->
			<div class="pull-right" style="width:auto;">
				<select id="pilgrafik">
						<option value="0">-- Pilih Jenis Grafik --</option>
						<option value="graf1">Grafik Line</option>
						<option value="graf3">Grafik Combination</option>
						<option value="graf4">Grafik Stack</option>
				</select>	
				<a class="btn btn-warning pull-right" href="#" onclick="tableToExcel('indi', 'Report Evaluation')">Excel</a><br/>
			</div>
           
            <div class="widget-box">
                <div class="widget-title">
                    <span class="icon"><i class="icon-tasks"></i></span>
                    <h5 class="lang_indo">Laporan Evaluasi</h5>
                    <h5 class="lang_eng" style="display:none">Evaluation Report</h5>
                </div>
                <div class="widget-content" id="best_prac">
                	<div class="table-responsive">
                    	<div id="indi">
	                	<!-- <div id="divgoals" style="width:100%"></div>
	                	<div id="divtarget" style="width:100%"></div>
                    	<table id="tabatas" class='table table-striped table-bordered'></table><br><br> -->
                    	</div>
                    </div>
                </div>
			</div>
			
            <div class="widget-box">
                <div class="widget-title">
                    <span class="icon"><i class="icon-tasks"></i></span>
                    <h5 class="lang_indo">Chart</h5>
                    <h5 class="lang_eng" style="display:none">Chart</h5>
                </div>
				<div class="row-fluid">
					<div class="span12">
						<div id="dualaxes"></div>
					</div>
				</div>
            </div>			
        </div>
    </div>
</div>
<div class="modal-loading-new"></div>
<style th:inline="text">
			.modal-loading-new {
				opacity: 0.4!important;
				display:    none;
				position:   fixed;
				z-index:    1000;
				top:        0;
				left:       0;
				height:     100%;
				width:      100%;
				background: #333 url([[@{/img/loading.gif}]]) 50% 50% no-repeat;
			}
			/* When the body has the loading class, we turn the scrollbar off with overflow:hidden */
			body.loading {
				overflow: hidden;   
			}
			body.loading .modal-loading-new {
				display: block;
			}
			.select2-results__option{
			    position: relative;
			    margin-left: 10px;
			    list-style: none;
			}
			
			.dotOk {
			  height: 25px;
			  width: 25px;
			  background-color: green;
			  border-radius: 50%;
			  display: inline-block;
			}
			.dotNok {
			  height: 25px;
			  width: 25px;
			  background-color: red;
			  border-radius: 50%;
			  display: inline-block;
			}
		</style>
<div th:include="admin/layout :: footer"></div>
<script th:inline="javascript">
	//$('#goals').select2();

	$('#pilgrafik').prop('disabled', true);

	$("#goals").select2({
        width: "30%",
      });
	
	$("#goals").on("change", function(){
		var val = $(this).val();
		if(val){
			if(val[0]==0){	
				$("#goals").val(null).trigger("change");
			}
		}		 
	});
    var lang = [[${lang}]];
    if (lang == null) lang = "0";
    var name = [[${name}]];
    var role = [[${role}]];
	var xtype = 1;
	var ks, kl = 0;
	var xhasilSts;
	var xidt;
	var xyear;
	var xxt;
	var tth = [];
	var ttr = [];

    $("#welcome").html("Welcome, "+name);

    var token = $("meta[name='_csrf']").attr("content");
    var header = $("meta[name='_csrf_header']").attr("content");
	//Bahasa
    var titleDel = "Anda Yakin";
    var messDel = "Menghapus Data?";
    var buttDel = 'Ya, Hapus data ini!';
    var titleOk	= "Hapus";
    var messOk = "Data berhasil dihapus";
    var messNOk = "Data tidak dapat dihapus";
    var required = "Harus diisi";
    function bhs(cek){
		if(cek){
			$(".lang_indo").show();
    		$(".lang_eng").hide();
    		titleDel = "Anda Yakin";
    		messDel = "Menghapus Data?";
    		buttDel = 'Ya, Hapus data ini!';
    		titleOk	= "Hapus";
	        messOk = "Data berhasil dihapus";
	        messNOk = "Data tidak dapat dihapus";
	        required = "Harus diisi";
    	}else{	    	        
	        $(".lang_indo").hide();
    		$(".lang_eng").show();
    		titleDel = "Are you sure";
    		messDel = "Delete this data?";
    		buttDel = 'Yes, Delete this data!';
    		titleOk	= "Delete";
	        messOk = "Delete successful";
	        messNOk = "Can't delete data";
	        required = "Required";
    	}
    }
    if(lang){
    	bhs(lang=="0");
    }else{
    	bhs($('#fs').is(':checked'));
    }
    $('#fs').on('change', function(e){
    	bhs($(this).is(':checked'));
    	$("#role").trigger("change");
    });
    
    // ********************** Fungsi pilih select option Provinsi **********************
    $("#daerah").on("change", function(){
        var valdaerah = $(this).val();
        if (valdaerah != "0") {
            $.ajax({
                url: urls + "getrolebyidprov",
                type: 'get',
                data: 'id_prov='+valdaerah,
                dataType: 'json',
                cache: false,
                success: function(result) {
                    $("#role").empty();
                    $("#role").append("<option value='0'>-- Pilih Role --</option>");
                    $("#role").append("<option data-cat='all' value='all'>-- ALL --</option>");
                    $("#role").append("<option value='unassign'>Unassign</option>");
                    for (var i=0; i<result.length; i++) {
                        $("#role").append("<option data-cat='"+result[i]['cat_role']+"' value='" + result[i]['id_role'] + "'>" + result[i]['nm_role'] + "</option>");
                    }
                }
            });
            $.ajax({
                type: "GET",
                url: urls+'list-get-option-monper-eva/'+valdaerah,
                success: function (result1) {
                	$("#periode").empty();
                    $("#periode").html('<option value="0" >-- Pilih Tahun --</option>');
                    $("#periode").append('<option value="all" data-id="0" >-- All --</option>');
                    var array1 = result1.content;
                    if (array1 != '') {
                    	for (i in array1) {
                    		$("#periode").append('<option value="all" data-id="'+array1[i][0]+'" >'+array1[i][1]+"-"+array1[i][2]+'</option>');
                        }
                        for (i in array1) {
                            var selisih     = (array1[i][2] - array1[i][1]);
                            var x;
                            for(x=selisih; x>=0; x--){
                                $("#periode").append('<option value="'+array1[i][0]+'###'+(array1[i][1]+x)+'" >'+(array1[i][1]+x)+'</option>');
                            }
                            
                        }
                    }
                }
            });
        }
    });

    // ********************** Fungsi pilih select option Role **********************
    var status;
	var num, num1, num2;
    function callback(response) {
        status = response;
    }
    
    $("#periode").on("change", function(){
    	$("#indi").html("");
		$("#dualaxes").html("");
    	var monper = $("#periode").val().split("###");
    	var id_monper = monper[0];
    	var idrole = $("#role").val();
    	var year   = monper[1];
    	var idprov = $("#daerah").val();
    	if($(this).val()=="all"){	
    		//ambilDataAll(0);
    		id_monper = $(this).find(':selected').data('id');
    		year = 1000;
    	}else{
    		//ambilData(0);	
    	}
    	/* SDG INDICATOR */
        //Indikator SDG untuk mapping
        var cekbok = "";
        $.ajax({
            url: urls + "get-sdg-goals/0",
            data: {'id_role': idrole,'id_monper':id_monper},
            type: 'get',
            dataType: 'json',
            async : false,
            success: function (response) {
        		$('.accordion-inner').html(cekbok);
        		cekbok += '<label style="display:inline-block;white-space:nowrap;">'+
        				'<input class="menu-master sdg-indikator" name="sdg_indicator" id="all-sdg" type="checkbox" style="vertical-align:middle" value="0">&nbsp;&nbsp;&nbsp;'+
                        '<span style="vertical-align:middle">ALL</span>'+
                  '</label><br/>';
            	for (var i = 0; i < response.sdg.length; i++) {
        			var nm_goals;
        			var id_goals=response.sdg[i][0];
        			var kode_goals=response.sdg[i][3];
                	if($("#fs").is(':checked')){
                		nm_goals = response.sdg[i][1];
					}else{
						nm_goals = response.sdg[i][2];
					}
                	cekbok += '<label for="menu'+id_goals +'" style="display:inline-block;white-space:nowrap;">'+
                				'<input class="menu-master sdg-indikator" id="menu'+id_goals+'" name="sdg_indicator" data-id="'+id_goals+'" type="checkbox" style="vertical-align:middle" value="'+id_goals+'---0---0">&nbsp;&nbsp;&nbsp;'+
	                            '<span style="vertical-align:middle">'+kode_goals+" "+nm_goals+'</span>'+
	                      '</label><br/>';
                  $.ajax({
                      url: urls + 'get-sdg-target/0',
                      type: 'get',
                      data: {'id_role':idrole,'id_goals':id_goals,'id_monper':id_monper},
                      dataType: 'json',
                      cache: false,
                      async : false,
                      success: function (result) {
                      	for (var j = 0; j < result.content.length; j++) {
                      		var nm_target;
                      		var id_target=result.content[j][0];
                      		var kode_target=result.content[j][3];
                          	if($("#fs").is(':checked')){
                          		nm_target = result.content[j][1];
      						}else{
      							nm_target = result.content[j][2];
      						}
                          	cekbok += '<label for="submenu'+id_target+'" style="display:inline-block;white-space:nowrap;margin-left:20px">'+
            					'<input data-goals="'+id_goals+'" data-id="'+id_target+'" class="sdg-indikator menu'+id_goals+' menu-slave" id="submenu'+id_target+'" type="checkbox" name="sdg_indicator" style="vertical-align:middle"  value="'+id_goals+'---'+id_target+'---0">&nbsp;&nbsp;&nbsp;'+
	                            '<span style="vertical-align:middle">'+kode_goals+"."+kode_target+" "+nm_target+'</span>'+
	                      '</label><br/>';
	                      
	                      $.ajax({
                              url: urls + 'get-sdg-indicator-utama/0',
                              type: 'get',
                              data: {'id_role':idrole,'id_goals':id_goals,'id_target':id_target,'id_monper':id_monper,'id_prov':idprov},
                              dataType: 'json',
                              cache: false,
                              async : false,
                              success: function (hasil) {
                              	for (var k = 0; k < hasil.content.length; k++) {
                              		var nm_indicator;
                              		var id_indicator=hasil.content[k][0];
                              		var kode_indicator=hasil.content[k][3];
                                  	if($("#fs").is(':checked')){
                                  		nm_indicator = hasil.content[k][1];
              						}else{
              							nm_indicator = hasil.content[k][2];
              						}
                                  	
                                  	cekbok += '<label for="submenu1'+id_indicator+'" style="display:inline-block;white-space:nowrap;margin-left:40px">'+
				                            '<input data-goals="'+id_goals+'" data-id="'+id_target+'" class="sdg-indikator menu'+id_goals+' menu-slave'+id_target+' menu-slave-1 menu-slave-1-'+id_target+'" id="submenu1'+id_indicator+'" type="checkbox" name="sdg_indicator" id="sdg_indicator" style="vertical-align:middle" value="'+id_goals+'---'+id_target+'---'+id_indicator+'">&nbsp;&nbsp;&nbsp;'+
				                            '<span style="vertical-align:middle">'+kode_goals+"."+kode_target+"."+kode_indicator+" "+nm_indicator+'</span>'+
				                      '</label><br/>';
                              	}
                              }
	                      });
                      	}
                      }
                  });
            	}
            }
        });
        cekbok += "<hr/><button type='button' id='filter-sdg' class='btn btn-success'>Apply</button>&nbsp;<button type='button' id='show-chart' class='btn btn-warning'>Chart</button>";
		$('.accordion-inner').append(cekbok);
    	$('.accordion-inner').find('#all-sdg').prop( "checked", true ).trigger("change");
    });
    
    $("#role").on("change", function(){
    	if($("#periode").val()!="0"){
    		$("#periode").trigger("change");	
    	}
    });
    
    $('.accordion-inner').on('click', '#filter-sdg', function(){
    	var sdg_indicator;
		var sdg_indicator_val = [];
        $.each($("input[name='sdg_indicator']:checked"), function(){
        	sdg_indicator_val.push($(this).val());
        });
		if(sdg_indicator_val.length>0){
			sdg_indicator = sdg_indicator_val.toString();
		}else{
			sdg_indicator = '0';
		}
		if($("#periode").val()=="all"){	
    		ambilDataAll(sdg_indicator);
    	}else{
    		ambilData(sdg_indicator);	
    	}
	}).on('click', '#show-chart', function(){
		$('#pilgrafik').prop('selectedIndex', 0);
    	var sdg_indicator;
		var sdg_indicator_val = [];
        $.each($("input[name='sdg_indicator']:checked"), function(){
        	sdg_indicator_val.push($(this).val());
        });
		if(sdg_indicator_val.length>0){
			sdg_indicator = sdg_indicator_val.toString();
		}else{
			sdg_indicator = '0';
		}
		if($("#periode").val()=="all"){	
			console.log('ambilDataAllChart');
    		ambilDataAllChart(sdg_indicator);
    	}else{
			console.log('ambilDataChart');
    		ambilDataChart(sdg_indicator);	
    	}
    }).on('change', '#all-sdg', function(){
       	var status = this.checked;
       	$('.accordion-inner').find("input[name='sdg_indicator']").each(function(){
       		this.checked = status;
       	});
		num = $(".menu-slave-1:checked").size();
		num1 = $(".menu-slave:checked").size();
		num2 = $(".menu-master:checked").size();
		checkNum();
    }).on('click', '.menu-slave-1', function(){
       	var id = $(this).data('id');
       	var goals = $(this).data('goals');
       	if ($(".menu-slave-1-"+id+":checked").length==$(".menu-slave-1-"+id).length) {
               $(".accordion-inner").find('#submenu'+id).prop("checked", false);
           } else {
           	 $(".accordion-inner").find('#submenu'+id).prop("checked", false);
           	 $('.accordion-inner').find('#all-sdg').prop( "checked", false );
           }
       	
       	if ($(".menu"+goals+":checked").length==$(".menu"+goals).length) {
               $(".accordion-inner").find('#menu'+goals).prop("checked", false);
           } else {
           	 $(".accordion-inner").find('#menu'+goals).prop("checked", false);
           	 $('.accordion-inner').find('#all-sdg').prop( "checked", false );
           }
		num = $(".menu-slave-1:checked").size();
		num1 = $(".menu-slave:checked").size();
		num2 = $(".menu-master:checked").size();
		checkNum();
    }).on('click', '.menu-slave', function(){
       	var id = $(this).data('id');
       	var goals = $(this).data('goals');
       	if ($(this).is(":checked")) {
               $(".accordion-inner").find('.menu-slave'+id).prop("checked", false);
           } else {
           	 $(".accordion-inner").find('.menu-slave'+id).prop("checked", false);
           	 $('.accordion-inner').find('#all-sdg').prop( "checked", false );
           }
       	
       	if ($(".menu"+goals+":checked").length==$(".menu"+goals).length) {
               $(".accordion-inner").find('#menu'+goals).prop("checked", false);
           } else {
           	 $(".accordion-inner").find('#menu'+goals).prop("checked", false);
           	 $('.accordion-inner').find('#all-sdg').prop( "checked", false );
           }
		num = $(".menu-slave-1:checked").size();
		num1 = $(".menu-slave:checked").size();
		num2 = $(".menu-master:checked").size();
		checkNum();
    }).on('click', '.menu-master', function(){
       	var id = $(this).data('id');
       	if ($(this).is(":checked")) {
               $(".accordion-inner").find('.menu'+id).prop("checked", true);
           } else {
           	 $(".accordion-inner").find('.menu'+id).prop("checked", false);
           	 $('.accordion-inner').find('#all-sdg').prop( "checked", false );
           }
		num = $(".menu-slave-1:checked").size();
		num1 = $(".menu-slave:checked").size();
		num2 = $(".menu-master:checked").size();
		checkNum();
    });
    
   function checkNum() {
	   console.log('num ' + num);
	   if (num == 1 & num1 == 0 && num2 == 0) {
		   $('#show-chart').prop('disabled', false);
	   } else {
		   $('#show-chart').prop('disabled', true);
		   $('#pilgrafik').prop('disabled', true);
	   }
   }
    
    function ambilData(sdg_indicator){
    	var monper = $("#periode").val().split("###");
    	var id_monper = monper[0];
    	var year   = monper[1];
        var idrole = $("#role").val();
        var idprov = $("#daerah").val();
        var cat = $("#role").find(":selected").data("cat");
        var cekSdg;
        $("#indi").html("");
		$("#dualaxes").html("");
        var goal = 'Nama Capaian';
        var target = "Nama Target";
        var code = 'Kode Indikator';
        var nama = 'Nama Indikator';
        var unit = 'Satuan';
        var sdg_ach = 'Realisasi SDG';
        var sumber = 'Sumber Data';
        var baseline = 'Dasar';
        if($("#fs").is(':checked')){
        	goal = 'Nama Capaian';
        	target = "Nama Target";
        	code = 'Kode Indikator';
        	nama = 'Nama Indikator';
        	unit = 'Satuan';
        	sdg_ach = 'Realisasi SDG';
        	sumber = 'Sumber Data';
        	baseline = 'Dasar';
    	}else{
    		goal = 'Goal Name';
    		target = "Target Name ";
    		code = 'Indicator Code';
    		nama = 'Indicator Name';
    		unit = 'Unit';
    		sdg_ach = 'SDGs Achievements';
    		sumber = 'Data Source';
    		baseline = 'Baseline';
    	}
        $.ajax({
            type: "GET",
            url: urls+'list-get-sts-monper/'+id_monper,
            async:false,
            success: function (result1) {
            	sts = result1.content;
            	}
            });
        $.ajax({
			url: urls + "getentryshowreport",
            type: 'get',
            data: { "id_monper":id_monper},
            dataType: 'json',
            async:false,
            success: function (result) {
            	cekSdg = result.sdg;
            }
        });
        var text="";
        $.ajax({
            //url: urls + 'list-sdgGoals',
            url: urls + "get-sdg-goals/"+sdg_indicator,
            data: {'id_role': idrole,'id_monper':id_monper},
            type: 'get',
            dataType: 'json',
            beforeSend : function(xhr){
            	$('body').addClass("loading"); 
            },
           complete: function(){
            	$('body').removeClass("loading");
            },
            success: function (response) {
            	for (var i = 0; i < response.sdg.length; i++) {
        			var nm_goals;
        			var id_goals=response.sdg[i][0];
        			var kode_goals=response.sdg[i][3];
                	if($("#fs").is(':checked')){
                		nm_goals = response.sdg[i][1];
					}else{
						nm_goals = response.sdg[i][2];
					}
                	if(i>0){text += "<br/>";}
                	text += "<div style=''><h4>"+goal+" : "+kode_goals+". "+nm_goals+"</h4></div>";
                	
                	$.ajax({
                        url: urls + 'get-sdg-target/'+sdg_indicator,
                        type: 'get',
                        data: {'id_role':idrole,'id_goals':id_goals,'id_monper':id_monper},
                        dataType: 'json',
                        cache: false,
                        async : false,
                        success: function (result) {
                        	for (var j = 0; j < result.content.length; j++) {
                        		var nm_target;
                        		var id_target=result.content[j][0];
                        		var kode_target=result.content[j][3];
                            	if($("#fs").is(':checked')){
                            		nm_target = result.content[j][1];
        						}else{
        							nm_target = result.content[j][2];
        						}
                            	if(j>0){text += "<br/>";}
                            	text += "<div style=''><h5>"+target+" : "+kode_goals+'.'+kode_target+". "+nm_target+"</h5></div>";
                        		
                            	var spansdg;
                            	var colspan;
                            	if(sts == 'yearly'){
                            		spansdg = 1;
                            		colspan = 1;
                            	}else{
                            		spansdg = 3;
                            		if(sts == "semesterly"){
                            			colspan = 2;
                            		}else{
                            			colspan = 4;
                            		}
                            	}
                            	text += "<table class='table table-striped table-bordered tabel-sdg' width='100%'><thead>";
                            	text += "<tr style='font-size:80%;border-style:ridge;'>";
                            	text += "<th rowspan='"+spansdg+"' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+code+"</b></th>";
                            	text += "<th rowspan='"+spansdg+"' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+nama+"</b></th>";
                            	text += "<th rowspan='"+spansdg+"' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+sumber+"</b></th>";
                            	text += "<th rowspan='"+spansdg+"' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+unit+"</b></th>";
                            	text += "<th rowspan='"+spansdg+"' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+baseline+"</b></th>";
                            	text += "<th rowspan='"+spansdg+"' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>Target</b></th>";
                            	text += "<th colspan='"+colspan+"' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+sdg_ach+"</b></th>";
                            	text += "<th rowspan='"+spansdg+"' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>Status</b></th>";
                            	text += "</tr>";
                            	if(sts == 'yearly'){
                            		text += "";
                            	}else if(sts == 'semesterly'){
                            		text += "<tr style='font-size:80%;'><th rowspan='2' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>1</b></th><th rowspan='2' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>2</b></th></tr>";
                            	}
                        		else if(sts == 'quarterly'){
                        			text += "<tr style='font-size:80%;'><th rowspan='2' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>1</b></th><th rowspan='2' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>2</b></th><th rowspan='2' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>3</b></th><th rowspan='2' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>4</b></th></tr>";
                            	}
                            	text += "</thead><tbody>";
                            	
                            	$.ajax({
                                    url: urls + 'get-sdg-indicator/'+sdg_indicator,
                                    type: 'get',
                                    data: {'id_role':idrole,'id_goals':id_goals,'id_target':id_target,'year':year,'id_monper':id_monper,'id_prov':idprov},
                                    dataType: 'json',
                                    cache: false,
                                    async : false,
                                    success: function (hasil) {
                                    	for (var k = 0; k < hasil.content.length; k++) {
                                    		var nm_indicator;
                                    		var id_indicator=hasil.content[k][0];
                                    		var kode_indicator=hasil.content[k][3];
                                        	if($("#fs").is(':checked')){
                                        		nm_indicator = hasil.content[k][1];
                    						}else{
                    							nm_indicator = hasil.content[k][2];
                    						}
                                    		text += "<tr >";
                                    		text += "<td style='font-size:80%;border-style:ridge;'>"+kode_goals+'.'+kode_target+'.'+kode_indicator+"</td>";
                                    		text += "<td style='font-size:80%;border-style:ridge;'>"+nm_indicator+"</td>";
                                    		text += "<td style='font-size:80%;border-style:ridge;'>"+(hasil.content[k][17]?hasil.content[k][17]:'')+"</td>";
                                    		text += "<td style='font-size:80%;border-style:ridge;'>"+(hasil.content[k][5]?hasil.content[k][5]:'')+"</td>";
                                    		text += "<td style='font-size:80%;border-style:ridge;'>"+(hasil.content[k][6]?hasil.content[k][6]:'')+"</td>";
                                    		text += "<td style='font-size:80%;border-style:ridge;'>"+(hasil.content[k][7]?hasil.content[k][7]:'')+"</td>";
                                    		
                                    		var nilai1=(hasil.content[k][12])?hasil.content[k][12]:hasil.content[k][8];
                                    		var nilai2=(hasil.content[k][13])?hasil.content[k][13]:hasil.content[k][9];
                                    		var nilai3=(hasil.content[k][14])?hasil.content[k][14]:hasil.content[k][10];
                                    		var nilai4=(hasil.content[k][15])?hasil.content[k][15]:hasil.content[k][11];
                                    		
                                    		var nilai1sdg="";
                                    		var nilai2sdg="";
                                    		var nilai3sdg="";
                                    		var nilai4sdg="";
                                    		for(var isdg=0;isdg<cekSdg.length;isdg++){
                                    			nilai1sdg = (cekSdg[isdg][0]=="1" && cekSdg[isdg][1]==year)?nilai1:(nilai1sdg)?nilai1sdg:"";
                                    			nilai2sdg = (cekSdg[isdg][0]=="2" && cekSdg[isdg][1]==year)?nilai2:(nilai2sdg)?nilai2sdg:"";
                                    			nilai3sdg = (cekSdg[isdg][0]=="3" && cekSdg[isdg][1]==year)?nilai3:(nilai3sdg)?nilai3sdg:"";
                                    			nilai4sdg = (cekSdg[isdg][0]=="4" && cekSdg[isdg][1]==year)?nilai4:(nilai4sdg)?nilai4sdg:"";
                                    		}
                                    		var color_sts="";
                                    		var achive = "";
                                    		if(sts == 'yearly'){
                                    			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai1sdg!=null?nilai1sdg:'')+"</td>";
                                   				if(nilai1sdg){
                                       				achive = nilai1sdg;
                                       			}	
                                    		}else if(sts == 'semesterly'){
                                    			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai1sdg!=null?nilai1sdg:'')+"</td>";
                                    			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai2sdg!=null?nilai2sdg:'')+"</td>";
                                    			if(nilai1sdg || nilai2sdg){
                                    				if(hasil.content[k][16]=="2"){
                                           				achive = (nilai2sdg)?nilai2sdg:nilai1sdg;
                                        			}else{
                                           				achive = nilai1sdg+nilai2sdg;
                                        			}
                                    			}
                                        	}
                                    		else if(sts == 'quarterly'){
                                    			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai1sdg!=null?nilai1sdg:'')+"</td>";
                                    			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai2sdg!=null?nilai2sdg:'')+"</td>";
                                    			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai3sdg!=null?nilai3sdg:'')+"</td>";
                                    			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai4sdg!=null?nilai4sdg:'')+"</td>";
                                    			if(nilai1sdg || nilai2sdg || nilai3sdg || nilai4sdg){
                                    				if(hasil.content[k][16]=="2"){
                                    					if(nilai4sdg){
                                    						achive = nilai4sdg;
                                    					}else if(nilai3sdg){
                                    						achive = nilai3sdg;
                                    					}else if(nilai2sdg){
                                    						achive = nilai2sdg;
                                    					}else{
                                    						achive = nilai1sdg;
                                    					}
                                    				}else{
                                    					achive = nilai1sdg+nilai2sdg+nilai3sdg+nilai4sdg;	
                                    				}
                                    			}
                                        	}
                                    		if(achive){
                                    			if(hasil.content[k][4] == 'Increment'){
                                                    if((achive >= hasil.content[k][7])){
                                                        color_sts = '<span class="dotOk"></span>';
                                                    }else{
                                                        color_sts = '<span class="dotNok"></span>';
                                                    }
                                                }else{
                                                    if((achive <= hasil.content[k][7])){
                                                        color_sts = '<span class="dotOk"></span>';
                                                    }else{
                                                        color_sts = '<span class="dotNok"></span>';
                                                    }
                                                }
                                    		}
                                    		
                                    		text += "<td style='text-align:center;border-style:ridge;'>"+color_sts+"</td></tr>";
                                    		
                                    		$.ajax({
                                                url: urls + 'get-sdg-disaggre',
                                                type: 'get',
                                                data: {'id_role':idrole,'id_goals':id_goals,'id_target':id_target,'year':year,'id_monper':id_monper,'id_indicator':id_indicator,'id_prov':idprov},
                                                dataType: 'json',
                                                cache: false,
                                                async : false,
                                                success: function (hasilnya) {
                                                	if(hasilnya.content.length>0){
                                                		for (var l = 0; l < hasilnya.content.length; l++) {
                                                    		var nm_disaggre;
															var nm_disaggre_detail;
                                                        	if($("#fs").is(':checked')){
                                                        		nm_disaggre = hasilnya.content[l][16];
                                                        		nm_disaggre_detail = hasilnya.content[l][18];
                                    						}else{
                                    							nm_disaggre = hasilnya.content[l][17];
                                    							nm_disaggre_detail = hasilnya.content[l][19];
                                    						}
                                                        	text += "<tr>";
                                                    		text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                    		text += "<td style='font-size:80%;border-style:ridge;'><div style='margin-left:20px'>Disaggregation "+nm_disaggre+" "+nm_disaggre_detail+"</div></td>";
                                                    		text += "<td style='font-size:80%;border-style:ridge;'>"+(hasilnya.content[l][21]?hasilnya.content[l][21]:'')+"</td>";
                                                    		//text += "<td style='font-size:80%;border-style:ridge;'>"+(hasilnya.content[l][5]?hasilnya.content[l][5]:'')+"</td>";
                                                    		//text += "<td style='font-size:80%;border-style:ridge;'>"+(hasilnya.content[l][6]?hasilnya.content[l][6]:'')+"</td>";
                                                    		//text += "<td style='font-size:80%;border-style:ridge;'>"+(hasilnya.content[l][7]?hasilnya.content[l][7]:'')+"</td>";
                                                    		text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                    		text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                    		text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                    		var nilai1Detail=(hasilnya.content[l][12])?hasilnya.content[l][12]:hasilnya.content[l][8];
                                                    		var nilai2Detail=(hasilnya.content[l][13])?hasilnya.content[l][13]:hasilnya.content[l][9];
                                                    		var nilai3Detail=(hasilnya.content[l][14])?hasilnya.content[l][14]:hasilnya.content[l][10];
                                                    		var nilai4Detail=(hasilnya.content[l][15])?hasilnya.content[l][15]:hasilnya.content[l][11];
                                                    		
                                                    		var nilai1sdgDetail="";
                                                    		var nilai2sdgDetail="";
                                                    		var nilai3sdgDetail="";
                                                    		var nilai4sdgDetail="";
                                                    		for(var isdg=0;isdg<cekSdg.length;isdg++){
                                                    			nilai1sdgDetail = (cekSdg[isdg][0]=="1" && cekSdg[isdg][1]==year)?nilai1Detail:(nilai1sdgDetail)?nilai1sdgDetail:"";
                                                    			nilai2sdgDetail = (cekSdg[isdg][0]=="2" && cekSdg[isdg][1]==year)?nilai2Detail:(nilai2sdgDetail)?nilai2sdgDetail:"";
                                                    			nilai3sdgDetail = (cekSdg[isdg][0]=="3" && cekSdg[isdg][1]==year)?nilai3Detail:(nilai3sdgDetail)?nilai3sdgDetail:"";
                                                    			nilai4sdgDetail = (cekSdg[isdg][0]=="4" && cekSdg[isdg][1]==year)?nilai4Detail:(nilai4sdgDetail)?nilai4sdgDetail:"";
                                                    		}
                                                    		var achive = "";
                                                    		var color_sts="";
                                                    		if(sts == 'yearly'){
                                                    			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai1sdgDetail!=null?nilai1sdgDetail:'')+"</td>";
                                                    			if(nilai1sdgDetail){
                                                    				achive = nilai1sdgDetail;
                                                    			}
                                                    		}else if(sts == 'semesterly'){
                                                    			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai1sdgDetail!=null?nilai1sdgDetail:'')+"</td>";
                                                    			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai2sdgDetail!=null?nilai2sdgDetail:'')+"</td>";
                                                    			if(nilai1sdgDetail || nilai2sdgDetail){
                                                    				if(hasil.content[k][20]=="2"){
                                                           				achive = (nilai2sdgDetail)?nilai2sdgDetail:nilai1sdgDetail;
                                                        			}else{
                                                           				achive = nilai1sdgDetail+nilai2sdgDetail;
                                                        			}
                                                    			}
                                                        	}
                                                    		else if(sts == 'quarterly'){
                                                    			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai1sdgDetail!=null?nilai1sdgDetail:'')+"</td>";
                                                    			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai2sdgDetail!=null?nilai2sdgDetail:'')+"</td>";
                                                    			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai3sdgDetail!=null?nilai3sdgDetail:'')+"</td>";
                                                    			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai4sdgDetail!=null?nilai4sdgDetail:'')+"</td>";
                                                    			if(nilai1sdgDetail || nilai2sdgDetail || nilai3sdgDetail || nilai4sdgDetail){
                                                    				if(hasil.content[k][20]=="2"){
                                                    					if(nilai4sdgDetail){
                                                    						achive = nilai4sdgDetail;
                                                    					}else if(nilai3sdgDetail){
                                                    						achive = nilai3sdgDetail;
                                                    					}else if(nilai2sdgDetail){
                                                    						achive = nilai2sdgDetail;
                                                    					}else{
                                                    						achive = nilai1sdgDetail;
                                                    					}
                                                    				}else{
                                                    					achive = nilai1sdgDetail+nilai2sdgDetail+nilai3sdgDetail+nilai4sdgDetail;	
                                                    				}
                                                    			}
                                                        	}
                                                    		if(achive){
                                                    			if(hasilnya.content[l][4] == 'Increment'){
                                                                    if(achive >= hasilnya.content[l][7]){
                                                                        color_sts = '<span class="dotOk"></span>';
                                                                    }else{
                                                                        color_sts = '<span class="dotNok"></span>';
                                                                    }
                                                                }else{
                                                                    if(achive <= hasilnya.content[l][7]){
                                                                        color_sts = '<span class="dotOk"></span>';
                                                                    }else{
                                                                        color_sts = '<span class="dotNok"></span>';
                                                                    }
                                                                }
                                                    		}
                                                    		text += "<td style='text-align:center;border-style:ridge;'></td></tr>";
                                                    	}
                                                	}
                                                }
                                    		});
                                    	}
                                    }
                            	});
                            	text += "</tbody></table>";
                        	}
                        }
                	});
            	}
            	$("#indi").html(text);
				$("#dualaxes").html("");
            }
        });
        
    }
    function ambilDataAll(sdg_indicator){
        var idrole = $("#role").val();
        var idprov = $("#daerah").val();
        var cat = $("#role").find(":selected").data("cat");
        $("#indi").html("");
		$("#dualaxes").html("");
        var goal = 'Nama Capaian';
        var target = "Nama Target";
        var code = 'Kode Indikator';
        var nama = 'Nama Indikator';
        var unit = 'Satuan';
        var sdg_ach = 'Realisasi SDG';
        var sumber = 'Sumber Data';
        var baseline = 'Dasar';
        if($("#fs").is(':checked')){
        	goal = 'Nama Capaian';
        	target = "Nama Target";
        	code = 'Kode Indikator';
        	nama = 'Nama Indikator';
        	unit = 'Satuan';
        	sdg_ach = 'Realisasi SDG';
        	sumber = 'Sumber Data';
        	baseline = 'Dasar';
    	}else{
    		goal = 'Goal Name';
    		target = "Target Name ";
    		code = 'Indicator Code';
    		nama = 'Indicator Name';
    		unit = 'Unit';
    		sdg_ach = 'SDGs Achievements';
    		sumber = 'Data Source';
    		baseline = 'Baseline';
    	}
        var idmonper = $("#periode").find(':selected').data('id');
        $.ajax({
            url: urls + 'list-get-sts-monper-all/'+idprov+'/'+idmonper,
            type: 'get',
            dataType: 'json',
            cache: false,
            async : false,
            success: function (hasil) {
            	hasilSts = hasil;
            }
        });
        
        var text="";
        $.ajax({
            url: urls + "get-sdg-goals/"+sdg_indicator,
            data: {'id_role': idrole,'id_monper':idmonper},
            type: 'get',
            dataType: 'json',
            beforeSend : function(xhr){
            	$('body').addClass("loading"); 
            },
           complete: function(){
            	$('body').removeClass("loading");
            },
            success: function (response) {
            	for (var i = 0; i < response.sdg.length; i++) {
        			var nm_goals;
        			var id_goals=response.sdg[i][0];
        			var kode_goals=response.sdg[i][3];
                	if($("#fs").is(':checked')){
                		nm_goals = response.sdg[i][1];
					}else{
						nm_goals = response.sdg[i][2];
					}
                	if(i>0){text += "<br/>";}
                	text += "<div style='font-size:90%;width:100%;text-align:left;'><h4>"+goal+" : "+kode_goals+". "+nm_goals+"</h4></div>";
                	
                	$.ajax({
                        url: urls + 'get-sdg-target/'+sdg_indicator,
                        type: 'get',
                        data: {'id_role':idrole,'id_goals':id_goals,'id_monper':idmonper},
                        dataType: 'json',
                        cache: false,
                        async : false,
                        success: function (result) {
                        	for (var j = 0; j < result.content.length; j++) {
                        		var nm_target;
                        		var id_target=result.content[j][0];
                        		var kode_target=result.content[j][3];
                            	if($("#fs").is(':checked')){
                            		nm_target = result.content[j][1];
        						}else{
        							nm_target = result.content[j][2];
        						}
                            	if(j>0){text += "<br/>";}
                            	text += "<div style='font-size:90%;width:100%;text-align:left;'><h5>"+target+" : "+kode_goals+'.'+kode_target+". "+nm_target+"</h5></div>";
                        		
                            	var spansdg;
                            	var colspan;
                            	text += "<div style='overflow-x:auto;'><table class='table table-striped table-bordered tabel-sdg' width='100%'><thead>";
                            	text += "<tr style='font-size:80%;'>";
                            	text += "<td rowspan='3' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+code+"</b></td>";
                            	text += "<td rowspan='3' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+nama+"</b></td>";
                            	text += (idmonper!="0")?"<td rowspan='3' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+sumber+"</b></td>":'';
                            	text += "<td rowspan='3' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+unit+"</b></td>";
                            	text += (idmonper!="0")?"<td rowspan='3' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+baseline+"</b></td>":'';
                            	
                            	for(var l=0; l < hasilSts.content.length; l++){
                            		var sts  = hasilSts.content[l][0];
                            		var id_monper = hasilSts.content[l][1];
                            		var start_year = hasilSts.content[l][2];
                            		var end_year = hasilSts.content[l][3];
                            		for(var tahun = start_year ; tahun <= end_year; tahun++){
                            			if(sts == 'yearly'){
                            				colspan = 2;
                                    	}else{
                                    		if(sts == "semesterly"){
                                    			colspan = 3;
                                    		}else{
                                    			colspan = 5;
                                    		}
                                    	}
                            			text += "<td colspan='"+colspan+"' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+tahun+"</b></td>";
                            			//text += "<td rowspan='3' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>TOTAL</b></td>";
                            		}
                            		
                            	}
                            	text += (idmonper!="0")?"<td rowspan='3' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>Status</b></td>":'';
                            	text += "</tr><tr style='font-size:80%;'>";
                            	for(var l=0; l < hasilSts.content.length; l++){
                            		var sts  = hasilSts.content[l][0];
                            		var id_monper = hasilSts.content[l][1];
                            		var start_year = hasilSts.content[l][2];
                            		var end_year = hasilSts.content[l][3];
                            		for(var tahun = start_year ; tahun <= end_year; tahun++){
                            			if(sts == 'yearly'){
                                    		spansdg = 2;
                                    		colspan = 1;
                                    	}else{
                                    		spansdg = 3;
                                    		if(sts == "semesterly"){
                                    			colspan = 2;
                                    		}else{
                                    			colspan = 4;
                                    		}
                                    	}
                            			text += "<td rowspan='2' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>Target</b></td>";
                                    	text += "<td colspan='"+colspan+"' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+sdg_ach+"</td>";
                                    }
                            	}
                            	text += "</tr><tr style='font-size:80%;'>";
                            	for(var l=0; l < hasilSts.content.length; l++){
                            		var sts  = hasilSts.content[l][0];
                            		var id_monper = hasilSts.content[l][1];
                            		var start_year = hasilSts.content[l][2];
                            		var end_year = hasilSts.content[l][3];
                            		for(var tahun = start_year ; tahun <= end_year; tahun++){
                            			if(sts == 'yearly'){
                                    		text += "<td style='text-align:center;vertical-align:middle;border-style:ridge;'><b></b></td>";
                                    	}else if(sts == 'semesterly'){
                                    		text += "<td style='text-align:center;vertical-align:middle;border-style:ridge;'><b>1</b></td><td style='text-align:center;vertical-align:middle;border-style:ridge;'><b>2</b></td>";
                                    	}
                                		else if(sts == 'quarterly'){
                                			text += "<td style='text-align:center;vertical-align:middle;border-style:ridge;'><b>1</b></td><td style='text-align:center;vertical-align:middle;border-style:ridge;'><b>2</b></td><td style='text-align:center;vertical-align:middle;border-style:ridge;'><b>3</b></td><td style='text-align:center;vertical-align:middle;border-style:ridge;'><b>4</b></td>";
                                    	}
                            		}
                            	}
                            	text += "</tr></thead><tbody>";
                            	
                            	$.ajax({
                                    url: urls + 'get-sdg-indicator-utama/'+sdg_indicator,
                                    type: 'get',
                                    data: {'id_role':idrole,'id_goals':id_goals,'id_target':id_target,'id_monper':idmonper,'id_prov':idprov},
                                    dataType: 'json',
                                    cache: false,
                                    async : false,
                                    success: function (hasil) {
                                    	for (var k = 0; k < hasil.content.length; k++) {
                                    		var nm_indicator;
                                    		var id_indicator=hasil.content[k][0];
                                    		var kode_indicator=hasil.content[k][3];
                                        	if($("#fs").is(':checked')){
                                        		nm_indicator = hasil.content[k][1];
                    						}else{
                    							nm_indicator = hasil.content[k][2];
                    						}
                                    		text += "<tr style='border-style:ridge;'>";
                                    		text += "<td style='font-size:80%;border-style:ridge;'>"+kode_goals+'.'+kode_target+'.'+kode_indicator+"</td>";
                                    		text += "<td style='font-size:80%;border-style:ridge;'>"+nm_indicator+"</td>";
                                    		text += (idmonper!="0")?"<td style='font-size:80%;border-style:ridge;'>"+(hasil.content[k][7]?hasil.content[k][7]:'')+"</td>":'';
                                    		text += "<td style='font-size:80%;border-style:ridge;'>"+(hasil.content[k][5]?hasil.content[k][5]:'')+"</td>";
                                    		text += (idmonper!="0")?"<td style='font-size:80%;border-style:ridge;'>"+(hasil.content[k][6]?hasil.content[k][6]:'')+"</td>":'';
                                    		
                                    		for(var l=0; l < hasilSts.content.length; l++){
                                        		var sts  = hasilSts.content[l][0];
                                        		var id_monper = hasilSts.content[l][1];
                                        		var start_year = hasilSts.content[l][2];
                                        		var end_year = hasilSts.content[l][3];
                                        		
                                        		var cekSdg="";
                                                $.ajax({
                                        			url: urls + "getentryshowreport",
                                                    type: 'get',
                                                    data: { "id_monper":id_monper},
                                                    dataType: 'json',
                                                    async:false,
                                                    success: function (result) {
                                                    	cekSdg = result.sdg;
                                                    }
                                                });
                                                var color_sts="";
                                                
                                        		for(var year = start_year; year <= end_year; year++){
                                        			$.ajax({
                                                        url: urls + 'get-sdg-indicator-slave',
                                                        type: 'get',
                                                        data: {'id_role':idrole,'id_indicator':id_indicator,'year':year,'id_monper':id_monper,'id_prov':idprov},
                                                        dataType: 'json',
                                                        cache: false,
                                                        async : false,
                                                        success: function (hasilInd) {
                                                        	var achive = 0;
                                                            var achiveSum = 0;
                                                            var achiveLast = 0;
                                                            var achivehasil;
                                                        	for (var m = 0; m < hasilInd.content.length; m++) {
                                                        		text += "<td style='font-size:80%;border-style:ridge;'>"+(hasilInd.content[m][7]?hasilInd.content[m][7]:'')+"</td>";
                                                        		var nilai1=(hasilInd.content[m][12])?hasilInd.content[m][12]:hasilInd.content[m][8];
                                                        		var nilai2=(hasilInd.content[m][13])?hasilInd.content[m][13]:hasilInd.content[m][9];
                                                        		var nilai3=(hasilInd.content[m][14])?hasilInd.content[m][14]:hasilInd.content[m][10];
                                                        		var nilai4=(hasilInd.content[m][15])?hasilInd.content[m][15]:hasilInd.content[m][11];
                                                        		
                                                        		var nilai1sdg="";
                                                        		var nilai2sdg="";
                                                        		var nilai3sdg="";
                                                        		var nilai4sdg="";
                                                        		for(var isdg=0;isdg<cekSdg.length;isdg++){
                                                        			nilai1sdg = (cekSdg[isdg][0]=="1" && cekSdg[isdg][1]==year)?nilai1:(nilai1sdg)?nilai1sdg:"";
                                                        			nilai2sdg = (cekSdg[isdg][0]=="2" && cekSdg[isdg][1]==year)?nilai2:(nilai2sdg)?nilai2sdg:"";
                                                        			nilai3sdg = (cekSdg[isdg][0]=="3" && cekSdg[isdg][1]==year)?nilai3:(nilai3sdg)?nilai3sdg:"";
                                                        			nilai4sdg = (cekSdg[isdg][0]=="4" && cekSdg[isdg][1]==year)?nilai4:(nilai4sdg)?nilai4sdg:"";
                                                        		}
                                                        		
                                                        		
                                                        		if(sts == 'yearly'){
                                                        			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai1sdg!=null?nilai1sdg:'')+"</td>";
                                                       				if(nilai1sdg!=''){
                                                           				achive = nilai1sdg;
                                                           			}	
                                                       				achiveLast = (achive!=0)?achive:achiveLast;
                                                       				achiveSum += achive;
                                                        		}else if(sts == 'semesterly'){
                                                        			if(nilai1sdg!='' || nilai2sdg!=''){
                                                        				if(hasilInd.content[m][16]=="2"){
                                                               				achive = (nilai2sdg!='')?nilai2sdg:nilai1sdg;
                                                               				achiveLast = (achive!=0)?achive:achiveLast;
                                                            			}else{
                                                               				achive = parseInt(nilai1sdg)+parseInt(nilai2sdg);
                                                               				achiveSum += achive;
                                                            			}
                                                        			}
                                                        			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai1sdg!=null?nilai1sdg:'')+"</td>";
                                                        			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai2sdg!=null?nilai2sdg:'')+"</td>";
                                                        			
                                                            	}else if(sts == 'quarterly'){
                                                        			if(nilai1sdg!='' || nilai2sdg!='' || nilai3sdg!='' || nilai4sdg!=''){
                                                        				if(hasilInd.content[m][16]=="2"){
                                                        					if(nilai4sdg!=''){
                                                        						achive = nilai4sdg;
                                                        					}else if(nilai3sdg!=''){
                                                        						achive = nilai3sdg;
                                                        					}else if(nilai2sdg!=''){
                                                        						achive = nilai2sdg;
                                                        					}else if(nilai1sdg!=''){
                                                        						achive = nilai1sdg;
                                                        					}
                                                        					achiveLast = (achive!=0)?achive:achiveLast;
                                                        				}else{
                                                        					achive = parseInt(nilai1sdg?nilai1sdg:0)+parseInt(nilai2sdg?nilai2sdg:0)+parseInt(nilai3sdg?nilai3sdg:0)+parseInt(nilai4sdg?nilai4sdg:0);	
                                                        					achiveSum += achive;
                                                        				}
                                                        			}
                                                        			
                                                        			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai1sdg!=null?nilai1sdg:'')+"</td>";
                                                        			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai2sdg!=null?nilai2sdg:'')+"</td>";
                                                        			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai3sdg!=null?nilai3sdg:'')+"</td>";
                                                        			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai4sdg!=null?nilai4sdg:'')+"</td>";
                                                        			
                                                            	}
                                                        		
                                                        		if(hasilInd.content[m][16]=="2"){
                                                        			achivehasil = achiveLast;
                                                        		}else{
                                                        			achivehasil = achiveSum;
                                                        		}
                                                        		if(achivehasil){
                                                        			if(hasilInd.content[m][4] == 'Increment'){
                                                                        if((achivehasil >= hasilInd.content[m][7])){
                                                                            color_sts = '<span class="dotOk"></span>';
                                                                        }else{
                                                                            color_sts = '<span class="dotNok"></span>';
                                                                        }
                                                                    }else{
                                                                        if((achivehasil <= hasilInd.content[m][7])){
                                                                            color_sts = '<span class="dotOk"></span>';
                                                                        }else{
                                                                            color_sts = '<span class="dotNok"></span>';
                                                                        }
                                                                    }
                                                        		}                                                        		
                                                        	}
                                                        	//text += "<td style='text-align:center;border-style:ridge;'>"+achivehasil+"</td>";
                                                        }
                                        			});
                                        			
                                        		}
                                        		
                                        		
                                        	}
                                    		text += (idmonper!="0")?"<td style='text-align:center;border-style:ridge;'>"+color_sts+"</td></tr>":'</tr>';
                                    		
                                    		
                                    		$.ajax({
                                                url: urls + 'get-sdg-disaggre-utama',
                                                type: 'get',
                                                data: {'id_role':idrole,'id_goals':id_goals,'id_target':id_target,'year':year,'id_monper':id_monper,'id_indicator':id_indicator,'id_prov':idprov},
                                                dataType: 'json',
                                                cache: false,
                                                async : false,
                                                success: function (hasilnya) {
                                                	if(hasilnya.content.length>0){
                                                		for (var l = 0; l < hasilnya.content.length; l++) {
                                                    		var nm_disaggre;
															var nm_disaggre_detail;
                                                        	if($("#fs").is(':checked')){
                                                        		nm_disaggre = hasilnya.content[l][16];
                                                        		nm_disaggre_detail = hasilnya.content[l][18];
                                    						}else{
                                    							nm_disaggre = hasilnya.content[l][17];
                                    							nm_disaggre_detail = hasilnya.content[l][19];
                                    						}
                                                        	text += "<tr style='border-style:ridge;'>";
                                                    		text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                    		text += "<td style='font-size:80%;border-style:ridge;'><div style='margin-left:20px'>Disaggregation "+nm_disaggre+" "+nm_disaggre_detail+"</div></td>";
                                                    		text += (idmonper!="0")?"<td style='font-size:80%;border-style:ridge;'>"+(hasilnya.content[l][23]?hasilnya.content[l][23]:'')+"</td>":'';
                                                    		//text += "<td style='font-size:80%;border-style:ridge;'>"+(hasilnya.content[l][5]?hasilnya.content[l][5]:'')+"</td>";
                                                    		//text += (idmonper!="0")?"<td style='font-size:80%;border-style:ridge;'>"+(hasilnya.content[l][6]?hasilnya.content[l][6]:'')+"</td>":'';
                                                    		
                                                    		text += (idmonper!="0")?"<td style='font-size:80%;border-style:ridge;'></td>":'';
                                                    		text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                    		
                                                    		for(var z=0; z < hasilSts.content.length; z++){
                                                        		var sts  = hasilSts.content[z][0];
                                                        		var id_monper = hasilSts.content[z][1];
                                                        		var start_year = hasilSts.content[z][2];
                                                        		var end_year = hasilSts.content[z][3];
                                                        		
                                                        		var cekSdg="";
                                                                $.ajax({
                                                        			url: urls + "getentryshowreport",
                                                                    type: 'get',
                                                                    data: { "id_monper":id_monper},
                                                                    dataType: 'json',
                                                                    async:false,
                                                                    success: function (result) {
                                                                    	cekSdg = result.sdg;
                                                                    }
                                                                });

                                                                var color_sts="";
                                                                var achive = "";
                                                        		for(var year = start_year; year <= end_year; year++){
                                                        			$.ajax({
                                                                        url: urls + 'get-sdg-disaggre-slave',
                                                                        type: 'get',
                                                                        data: {'id_role':idrole,'id_goals':id_goals,'id_target':id_target,'year':year,'id_monper':id_monper,'id_indicator':id_indicator,'id_dis':hasilnya.content[l][21],'id_dis_detail':hasilnya.content[l][22],'id_prov':idprov},
                                                                        dataType: 'json',
                                                                        cache: false,
                                                                        async : false,
                                                                        success: function (hasildis) {
                                                                        	var achive = 0;
                                                                            var achiveSum = 0;
                                                                            var achiveLast = 0;
                                                                            var achivehasil;
                                                                        	if(hasildis.content.length>0){
                                                                        		for (var n = 0; n < hasildis.content.length; n++) {
                                                                            		//text += "<td>"+(hasildis.content[n][7]?hasildis.content[n][7]:'')+"</td>";
                                                                            		text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                            		var nilai1Detail=(hasildis.content[n][12])?hasildis.content[n][12]:hasildis.content[n][8];
                                                                            		var nilai2Detail=(hasildis.content[n][13])?hasildis.content[n][13]:hasildis.content[n][9];
                                                                            		var nilai3Detail=(hasildis.content[n][14])?hasildis.content[n][14]:hasildis.content[n][10];
                                                                            		var nilai4Detail=(hasildis.content[n][15])?hasildis.content[n][15]:hasildis.content[n][11];
                                                                            		console.log(nilai1Detail)
                                                                            		var nilai1sdgDetail="";
                                                                            		var nilai2sdgDetail="";
                                                                            		var nilai3sdgDetail="";
                                                                            		var nilai4sdgDetail="";
                                                                            		for(var isdg=0;isdg<cekSdg.length;isdg++){
                                                                            			nilai1sdgDetail = (cekSdg[isdg][0]=="1" && cekSdg[isdg][1]==year)?nilai1Detail:(nilai1sdgDetail)?nilai1sdgDetail:"";
                                                                            			nilai2sdgDetail = (cekSdg[isdg][0]=="2" && cekSdg[isdg][1]==year)?nilai2Detail:(nilai2sdgDetail)?nilai2sdgDetail:"";
                                                                            			nilai3sdgDetail = (cekSdg[isdg][0]=="3" && cekSdg[isdg][1]==year)?nilai3Detail:(nilai3sdgDetail)?nilai3sdgDetail:"";
                                                                            			nilai4sdgDetail = (cekSdg[isdg][0]=="4" && cekSdg[isdg][1]==year)?nilai4Detail:(nilai4sdgDetail)?nilai4sdgDetail:"";
                                                                            		}
                                                                            		
                                                                            		if(sts == 'yearly'){
                                                                            			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai1sdgDetail!=null?nilai1sdgDetail:'')+"</td>";
                                                                            			if(nilai1sdgDetail!=''){
                                                                            				achive = nilai1sdgDetail?nilai1sdgDetail:0;
                                                                            			}
                                                                            			achiveLast = (achive!=0)?achive:achiveLast;
                                                                            			achiveSum += achive;
                                                                            		}else if(sts == 'semesterly'){
                                                                            			
                                                                            			if(nilai1sdgDetail!='' || nilai2sdgDetail!=''){
                                                                            				if(hasildis.content[n][20]=="2"){
                                                                                   				achive = (nilai2sdgDetail)?nilai2sdgDetail:nilai1sdgDetail;
                                                                                   				achiveLast = (achive!=0)?achive:achiveLast;
                                                                                			}else{
                                                                                   				achive = parseInt(nilai1sdgDetail?nilai1sdgDetail:0)+parseInt(nilai2sdgDetail?nilai2sdgDetail:0);
                                                                                   				achiveSum += achive;
                                                                                			}
                                                                            			}
                                                                            			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai1sdgDetail!=null?nilai1sdgDetail:'')+"</td>";
                                                                            			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai2sdgDetail!=null?nilai2sdgDetail:'')+"</td>";
                                                                                	}
                                                                            		else if(sts == 'quarterly'){
                                                                            			if(nilai1sdgDetail!='' || nilai2sdgDetail!='' || nilai3sdgDetail!='' || nilai4sdgDetail!=''){
                                                                            				if(hasildis.content[n][20]=="2"){
                                                                            					if(nilai4sdgDetail!=''){
                                                                            						achive = nilai4sdgDetail;
                                                                            					}else if(nilai3sdgDetail!=''){
                                                                            						achive = nilai3sdgDetail;
                                                                            					}else if(nilai2sdgDetail!=''){
                                                                            						achive = nilai2sdgDetail;
                                                                            					}else if(nilai1sdgDetail!=''){
                                                                            						achive = nilai1sdgDetail;
                                                                            					}
                                                                            					achiveLast = (achive!=0)?achive:achiveLast;
                                                                            				}else{
                                                                            					achive = parseInt(nilai1sdgDetail?nilai1sdgDetail:0)+parseInt(nilai2sdgDetail?nilai2sdgDetail:0)+parseInt(nilai3sdgDetail?nilai3sdgDetail:0)+parseInt(nilai4sdgDetail?nilai4sdgDetail:0);	
                                                                            					achiveSum += achive;
                                                                            				}
                                                                            			}
                                                                            			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai1sdgDetail!=null?nilai1sdgDetail:'')+"</td>";
                                                                            			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai2sdgDetail!=null?nilai2sdgDetail:'')+"</td>";
                                                                            			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai3sdgDetail!=null?nilai3sdgDetail:'')+"</td>";
                                                                            			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai4sdgDetail!=null?nilai4sdgDetail:'')+"</td>";
                                                                                	}
                                                                            		if(hasildis.content[n][20]=="2"){
                                                                            			achivehasil = achiveLast;
                                                                            		}else{
                                                                            			achivehasil = achiveSum;
                                                                            		}
                                                                            		if(achivehasil){
                                                                            			if(hasildis.content[n][4] == 'Increment'){
                                                                                            if(achivehasil >= hasildis.content[n][7]){
                                                                                                color_sts = '<span class="dotOk"></span>';
                                                                                            }else{
                                                                                                color_sts = '<span class="dotNok"></span>';
                                                                                            }
                                                                                        }else{
                                                                                            if(achivehasil <= hasildis.content[n][7]){
                                                                                                color_sts = '<span class="dotOk"></span>';
                                                                                            }else{
                                                                                                color_sts = '<span class="dotNok"></span>';
                                                                                            }
                                                                                        }
                                                                            		}
                                                                            	}
                                                                        	}else{
                                                                        		text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                        		if(sts == 'yearly'){
                                                                        			text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                        		}else if(sts == 'semesterly'){
                                                                        			text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                        			text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                            	}
                                                                        		else if(sts == 'quarterly'){
                                                                        			text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                        			text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                        			text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                        			text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                            	}
                                                                        	}
                                                                        	//text += "<td style='text-align:center;border-style:ridge;' >"+achivehasil+"</td>";
                                                                        }
                                                        			});
                                                        			
                                                        		}
                                                    		}
                                                    		text += (idmonper!="0")?"<td style='text-align:center;border-style:ridge;' ></td></tr>":'</tr>';
                                                    	}
                                                	}
                                                }
                                    		});
                                    	}
                                    }
                            	}); 
                            	text += "</tbody></table></div>";
                        	}
                        }
                	});
            	}
            	$("#indi").html(text);
				$("#dualaxes").html("");
				$('#pilgrafik').prop('disabled', false);
            }
        });



		
        
        /* $('#indi').find(".tabel-sdg").DataTable({
    		"scrollX": true,
    		"searching": false,
    		"paging": false,
    		"ordering": false,
            "info":     false
   		}); */
    }


    function ambilDataChart(sdg_indicator){
		xtype = 2;
		kl = 0;
		var ser  = [];
    	var monper = $("#periode").val().split("###");
    	var id_monper = monper[0];
    	var year   = monper[1];
		xyear = year;
        var idrole = $("#role").val();
        var idprov = $("#daerah").val();
        var cat = $("#role").find(":selected").data("cat");
        var sts;
        var cekSdg;
        $("#indi").html("");
		$("#dualaxes").html("");
        var goal = 'Nama Capaian';
        var target = "Nama Target";
        var code = 'Kode Indikator';
        var nama = 'Nama Indikator';
        var unit = 'Satuan';
        var sdg_ach = 'Realisasi SDG';
        var sumber = 'Sumber Data';
        var baseline = 'Dasar';
        if($("#fs").is(':checked')){
        	goal = 'Nama Capaian';
        	target = "Nama Target";
        	code = 'Kode Indikator';
        	nama = 'Nama Indikator';
        	unit = 'Satuan';
        	sdg_ach = 'Realisasi SDG';
        	sumber = 'Sumber Data';
        	baseline = 'Dasar';
    	}else{
    		goal = 'Goal Name';
    		target = "Target Name ";
    		code = 'Indicator Code';
    		nama = 'Indicator Name';
    		unit = 'Unit';
    		sdg_ach = 'SDGs Achievements';
    		sumber = 'Data Source';
    		baseline = 'Baseline';
    	}
        $.ajax({
            type: "GET",
            url: urls+'list-get-sts-monper/'+id_monper,
            async:false,
            success: function (result1) {
            	sts = result1.content;
            	}
            });
        $.ajax({
			url: urls + "getentryshowreport",
            type: 'get',
            data: { "id_monper":id_monper},
            dataType: 'json',
            async:false,
            success: function (result) {
            	cekSdg = result.sdg;
            }
        });
        var text="";
        $.ajax({
            //url: urls + 'list-sdgGoals',
            url: urls + "get-sdg-goals/"+sdg_indicator,
            data: {'id_role': idrole,'id_monper':id_monper},
            type: 'get',
            dataType: 'json',
            beforeSend : function(xhr){
            	$('body').addClass("loading"); 
            },
           complete: function(){
            	$('body').removeClass("loading");
            },
            success: function (response) {
            	for (var i = 0; i < response.sdg.length; i++) {
        			var nm_goals;
        			var id_goals=response.sdg[i][0];
        			var kode_goals=response.sdg[i][3];
                	if($("#fs").is(':checked')){
                		nm_goals = response.sdg[i][1];
					}else{
						nm_goals = response.sdg[i][2];
					}
                	if(i>0){text += "<br/>";}
                	text += "<div style=''><h4>"+goal+" : "+kode_goals+". "+nm_goals+"</h4></div>";
                	
                	$.ajax({
                        url: urls + 'get-sdg-target/'+sdg_indicator,
                        type: 'get',
                        data: {'id_role':idrole,'id_goals':id_goals,'id_monper':id_monper},
                        dataType: 'json',
                        cache: false,
                        async : false,
                        success: function (result) {
                        	for (var j = 0; j < result.content.length; j++) {
                        		var nm_target;
                        		var id_target=result.content[j][0];
                        		var kode_target=result.content[j][3];
                            	if($("#fs").is(':checked')){
                            		nm_target = result.content[j][1];
        						}else{
        							nm_target = result.content[j][2];
        						}
                            	if(j>0){text += "<br/>";}
                            	text += "<div style=''><h5>"+target+" : "+kode_goals+'.'+kode_target+". "+nm_target+"</h5></div>";
                        		
                            	var spansdg;
                            	var colspan;
                            	if(sts == 'yearly'){
                            		spansdg = 1;
                            		colspan = 1;
                            	}else{
                            		spansdg = 3;
                            		if(sts == "semesterly"){
                            			colspan = 2;
                            		}else{
                            			colspan = 4;
                            		}
                            	}
                            	text += "<table class='table table-striped table-bordered tabel-sdg' width='100%'><thead>";
                            	text += "<tr style='font-size:80%;border-style:ridge;'>";
                            	text += "<th rowspan='"+spansdg+"' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+code+"</b></th>";
                            	text += "<th rowspan='"+spansdg+"' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+nama+"</b></th>";
                            	text += "<th rowspan='"+spansdg+"' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+sumber+"</b></th>";
                            	text += "<th rowspan='"+spansdg+"' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+unit+"</b></th>";
                            	text += "<th rowspan='"+spansdg+"' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+baseline+"</b></th>";
                            	text += "<th rowspan='"+spansdg+"' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>Target</b></th>";
                            	text += "<th colspan='"+colspan+"' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+sdg_ach+"</b></th>";
                            	text += "<th rowspan='"+spansdg+"' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>Status</b></th>";
                            	text += "</tr>";
                            	if(sts == 'yearly'){
                            		text += "";
                            	}else if(sts == 'semesterly'){
                            		text += "<tr style='font-size:80%;'><th rowspan='2' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>1</b></th><th rowspan='2' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>2</b></th></tr>";
                            	}
                        		else if(sts == 'quarterly'){
                        			text += "<tr style='font-size:80%;'><th rowspan='2' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>1</b></th><th rowspan='2' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>2</b></th><th rowspan='2' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>3</b></th><th rowspan='2' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>4</b></th></tr>";
                            	}
                            	text += "</thead><tbody>";
                            	
                            	$.ajax({
                                    url: urls + 'get-sdg-indicator/'+sdg_indicator,
                                    type: 'get',
                                    data: {'id_role':idrole,'id_goals':id_goals,'id_target':id_target,'year':year,'id_monper':id_monper,'id_prov':idprov},
                                    dataType: 'json',
                                    cache: false,
                                    async : false,
                                    success: function (hasil) {
                                    	for (var k = 0; k < hasil.content.length; k++) {
                                    		var nm_indicator;
                                    		var id_indicator=hasil.content[k][0];
                                    		var kode_indicator=hasil.content[k][3];
                                        	if($("#fs").is(':checked')){
                                        		nm_indicator = hasil.content[k][1];
                    						}else{
                    							nm_indicator = hasil.content[k][2];
                    						}
                                    		text += "<tr >";
                                    		text += "<td style='font-size:80%;border-style:ridge;'>"+kode_goals+'.'+kode_target+'.'+kode_indicator+"</td>";
                                    		text += "<td style='font-size:80%;border-style:ridge;' id='nm'>"+nm_indicator+"</td>";
                                    		text += "<td style='font-size:80%;border-style:ridge;'>"+(hasil.content[k][17]?hasil.content[k][17]:'')+"</td>";
                                    		text += "<td style='font-size:80%;border-style:ridge;'>"+(hasil.content[k][5]?hasil.content[k][5]:'')+"</td>";
                                    		text += "<td style='font-size:80%;border-style:ridge;'>"+(hasil.content[k][6]?hasil.content[k][6]:'')+"</td>";
                                    		text += "<td style='font-size:80%;border-style:ridge;' id='tar'>"+(hasil.content[k][7]?hasil.content[k][7]:'')+"</td>";
                                    		
                                    		var nilai1=(hasil.content[k][12])?hasil.content[k][12]:hasil.content[k][8];
                                    		var nilai2=(hasil.content[k][13])?hasil.content[k][13]:hasil.content[k][9];
                                    		var nilai3=(hasil.content[k][14])?hasil.content[k][14]:hasil.content[k][10];
                                    		var nilai4=(hasil.content[k][15])?hasil.content[k][15]:hasil.content[k][11];
                                    		
                                    		var nilai1sdg="";
                                    		var nilai2sdg="";
                                    		var nilai3sdg="";
                                    		var nilai4sdg="";
                                    		for(var isdg=0;isdg<cekSdg.length;isdg++){
                                    			nilai1sdg = (cekSdg[isdg][0]=="1" && cekSdg[isdg][1]==year)?nilai1:(nilai1sdg)?nilai1sdg:"";
                                    			nilai2sdg = (cekSdg[isdg][0]=="2" && cekSdg[isdg][1]==year)?nilai2:(nilai2sdg)?nilai2sdg:"";
                                    			nilai3sdg = (cekSdg[isdg][0]=="3" && cekSdg[isdg][1]==year)?nilai3:(nilai3sdg)?nilai3sdg:"";
                                    			nilai4sdg = (cekSdg[isdg][0]=="4" && cekSdg[isdg][1]==year)?nilai4:(nilai4sdg)?nilai4sdg:"";
                                    		}
                                    		var color_sts="";
                                    		var achive = "";
                                    		if(sts == 'yearly'){
                                    			text += "<td style='font-size:80%;border-style:ridge;' id='rel0'>"+(nilai1sdg!=null?nilai1sdg:'')+"</td>";
                                   				if(nilai1sdg){
                                       				achive = nilai1sdg;
                                       			}	
                                    		}else if(sts == 'semesterly'){
                                    			text += "<td style='font-size:80%;border-style:ridge;' id='rel0'>"+(nilai1sdg!=null?nilai1sdg:'')+"</td>";
                                    			text += "<td style='font-size:80%;border-style:ridge;' id='rel1'>"+(nilai2sdg!=null?nilai2sdg:'')+"</td>";
                                    			if(nilai1sdg || nilai2sdg){
                                    				if(hasil.content[k][16]=="2"){
                                           				achive = (nilai2sdg)?nilai2sdg:nilai1sdg;
                                        			}else{
                                           				achive = nilai1sdg+nilai2sdg;
                                        			}
                                    			}
                                        	}
                                    		else if(sts == 'quarterly'){
                                    			text += "<td style='font-size:80%;border-style:ridge;' id='rel0'>"+(nilai1sdg!=null?nilai1sdg:'')+"</td>";
                                    			text += "<td style='font-size:80%;border-style:ridge;' id='rel1'>"+(nilai2sdg!=null?nilai2sdg:'')+"</td>";
                                    			text += "<td style='font-size:80%;border-style:ridge;' id='rel2'>"+(nilai3sdg!=null?nilai3sdg:'')+"</td>";
                                    			text += "<td style='font-size:80%;border-style:ridge;' id='rel3'>"+(nilai4sdg!=null?nilai4sdg:'')+"</td>";
                                    			if(nilai1sdg || nilai2sdg || nilai3sdg || nilai4sdg){
                                    				if(hasil.content[k][16]=="2"){
                                    					if(nilai4sdg){
                                    						achive = nilai4sdg;
                                    					}else if(nilai3sdg){
                                    						achive = nilai3sdg;
                                    					}else if(nilai2sdg){
                                    						achive = nilai2sdg;
                                    					}else{
                                    						achive = nilai1sdg;
                                    					}
                                    				}else{
                                    					achive = nilai1sdg+nilai2sdg+nilai3sdg+nilai4sdg;	
                                    				}
                                    			}
                                        	}
                                    		if(achive){
                                    			if(hasil.content[k][4] == 'Increment'){
                                                    if((achive >= hasil.content[k][7])){
                                                        color_sts = '<span class="dotOk"></span>';
                                                    }else{
                                                        color_sts = '<span class="dotNok"></span>';
                                                    }
                                                }else{
                                                    if((achive <= hasil.content[k][7])){
                                                        color_sts = '<span class="dotOk"></span>';
                                                    }else{
                                                        color_sts = '<span class="dotNok"></span>';
                                                    }
                                                }
                                    		}
                                    		
                                    		text += "<td style='text-align:center;border-style:ridge;'>"+color_sts+"</td></tr>";
                                    		
                                    		$.ajax({
                                                url: urls + 'get-sdg-disaggre',
                                                type: 'get',
                                                data: {'id_role':idrole,'id_goals':id_goals,'id_target':id_target,'year':year,'id_monper':id_monper,'id_indicator':id_indicator,'id_prov':idprov},
                                                dataType: 'json',
                                                cache: false,
                                                async : false,
                                                success: function (hasilnya) {
                                                	if(hasilnya.content.length>0){
                                                		for (var l = 0; l < hasilnya.content.length; l++) {
                                                    		var nm_disaggre;
															var nm_disaggre_detail;
                                                        	if($("#fs").is(':checked')){
                                                        		nm_disaggre = hasilnya.content[l][16];
                                                        		nm_disaggre_detail = hasilnya.content[l][18];
                                    						}else{
                                    							nm_disaggre = hasilnya.content[l][17];
                                    							nm_disaggre_detail = hasilnya.content[l][19];
                                    						}
                                                        	text += "<tr>";
                                                    		text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                    		text += "<td style='font-size:80%;border-style:ridge;'><div style='margin-left:20px'>Disaggregation "+nm_disaggre+" "+nm_disaggre_detail+"</div></td>";
                                                    		text += "<td style='font-size:80%;border-style:ridge;'>"+(hasilnya.content[l][21]?hasilnya.content[l][21]:'')+"</td>";
                                                    		//text += "<td style='font-size:80%;border-style:ridge;'>"+(hasilnya.content[l][5]?hasilnya.content[l][5]:'')+"</td>";
                                                    		//text += "<td style='font-size:80%;border-style:ridge;'>"+(hasilnya.content[l][6]?hasilnya.content[l][6]:'')+"</td>";
                                                    		//text += "<td style='font-size:80%;border-style:ridge;'>"+(hasilnya.content[l][7]?hasilnya.content[l][7]:'')+"</td>";
                                                    		text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                    		text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                    		text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                    		var nilai1Detail=(hasilnya.content[l][12])?hasilnya.content[l][12]:hasilnya.content[l][8];
                                                    		var nilai2Detail=(hasilnya.content[l][13])?hasilnya.content[l][13]:hasilnya.content[l][9];
                                                    		var nilai3Detail=(hasilnya.content[l][14])?hasilnya.content[l][14]:hasilnya.content[l][10];
                                                    		var nilai4Detail=(hasilnya.content[l][15])?hasilnya.content[l][15]:hasilnya.content[l][11];
                                                    		
                                                    		var nilai1sdgDetail="";
                                                    		var nilai2sdgDetail="";
                                                    		var nilai3sdgDetail="";
                                                    		var nilai4sdgDetail="";
                                                    		for(var isdg=0;isdg<cekSdg.length;isdg++){
                                                    			nilai1sdgDetail = (cekSdg[isdg][0]=="1" && cekSdg[isdg][1]==year)?nilai1Detail:(nilai1sdgDetail)?nilai1sdgDetail:"";
                                                    			nilai2sdgDetail = (cekSdg[isdg][0]=="2" && cekSdg[isdg][1]==year)?nilai2Detail:(nilai2sdgDetail)?nilai2sdgDetail:"";
                                                    			nilai3sdgDetail = (cekSdg[isdg][0]=="3" && cekSdg[isdg][1]==year)?nilai3Detail:(nilai3sdgDetail)?nilai3sdgDetail:"";
                                                    			nilai4sdgDetail = (cekSdg[isdg][0]=="4" && cekSdg[isdg][1]==year)?nilai4Detail:(nilai4sdgDetail)?nilai4sdgDetail:"";
                                                    		}
                                                    		var achive = "";
                                                    		var color_sts="";
                                                    		if(sts == 'yearly'){
                                                    			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai1sdgDetail!=null?nilai1sdgDetail:'')+"</td>";
                                                    			if(nilai1sdgDetail){
                                                    				achive = nilai1sdgDetail;
                                                    			}
                                                    		}else if(sts == 'semesterly'){
                                                    			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai1sdgDetail!=null?nilai1sdgDetail:'')+"</td>";
                                                    			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai2sdgDetail!=null?nilai2sdgDetail:'')+"</td>";
                                                    			if(nilai1sdgDetail || nilai2sdgDetail){
                                                    				if(hasil.content[k][20]=="2"){
                                                           				achive = (nilai2sdgDetail)?nilai2sdgDetail:nilai1sdgDetail;
                                                        			}else{
                                                           				achive = nilai1sdgDetail+nilai2sdgDetail;
                                                        			}
                                                    			}
                                                        	}
                                                    		else if(sts == 'quarterly'){
                                                    			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai1sdgDetail!=null?nilai1sdgDetail:'')+"</td>";
                                                    			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai2sdgDetail!=null?nilai2sdgDetail:'')+"</td>";
                                                    			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai3sdgDetail!=null?nilai3sdgDetail:'')+"</td>";
                                                    			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai4sdgDetail!=null?nilai4sdgDetail:'')+"</td>";
                                                    			if(nilai1sdgDetail || nilai2sdgDetail || nilai3sdgDetail || nilai4sdgDetail){
                                                    				if(hasil.content[k][20]=="2"){
                                                    					if(nilai4sdgDetail){
                                                    						achive = nilai4sdgDetail;
                                                    					}else if(nilai3sdgDetail){
                                                    						achive = nilai3sdgDetail;
                                                    					}else if(nilai2sdgDetail){
                                                    						achive = nilai2sdgDetail;
                                                    					}else{
                                                    						achive = nilai1sdgDetail;
                                                    					}
                                                    				}else{
                                                    					achive = nilai1sdgDetail+nilai2sdgDetail+nilai3sdgDetail+nilai4sdgDetail;	
                                                    				}
                                                    			}
                                                        	}
                                                    		if(achive){
                                                    			if(hasilnya.content[l][4] == 'Increment'){
                                                                    if(achive >= hasilnya.content[l][7]){
                                                                        color_sts = '<span class="dotOk"></span>';
                                                                    }else{
                                                                        color_sts = '<span class="dotNok"></span>';
                                                                    }
                                                                }else{
                                                                    if(achive <= hasilnya.content[l][7]){
                                                                        color_sts = '<span class="dotOk"></span>';
                                                                    }else{
                                                                        color_sts = '<span class="dotNok"></span>';
                                                                    }
                                                                }
                                                    		}
                                                    		text += "<td style='text-align:center;border-style:ridge;'></td></tr>";
                                                    	}
                                                	}
                                                }
                                    		});
                                    	}
                                    }
                            	});
                            	text += "</tbody></table>";
                        	}
                        }
                	});
            	}
            	$("#indi").html(text);
				$("#dualaxes").html("");
				$('#pilgrafik').prop('disabled', false);
            }
        });
    }

	function a(year, pil_graf) {
		console.log('func a' + year);
		var ser = [];
		var target = [ 
				parseInt($('#tar').text(), 10),
				null,

            ];	

        ser.push(
        	{
				name: 'Target',
				data: target,
				type:'column',
        	},
		);				

		var rel0 = [ 
				null,
				parseInt($('#rel0').text(), 10),

            ];	

			if (pil_graf == 'graf1') {
				ser.push(
					{
						name: 'Realisasi Q1',
						data: rel0,
						type:'spline',
					},
				);						
			} else if (pil_graf == 'graf4') {
				ser.push(
					{
						name: 'Realisasi Q1',
						data: rel0,
						type:'column',
					},
				);						
			} else {
				ser.push(
					{
						name: 'Realisasi Q1',
						data: rel0,
						type:'column',
					},
					{
						name: 'Realisasi Q1',
						data: rel0,
						type:'spline',
					},					
				);						
			}

		var rel1 = [ 
				null,
				parseInt($('#rel1').text(), 10),

            ];	

			if (pil_graf == 'graf1') {
				ser.push(
					{
						name: 'Realisasi Q2',
						data: rel1,
						type:'spline',
					},
				);								
			} else if (pil_graf == 'graf4') {
				ser.push(
					{
						name: 'Realisasi Q2',
						data: rel1,
						type:'column',
					},
				);								
			} else {
				ser.push(
					{
						name: 'Realisasi Q2',
						data: rel1,
						type:'column',
					},
					{
						name: 'Realisasi Q2',
						data: rel1,
						type:'spline',
					},					
				);								
			}

		var rel2 = [ 
				null,
				parseInt($('#rel2').text(), 10),

            ];	

			if (pil_graf == 'graf1') {
				ser.push(
					{
						name: 'Realisasi Q3',
						data: rel2,
						type:'spline',
					},
				);	
			} else if (pil_graf == 'graf4') {
				ser.push(
					{
						name: 'Realisasi Q3',
						data: rel2,
						type:'column',
					},
				);	
			} else {
				ser.push(
					{
						name: 'Realisasi Q3',
						data: rel2,
						type:'column',
					},
					{
						name: 'Realisasi Q3',
						data: rel2,
						type:'spline',
					},					
				);	
			}
					
		var rel3 = [ 
				null,
				parseInt($('#rel3').text(), 10),

            ];	

			if (pil_graf == 'graf1') {
				ser.push(
					{
						name: 'Realisasi Q4',
						data: rel3,
						type:'spline',
					},
				);						
			} else if (pil_graf == 'graf4') {
				ser.push(
					{
						name: 'Realisasi Q4',
						data: rel3,
						type:'column',
					},
				);						
			} else {
				ser.push(
					{
						name: 'Realisasi Q4',
						data: rel3,
						type:'column',
					},
					{
						name: 'Realisasi Q4',
						data: rel3,
						type:'spline',
					},
				);						
			}

		var tahun = year;
		var chart4;
		var options4 ={
			chart: {
					zoomType: 'xy',
                    renderTo: 'dualaxes'
            },

            title: {
                        text: 'Komparasi Target dan Realisasi '
            },
            credits: {
                        enabled: false
            },
            xAxis: [{
                        categories: ['Target', 'Realisasi']
            }],
            yAxis: [{ // Primary yAxis
                        labels: {
                            format: '{value}',
                            style: {
                                color: Highcharts.getOptions().colors[1]
                            }
                        },
                        min: 0,
                        //max:100,
                        title: {
                            text: '',
                            style: {
                                color: Highcharts.getOptions().colors[1]
                            }
                        },opposite: false
                    }],
            tooltip: {
                        shared: true
            },
                    plotOptions: {
                        column: {
                            stacking: 'normal',
                            dataLabels: {
                                enabled: true
                            }
                        }
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        x: 0,
                        verticalAlign: 'top',
                        y: 55,
                        floating: true,
                        backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'
                    },

                    series: ser,
                    colors: Highcharts.map(Highcharts.getOptions().colors, function (color) {
                            return {
                                radialGradient: {cx: 0.5,cy: 0.3,r: 0.7},
                                stops: [[0, color],[1, Highcharts.Color(color).brighten(-0.3).get('rgb')] ]
                            };
                        })
            }
            chart4=new Highcharts.Chart(options4);		
        		
	}

    function ambilDataAllChartx(sdg_indicator){
		xtype = 1;
		kl = 0;
		tth = [];
		var ser  = [];
        var idrole = $("#role").val();
        var idprov = $("#daerah").val();
        var cat = $("#role").find(":selected").data("cat");
        $("#indi").html("");
		$("#dualaxes").html("");
		var sts = "";
        var goal = 'Nama Capaian';
        var target = "Nama Target";
        var code = 'Kode Indikator';
        var nama = 'Nama Indikator';
        var unit = 'Satuan';
        var sdg_ach = 'Realisasi SDG';
        var sumber = 'Sumber Data';
        var baseline = 'Dasar';
        if($("#fs").is(':checked')){
        	goal = 'Nama Capaian';
        	target = "Nama Target";
        	code = 'Kode Indikator';
        	nama = 'Nama Indikator';
        	unit = 'Satuan';
        	sdg_ach = 'Realisasi SDG';
        	sumber = 'Sumber Data';
        	baseline = 'Dasar';
    	}else{
    		goal = 'Goal Name';
    		target = "Target Name ";
    		code = 'Indicator Code';
    		nama = 'Indicator Name';
    		unit = 'Unit';
    		sdg_ach = 'SDGs Achievements';
    		sumber = 'Data Source';
    		baseline = 'Baseline';
    	}
        var idmonper = $("#periode").find(':selected').data('id');
		console.log('idmonper ' + idmonper);
        var hasilSts;
        $.ajax({
            url: urls + 'list-get-sts-monper-all/'+idprov+'/'+idmonper,
            type: 'get',
            dataType: 'json',
            cache: false,
            async : false,
            success: function (hasil) {
            	hasilSts = hasil;
				xhasilSts = hasil;
            }
        });
        
        var text="";
        $.ajax({
            url: urls + "get-sdg-goals/"+sdg_indicator,
            data: {'id_role': idrole,'id_monper':idmonper},
            type: 'get',
            dataType: 'json',
            beforeSend : function(xhr){
            	$('body').addClass("loading"); 
            },
           complete: function(){
            	$('body').removeClass("loading");
            },
            success: function (response) {
            	for (var i = 0; i < response.sdg.length; i++) {
        			var nm_goals;
        			var id_goals=response.sdg[i][0];
        			var kode_goals=response.sdg[i][3];
                	if($("#fs").is(':checked')){
                		nm_goals = response.sdg[i][1];
					}else{
						nm_goals = response.sdg[i][2];
					}
                	if(i>0){text += "<br/>";}
                	text += "<div style='font-size:90%;width:100%;text-align:left;'><h4>"+goal+" : "+kode_goals+". "+nm_goals+"</h4></div>";
                	
                	$.ajax({
                        url: urls + 'get-sdg-target/'+sdg_indicator,
                        type: 'get',
                        data: {'id_role':idrole,'id_goals':id_goals,'id_monper':idmonper},
                        dataType: 'json',
                        cache: false,
                        async : false,
                        success: function (result) {
                        	for (var j = 0; j < result.content.length; j++) {
                        		var nm_target;
                        		var id_target=result.content[j][0];
                        		var kode_target=result.content[j][3];
                            	if($("#fs").is(':checked')){
                            		nm_target = result.content[j][1];
        						}else{
        							nm_target = result.content[j][2];
        						}
                            	if(j>0){text += "<br/>";}
                            	text += "<div style='font-size:90%;width:100%;text-align:left;'><h5>"+target+" : "+kode_goals+'.'+kode_target+". "+nm_target+"</h5></div>";
                        		
                            	var spansdg;
                            	var colspan;
                            	text += "<div style='overflow-x:auto;'><table class='table table-striped table-bordered tabel-sdg' width='100%'><thead>";
                            	text += "<tr style='font-size:80%;'>";
                            	text += "<td rowspan='3' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+code+"</b></td>";
                            	text += "<td rowspan='3' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+nama+"</b></td>";
                            	text += (idmonper!="0")?"<td rowspan='3' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+sumber+"</b></td>":'';
                            	text += "<td rowspan='3' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+unit+"</b></td>";
                            	text += (idmonper!="0")?"<td rowspan='3' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+baseline+"</b></td>":'';
                            	
								var xt = 0;
                            	for(var l=0; l < hasilSts.content.length; l++){
                            		var sts  = hasilSts.content[l][0];
                            		var id_monper = hasilSts.content[l][1];
                            		var start_year = hasilSts.content[l][2];
                            		var end_year = hasilSts.content[l][3];
                            		for(var tahun = start_year ; tahun <= end_year; tahun++){
                            			if(sts == 'yearly'){
                            				colspan = 2;
                                    	}else{
                                    		if(sts == "semesterly"){
                                    			colspan = 3;
                                    		}else{
                                    			colspan = 5;
                                    		}
                                    	}
                            			text += "<td colspan='"+colspan+"' style='text-align:center;vertical-align:middle;border-style:ridge;' id='tahun" + xt + "'><b>"+tahun+"</b></td>";
										xt++;
                            		}
                            	}
								xxt = xt;
                            	text += (idmonper!="0")?"<td rowspan='3' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>Status</b></td>":'';
                            	text += "</tr><tr style='font-size:80%;'>";
                            	for(var l=0; l < hasilSts.content.length; l++){
                            		var sts  = hasilSts.content[l][0];
                            		var id_monper = hasilSts.content[l][1];
                            		var start_year = hasilSts.content[l][2];
                            		var end_year = hasilSts.content[l][3];
                            		for(var tahun = start_year ; tahun <= end_year; tahun++){
                            			if(sts == 'yearly'){
                                    		spansdg = 2;
                                    		colspan = 1;
                                    	}else{
                                    		spansdg = 3;
                                    		if(sts == "semesterly"){
                                    			colspan = 2;
                                    		}else{
                                    			colspan = 4;
                                    		}
                                    	}
                            			text += "<td rowspan='2' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>Target</b></td>";
                                    	text += "<td colspan='"+colspan+"' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+sdg_ach+"</td>";
                                    }
                            	}
                            	text += "</tr><tr style='font-size:80%;'>";
                            	for(var l=0; l < hasilSts.content.length; l++){
                            		var sts  = hasilSts.content[l][0];
                            		var id_monper = hasilSts.content[l][1];
                            		var start_year = hasilSts.content[l][2];
                            		var end_year = hasilSts.content[l][3];
                            		for(var tahun = start_year ; tahun <= end_year; tahun++){
                            			if(sts == 'yearly'){
                                    		text += "<td style='text-align:center;vertical-align:middle;border-style:ridge;'><b></b></td>";
                                    	}else if(sts == 'semesterly'){
                                    		text += "<td style='text-align:center;vertical-align:middle;border-style:ridge;'><b>1</b></td><td style='text-align:center;vertical-align:middle;border-style:ridge;'><b>2</b></td>";
                                    	}
                                		else if(sts == 'quarterly'){
                                			text += "<td style='text-align:center;vertical-align:middle;border-style:ridge;'><b>1</b></td><td style='text-align:center;vertical-align:middle;border-style:ridge;'><b>2</b></td><td style='text-align:center;vertical-align:middle;border-style:ridge;'><b>3</b></td><td style='text-align:center;vertical-align:middle;border-style:ridge;'><b>4</b></td>";
                                    	}
                            		}
                            	}
                            	text += "</tr></thead><tbody>";
                            	
                            	$.ajax({
                                    url: urls + 'get-sdg-indicator-utama/'+sdg_indicator,
                                    type: 'get',
                                    data: {'id_role':idrole,'id_goals':id_goals,'id_target':id_target,'id_monper':idmonper,'id_prov':idprov},
                                    dataType: 'json',
                                    cache: false,
                                    async : false,
                                    success: function (hasil) {
										ks = hasil.content.length;
                                    	for (var k = 0; k < hasil.content.length; k++) {
                                    		var nm_indicator;
                                    		var id_indicator=hasil.content[k][0];
                                    		var kode_indicator=hasil.content[k][3];
                                        	if($("#fs").is(':checked')){
                                        		nm_indicator = hasil.content[k][1];
                    						}else{
                    							nm_indicator = hasil.content[k][2];
                    						}
                                    		text += "<tr style='border-style:ridge;'>";
                                    		text += "<td style='font-size:80%;border-style:ridge;'>"+kode_goals+'.'+kode_target+'.'+kode_indicator+"</td>";
                                    		text += "<td style='font-size:80%;border-style:ridge;' id='nm_"+k+"'>"+nm_indicator+"</td>";
                                    		text += (idmonper!="0")?"<td style='font-size:80%;border-style:ridge;'>"+(hasil.content[k][7]?hasil.content[k][7]:'')+"</td>":'';
                                    		text += "<td style='font-size:80%;border-style:ridge;'>"+(hasil.content[k][5]?hasil.content[k][5]:'')+"</td>";
                                    		text += (idmonper!="0")?"<td style='font-size:80%;border-style:ridge;'>"+(hasil.content[k][6]?hasil.content[k][6]:'')+"</td>":'';
											
											var idt = 0;
                                    		for(var l=0; l < hasilSts.content.length; l++){
                                        		var sts  = hasilSts.content[l][0];
                                        		var id_monper = hasilSts.content[l][1];
                                        		var start_year = hasilSts.content[l][2];
                                        		var end_year = hasilSts.content[l][3];
                                        		
                                        		var cekSdg="";
                                                $.ajax({
                                        			url: urls + "getentryshowreport",
                                                    type: 'get',
                                                    data: { "id_monper":id_monper},
                                                    dataType: 'json',
                                                    async:false,
                                                    success: function (result) {
                                                    	cekSdg = result.sdg;
                                                    }
                                                });
                                                var color_sts="";
                                                var achive = "";
												var xyy = 0;
                                        		for(var year = start_year; year <= end_year; year++){
                                        			$.ajax({
                                                        url: urls + 'get-sdg-indicator-slave',
                                                        type: 'get',
                                                        data: {'id_role':idrole,'id_indicator':id_indicator,'year':year,'id_monper':id_monper,'id_prov':idprov},
                                                        dataType: 'json',
                                                        cache: false,
                                                        async : false,
                                                        success: function (hasilInd) {
															var xyz = 0;
                                                        	for (var m = 0; m < hasilInd.content.length; m++) {
                                                        		text += "<td style='font-size:80%;border-style:ridge;' id='tar_"+ year +"_" + xyy +"'>"+(hasilInd.content[m][7]?hasilInd.content[m][7]:'')+"</td>";
																xyy++;
																if (hasilInd.content[m][7]) {
																	tth[year] = hasilInd.content[m][7];
																} else {
																	tth[year] = 0;
																}
                                                        		var nilai1=(hasilInd.content[m][12])?hasilInd.content[m][12]:hasilInd.content[m][8];
                                                        		var nilai2=(hasilInd.content[m][13])?hasilInd.content[m][13]:hasilInd.content[m][9];
                                                        		var nilai3=(hasilInd.content[m][14])?hasilInd.content[m][14]:hasilInd.content[m][10];
                                                        		var nilai4=(hasilInd.content[m][15])?hasilInd.content[m][15]:hasilInd.content[m][11];
                                                        		
                                                        		var nilai1sdg="";
                                                        		var nilai2sdg="";
                                                        		var nilai3sdg="";
                                                        		var nilai4sdg="";
                                                        		for(var isdg=0;isdg<cekSdg.length;isdg++){
                                                        			nilai1sdg = (cekSdg[isdg][0]=="1" && cekSdg[isdg][1]==year)?nilai1:(nilai1sdg)?nilai1sdg:"";
                                                        			nilai2sdg = (cekSdg[isdg][0]=="2" && cekSdg[isdg][1]==year)?nilai2:(nilai2sdg)?nilai2sdg:"";
                                                        			nilai3sdg = (cekSdg[isdg][0]=="3" && cekSdg[isdg][1]==year)?nilai3:(nilai3sdg)?nilai3sdg:"";
                                                        			nilai4sdg = (cekSdg[isdg][0]=="4" && cekSdg[isdg][1]==year)?nilai4:(nilai4sdg)?nilai4sdg:"";
                                                        		}
                                                        		
                                                        		
                                                        		if(sts == 'yearly'){
                                                        			text += "<td style='font-size:80%;border-style:ridge;' id='rel_"+ year +"_" + xyz +"'>"+(nilai1sdg!=null?nilai1sdg:'')+"</td>";
																	if (nilai1sdg != null) {
																		console.log('year ' + year + ' ' + nilai1sdg);
																	}
																	xyz++;
                                                       				if(nilai1sdg){
                                                           				achive = nilai1sdg;
                                                           			}	
                                                        		}else if(sts == 'semesterly'){
                                                        			text += "<td style='font-size:80%;border-style:ridge;' id='rel_"+ year +"_" + xyz +"'>"+(nilai1sdg!=null?nilai1sdg:'')+"</td>";
																	xyz++;
                                                        			text += "<td style='font-size:80%;border-style:ridge;' id='rel_"+ year +"_" + xyz +"'>"+(nilai2sdg!=null?nilai2sdg:'')+"</td>";
																	xyz++;
                                                        			if(nilai1sdg || nilai2sdg){
                                                        				if(hasilInd.content[m][16]=="2"){
                                                               				achive = (nilai2sdg)?nilai2sdg:nilai1sdg;
                                                            			}else{
                                                               				achive = nilai1sdg+nilai2sdg;
                                                            			}
                                                        			}
																	if (nilai1sdg != null) {
																	}
																	if (nilai2sdg != null) {
																	}	
																	console.log('year ' + year + ' ' + tth[year]);																
                                                            	}
                                                        		else if(sts == 'quarterly'){
                                                        			text += "<td style='font-size:80%;border-style:ridge;' id='rel_"+ year +"_" + xyz +"'>"+(nilai1sdg!=null?nilai1sdg:'')+"</td>";
																	xyz++;
                                                        			text += "<td style='font-size:80%;border-style:ridge;' id='rel_"+ year +"_" + xyz +"'>"+(nilai2sdg!=null?nilai2sdg:'')+"</td>";
																	xyz++;
                                                        			text += "<td style='font-size:80%;border-style:ridge;' id='rel_"+ year +"_" + xyz +"'>"+(nilai3sdg!=null?nilai3sdg:'')+"</td>";
																	xyz++;
                                                        			text += "<td style='font-size:80%;border-style:ridge;' id='rel_"+ year +"_" + xyz +"'>"+(nilai4sdg!=null?nilai4sdg:'')+"</td>";
																	xyz++;
																	console.log('year ' + year + ' ' + nilai1sdg + ' ' + nilai2sdg + ' ' + nilai3sdg);
                                                        			if(nilai1sdg || nilai2sdg || nilai3sdg || nilai4sdg){
                                                        				if(hasilInd.content[m][16]=="2"){
                                                        					if(nilai4sdg){
                                                        						achive = nilai4sdg;
                                                        					}else if(nilai3sdg){
                                                        						achive = nilai3sdg;
                                                        					}else if(nilai2sdg){
                                                        						achive = nilai2sdg;
                                                        					}else{
                                                        						achive = nilai1sdg;
                                                        					}
                                                        				}else{
                                                        					achive = nilai1sdg+nilai2sdg+nilai3sdg+nilai4sdg;	
                                                        				}
                                                        			}
                                                            	}
                                                        		if(achive){
                                                        			if(hasilInd.content[m][4] == 'Increment'){
                                                                        if((achive >= hasilInd.content[m][7])){
                                                                            color_sts = '<span class="dotOk"></span>';
                                                                        }else{
                                                                            color_sts = '<span class="dotNok"></span>';
                                                                        }

                                                                        if((achive <= hasilInd.content[m][7])){
                                                                            color_sts = '<span class="dotOk"></span>';
                                                                        }else{
                                                                            color_sts = '<span class="dotNok"></span>';
                                                                        }
                                                                    }
                                                        		}                                                        		
                                                        	}
                                                        }
                                        			});
                                        		}
                                        		idt++;
                                        	}
											xidt = idt;
                                    		text += (idmonper!="0")?"<td style='text-align:center;border-style:ridge;'>"+color_sts+"</td></tr>":'</tr>';
                                    		
                                    		$.ajax({
                                                url: urls + 'get-sdg-disaggre-utama',
                                                type: 'get',
                                                data: {'id_role':idrole,'id_goals':id_goals,'id_target':id_target,'year':year,'id_monper':id_monper,'id_indicator':id_indicator,'id_prov':idprov},
                                                dataType: 'json',
                                                cache: false,
                                                async : false,
                                                success: function (hasilnya) {
                                                	if(hasilnya.content.length>0){
														kl = hasilnya.content.length;
                                                		for (var l = 0; l < hasilnya.content.length; l++) {
                                                    		var nm_disaggre;
															var nm_disaggre_detail;
                                                        	if($("#fs").is(':checked')){
                                                        		nm_disaggre = hasilnya.content[l][16];
                                                        		nm_disaggre_detail = hasilnya.content[l][18];
                                    						}else{
                                    							nm_disaggre = hasilnya.content[l][17];
                                    							nm_disaggre_detail = hasilnya.content[l][19];
                                    						}
                                                        	text += "<tr style='border-style:ridge;'>";
                                                    		text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                    		text += "<td style='font-size:80%;border-style:ridge;'><div style='margin-left:20px' id='nmd"+l+"'>Disaggregation "+nm_disaggre+" "+nm_disaggre_detail+"</div></td>";
                                                    		text += (idmonper!="0")?"<td style='font-size:80%;border-style:ridge;'>"+(hasilnya.content[l][23]?hasilnya.content[l][23]:'')+"</td>":'';
                                                    		//text += "<td style='font-size:80%;border-style:ridge;'>"+(hasilnya.content[l][5]?hasilnya.content[l][5]:'')+"</td>";
                                                    		//text += (idmonper!="0")?"<td style='font-size:80%;border-style:ridge;'>"+(hasilnya.content[l][6]?hasilnya.content[l][6]:'')+"</td>":'';
                                                    		
                                                    		text += (idmonper!="0")?"<td style='font-size:80%;border-style:ridge;'></td>":'';
                                                    		text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                    		
                                                    		for(var z=0; z < hasilSts.content.length; z++){
                                                        		var sts  = hasilSts.content[z][0];
                                                        		var id_monper = hasilSts.content[z][1];
                                                        		var start_year = hasilSts.content[z][2];
                                                        		var end_year = hasilSts.content[z][3];
                                                        		
                                                        		var cekSdg="";
                                                                $.ajax({
                                                        			url: urls + "getentryshowreport",
                                                                    type: 'get',
                                                                    data: { "id_monper":id_monper},
                                                                    dataType: 'json',
                                                                    async:false,
                                                                    success: function (result) {
                                                                    	cekSdg = result.sdg;
                                                                    }
                                                                });

                                                                var color_sts="";
                                                                var achive = "";
                                                        		for(var year = start_year; year <= end_year; year++){
                                                        			$.ajax({
                                                                        url: urls + 'get-sdg-disaggre-slave',
                                                                        type: 'get',
                                                                        data: {'id_role':idrole,'id_goals':id_goals,'id_target':id_target,'year':year,'id_monper':id_monper,'id_indicator':id_indicator,'id_dis':hasilnya.content[l][21],'id_dis_detail':hasilnya.content[l][22],'id_prov':idprov},
                                                                        dataType: 'json',
                                                                        cache: false,
                                                                        async : false,
                                                                        success: function (hasildis) {
																			var xyz = 0;
                                                                        	if(hasildis.content.length>0){
                                                                        		for (var n = 0; n < hasildis.content.length; n++) {
                                                                            		//text += "<td>"+(hasildis.content[n][7]?hasildis.content[n][7]:'')+"</td>";
                                                                            		text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                            		var nilai1Detail=(hasildis.content[n][12])?hasildis.content[n][12]:hasildis.content[n][8];
                                                                            		var nilai2Detail=(hasildis.content[n][13])?hasildis.content[n][13]:hasildis.content[n][9];
                                                                            		var nilai3Detail=(hasildis.content[n][14])?hasildis.content[n][14]:hasildis.content[n][10];
                                                                            		var nilai4Detail=(hasildis.content[n][15])?hasildis.content[n][15]:hasildis.content[n][11];
                                                                            		console.log(nilai1Detail)
                                                                            		var nilai1sdgDetail="";
                                                                            		var nilai2sdgDetail="";
                                                                            		var nilai3sdgDetail="";
                                                                            		var nilai4sdgDetail="";
                                                                            		for(var isdg=0;isdg<cekSdg.length;isdg++){
                                                                            			nilai1sdgDetail = (cekSdg[isdg][0]=="1" && cekSdg[isdg][1]==year)?nilai1Detail:(nilai1sdgDetail)?nilai1sdgDetail:"";
                                                                            			nilai2sdgDetail = (cekSdg[isdg][0]=="2" && cekSdg[isdg][1]==year)?nilai2Detail:(nilai2sdgDetail)?nilai2sdgDetail:"";
                                                                            			nilai3sdgDetail = (cekSdg[isdg][0]=="3" && cekSdg[isdg][1]==year)?nilai3Detail:(nilai3sdgDetail)?nilai3sdgDetail:"";
                                                                            			nilai4sdgDetail = (cekSdg[isdg][0]=="4" && cekSdg[isdg][1]==year)?nilai4Detail:(nilai4sdgDetail)?nilai4sdgDetail:"";
                                                                            		}
                                                                            		
                                                                            		if(sts == 'yearly'){
                                                                            			text += "<td style='font-size:80%;border-style:ridge;' id='arel_" + year + "_" + l + "_" + xyz +"'>"+(nilai1sdgDetail!=null?nilai1sdgDetail:'')+"</td>";
																						xyz++;
                                                                            			if(nilai1sdgDetail){
                                                                            				achive = nilai1sdgDetail;
                                                                            			}
                                                                            		}else if(sts == 'semesterly'){
                                                                            			text += "<td style='font-size:80%;border-style:ridge;' id='arel_" + year + "_" + l + "_" + xyz +"'>"+(nilai1sdgDetail!=null?nilai1sdgDetail:'')+"</td>";
																						xyz++;
                                                                            			text += "<td style='font-size:80%;border-style:ridge;' id='arel_" + year + "_" + l + "_" + xyz +"'>"+(nilai2sdgDetail!=null?nilai2sdgDetail:'')+"</td>";
																						xyz++;
                                                                            			if(nilai1sdgDetail || nilai2sdgDetail){
                                                                            				if(hasil.content[k][20]=="2"){
                                                                                   				achive = (nilai2sdgDetail)?nilai2sdgDetail:nilai1sdgDetail;
                                                                                			}else{
                                                                                   				achive = nilai1sdgDetail+nilai2sdgDetail;
                                                                                			}
                                                                            			}
                                                                                	}
                                                                            		else if(sts == 'quarterly'){
                                                                            			text += "<td style='font-size:80%;border-style:ridge;' id='arel_" + year + "_" + l + "_" + xyz +"'>"+(nilai1sdgDetail!=null?nilai1sdgDetail:'')+"</td>";
																						xyz++;
                                                                            			text += "<td style='font-size:80%;border-style:ridge;' id='arel_" + year + "_" + l + "_" + xyz +"'>"+(nilai2sdgDetail!=null?nilai2sdgDetail:'')+"</td>";
																						xyz++;
                                                                            			text += "<td style='font-size:80%;border-style:ridge;' id='arel_" + year + "_" + l + "_" + xyz +"'>"+(nilai3sdgDetail!=null?nilai3sdgDetail:'')+"</td>";
																						xyz++;
                                                                            			text += "<td style='font-size:80%;border-style:ridge;' id='arel_" + year + "_" + l + "_" + xyz +"'>"+(nilai4sdgDetail!=null?nilai4sdgDetail:'')+"</td>";
																						xyz++;
                                                                            			if(nilai1sdgDetail || nilai2sdgDetail || nilai3sdgDetail || nilai4sdgDetail){
                                                                            				if(hasil.content[k][20]=="2"){
                                                                            					if(nilai4sdgDetail){
                                                                            						achive = nilai4sdgDetail;
                                                                            					}else if(nilai3sdgDetail){
                                                                            						achive = nilai3sdgDetail;
                                                                            					}else if(nilai2sdgDetail){
                                                                            						achive = nilai2sdgDetail;
                                                                            					}else{
                                                                            						achive = nilai1sdgDetail;
                                                                            					}
                                                                            				}else{
                                                                            					achive = nilai1sdgDetail+nilai2sdgDetail+nilai3sdgDetail+nilai4sdgDetail;	
                                                                            				}
                                                                            			}
                                                                                	}
                                                                            		if(achive){
                                                                            			if(hasildis.content[n][4] == 'Increment'){
                                                                                            if(achive >= hasildis.content[n][7]){
                                                                                                color_sts = '<span class="dotOk"></span>';
                                                                                            }else{
                                                                                                color_sts = '<span class="dotNok"></span>';
                                                                                            }
                                                                                        }else{
                                                                                            if(achive <= hasildis.content[n][7]){
                                                                                                color_sts = '<span class="dotOk"></span>';
                                                                                            }else{
                                                                                                color_sts = '<span class="dotNok"></span>';
                                                                                            }
                                                                                        }
                                                                            		}
                                                                            	}
                                                                        	}else{
                                                                        		text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                        		if(sts == 'yearly'){
                                                                        			text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                        		}else if(sts == 'semesterly'){
                                                                        			text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                        			text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                            	}
                                                                        		else if(sts == 'quarterly'){
                                                                        			text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                        			text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                        			text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                        			text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                            	}
                                                                        	}
                                                                        	
                                                                        }
                                                        			});
                                                        			
                                                        		}
                                                    		}
                                                    		text += (idmonper!="0")?"<td style='text-align:center;border-style:ridge;' ></td></tr>":'</tr>';
                                                    	}
                                                	}
                                                }
                                    		});
                                    	}
                                    }
                            	}); 
                            	text += "</tbody></table></div>";
                        	}
                        }
                	});
            	}
            	$("#indi").html(text);
				$("#dualaxes").html("");
				$('#pilgrafik').prop('disabled', false);
            }
        });
    }	

    function ambilDataAllChart(sdg_indicator){
		xtype = 1;
		kl = 0;
        var idrole = $("#role").val();
        var idprov = $("#daerah").val();
        var cat = $("#role").find(":selected").data("cat");
        $("#indi").html("");
		$("#dualaxes").html("");
        var goal = 'Nama Capaian';
        var target = "Nama Target";
        var code = 'Kode Indikator';
        var nama = 'Nama Indikator';
        var unit = 'Satuan';
        var sdg_ach = 'Realisasi SDG';
        var sumber = 'Sumber Data';
        var baseline = 'Dasar';
        if($("#fs").is(':checked')){
        	goal = 'Nama Capaian';
        	target = "Nama Target";
        	code = 'Kode Indikator';
        	nama = 'Nama Indikator';
        	unit = 'Satuan';
        	sdg_ach = 'Realisasi SDG';
        	sumber = 'Sumber Data';
        	baseline = 'Dasar';
    	}else{
    		goal = 'Goal Name';
    		target = "Target Name ";
    		code = 'Indicator Code';
    		nama = 'Indicator Name';
    		unit = 'Unit';
    		sdg_ach = 'SDGs Achievements';
    		sumber = 'Data Source';
    		baseline = 'Baseline';
    	}
        var idmonper = $("#periode").find(':selected').data('id');
        $.ajax({
            url: urls + 'list-get-sts-monper-all/'+idprov+'/'+idmonper,
            type: 'get',
            dataType: 'json',
            cache: false,
            async : false,
            success: function (hasil) {
            	hasilSts = hasil;
				xhasilSts = hasil;
            }
        });
        
        var text="";
        $.ajax({
            url: urls + "get-sdg-goals/"+sdg_indicator,
            data: {'id_role': idrole,'id_monper':idmonper},
            type: 'get',
            dataType: 'json',
            beforeSend : function(xhr){
            	$('body').addClass("loading"); 
            },
           complete: function(){
            	$('body').removeClass("loading");
            },
            success: function (response) {
            	for (var i = 0; i < response.sdg.length; i++) {
        			var nm_goals;
        			var id_goals=response.sdg[i][0];
        			var kode_goals=response.sdg[i][3];
                	if($("#fs").is(':checked')){
                		nm_goals = response.sdg[i][1];
					}else{
						nm_goals = response.sdg[i][2];
					}
                	if(i>0){text += "<br/>";}
                	text += "<div style='font-size:90%;width:100%;text-align:left;'><h4>"+goal+" : "+kode_goals+". "+nm_goals+"</h4></div>";
                	
                	$.ajax({
                        url: urls + 'get-sdg-target/'+sdg_indicator,
                        type: 'get',
                        data: {'id_role':idrole,'id_goals':id_goals,'id_monper':idmonper},
                        dataType: 'json',
                        cache: false,
                        async : false,
                        success: function (result) {
                        	for (var j = 0; j < result.content.length; j++) {
                        		var nm_target;
                        		var id_target=result.content[j][0];
                        		var kode_target=result.content[j][3];
                            	if($("#fs").is(':checked')){
                            		nm_target = result.content[j][1];
        						}else{
        							nm_target = result.content[j][2];
        						}
                            	if(j>0){text += "<br/>";}
                            	text += "<div style='font-size:90%;width:100%;text-align:left;'><h5>"+target+" : "+kode_goals+'.'+kode_target+". "+nm_target+"</h5></div>";
                        		
                            	var spansdg;
                            	var colspan;
                            	text += "<div style='overflow-x:auto;'><table class='table table-striped table-bordered tabel-sdg' width='100%'><thead>";
                            	text += "<tr style='font-size:80%;'>";
                            	text += "<td rowspan='3' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+code+"</b></td>";
                            	text += "<td rowspan='3' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+nama+"</b></td>";
                            	text += (idmonper!="0")?"<td rowspan='3' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+sumber+"</b></td>":'';
                            	text += "<td rowspan='3' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+unit+"</b></td>";
                            	text += (idmonper!="0")?"<td rowspan='3' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+baseline+"</b></td>":'';
                            	
								var xt = 0;
                            	for(var l=0; l < hasilSts.content.length; l++){
                            		var sts  = hasilSts.content[l][0];
                            		var id_monper = hasilSts.content[l][1];
                            		var start_year = hasilSts.content[l][2];
                            		var end_year = hasilSts.content[l][3];
                            		for(var tahun = start_year ; tahun <= end_year; tahun++){
                            			if(sts == 'yearly'){
                            				colspan = 2;
                                    	}else{
                                    		if(sts == "semesterly"){
                                    			colspan = 3;
                                    		}else{
                                    			colspan = 5;
                                    		}
                                    	}
                            			text += "<td colspan='"+colspan+"' style='text-align:center;vertical-align:middle;border-style:ridge;' id='tahun" + xt + "'><b>"+tahun+"</b></td>";
                            			text += "<span rowspan='3' style='text-align:center;vertical-align:middle;border-style:ridge;display:none;'><b>TOTAL</b></span>";
										xt++;
                            		}
                            		
                            	}
								xxt = xt;
                            	text += (idmonper!="0")?"<td rowspan='3' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>Status</b></td>":'';
                            	text += "</tr><tr style='font-size:80%;'>";
                            	for(var l=0; l < hasilSts.content.length; l++){
                            		var sts  = hasilSts.content[l][0];
                            		var id_monper = hasilSts.content[l][1];
                            		var start_year = hasilSts.content[l][2];
                            		var end_year = hasilSts.content[l][3];
                            		for(var tahun = start_year ; tahun <= end_year; tahun++){
                            			if(sts == 'yearly'){
                                    		spansdg = 2;
                                    		colspan = 1;
                                    	}else{
                                    		spansdg = 3;
                                    		if(sts == "semesterly"){
                                    			colspan = 2;
                                    		}else{
                                    			colspan = 4;
                                    		}
                                    	}
                            			text += "<td rowspan='2' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>Target</b></td>";
                                    	text += "<td colspan='"+colspan+"' style='text-align:center;vertical-align:middle;border-style:ridge;'><b>"+sdg_ach+"</td>";
                                    }
                            	}
                            	text += "</tr><tr style='font-size:80%;'>";
                            	for(var l=0; l < hasilSts.content.length; l++){
                            		var sts  = hasilSts.content[l][0];
                            		var id_monper = hasilSts.content[l][1];
                            		var start_year = hasilSts.content[l][2];
                            		var end_year = hasilSts.content[l][3];
                            		for(var tahun = start_year ; tahun <= end_year; tahun++){
                            			if(sts == 'yearly'){
                                    		text += "<td style='text-align:center;vertical-align:middle;border-style:ridge;'><b></b></td>";
                                    	}else if(sts == 'semesterly'){
                                    		text += "<td style='text-align:center;vertical-align:middle;border-style:ridge;'><b>1</b></td><td style='text-align:center;vertical-align:middle;border-style:ridge;'><b>2</b></td>";
                                    	}
                                		else if(sts == 'quarterly'){
                                			text += "<td style='text-align:center;vertical-align:middle;border-style:ridge;'><b>1</b></td><td style='text-align:center;vertical-align:middle;border-style:ridge;'><b>2</b></td><td style='text-align:center;vertical-align:middle;border-style:ridge;'><b>3</b></td><td style='text-align:center;vertical-align:middle;border-style:ridge;'><b>4</b></td>";
                                    	}
                            		}
                            	}
                            	text += "</tr></thead><tbody>";
                            	
                            	$.ajax({
                                    url: urls + 'get-sdg-indicator-utama/'+sdg_indicator,
                                    type: 'get',
                                    data: {'id_role':idrole,'id_goals':id_goals,'id_target':id_target,'id_monper':idmonper,'id_prov':idprov},
                                    dataType: 'json',
                                    cache: false,
                                    async : false,
                                    success: function (hasil) {
										ks = hasil.content.length;
                                    	for (var k = 0; k < hasil.content.length; k++) {
                                    		var nm_indicator;
                                    		var id_indicator=hasil.content[k][0];
                                    		var kode_indicator=hasil.content[k][3];
                                        	if($("#fs").is(':checked')){
                                        		nm_indicator = hasil.content[k][1];
                    						}else{
                    							nm_indicator = hasil.content[k][2];
                    						}
                                    		text += "<tr style='border-style:ridge;'>";
                                    		text += "<td style='font-size:80%;border-style:ridge;'>"+kode_goals+'.'+kode_target+'.'+kode_indicator+"</td>";
                                    		text += "<td style='font-size:80%;border-style:ridge;'>"+nm_indicator+"</td>";
                                    		text += (idmonper!="0")?"<td style='font-size:80%;border-style:ridge;'>"+(hasil.content[k][7]?hasil.content[k][7]:'')+"</td>":'';
                                    		text += "<td style='font-size:80%;border-style:ridge;'>"+(hasil.content[k][5]?hasil.content[k][5]:'')+"</td>";
                                    		text += (idmonper!="0")?"<td style='font-size:80%;border-style:ridge;'>"+(hasil.content[k][6]?hasil.content[k][6]:'')+"</td>":'';
                                    		
                                    		for(var l=0; l < hasilSts.content.length; l++){
                                        		var sts  = hasilSts.content[l][0];
                                        		var id_monper = hasilSts.content[l][1];
                                        		var start_year = hasilSts.content[l][2];
                                        		var end_year = hasilSts.content[l][3];
                                        		
                                        		var cekSdg="";
                                                $.ajax({
                                        			url: urls + "getentryshowreport",
                                                    type: 'get',
                                                    data: { "id_monper":id_monper},
                                                    dataType: 'json',
                                                    async:false,
                                                    success: function (result) {
                                                    	cekSdg = result.sdg;
                                                    }
                                                });
                                                var color_sts="";
                                                var xyy = 0
                                        		for(var year = start_year; year <= end_year; year++){
                                        			$.ajax({
                                                        url: urls + 'get-sdg-indicator-slave',
                                                        type: 'get',
                                                        data: {'id_role':idrole,'id_indicator':id_indicator,'year':year,'id_monper':id_monper,'id_prov':idprov},
                                                        dataType: 'json',
                                                        cache: false,
                                                        async : false,
                                                        success: function (hasilInd) {
                                                        	var achive = 0;
                                                            var achiveSum = 0;
                                                            var achiveLast = 0;
                                                            var achivehasil;
															var xyz = 0;
                                                        	for (var m = 0; m < hasilInd.content.length; m++) {
                                                        		text += "<td style='font-size:80%;border-style:ridge;' id='tar_"+ year +"_" + xyy +"'>"+(hasilInd.content[m][7]?hasilInd.content[m][7]:'')+"</td>";
                                                        		var nilai1=(hasilInd.content[m][12])?hasilInd.content[m][12]:hasilInd.content[m][8];
                                                        		var nilai2=(hasilInd.content[m][13])?hasilInd.content[m][13]:hasilInd.content[m][9];
                                                        		var nilai3=(hasilInd.content[m][14])?hasilInd.content[m][14]:hasilInd.content[m][10];
                                                        		var nilai4=(hasilInd.content[m][15])?hasilInd.content[m][15]:hasilInd.content[m][11];
                                                        		
                                                        		var nilai1sdg="";
                                                        		var nilai2sdg="";
                                                        		var nilai3sdg="";
                                                        		var nilai4sdg="";
                                                        		for(var isdg=0;isdg<cekSdg.length;isdg++){
                                                        			nilai1sdg = (cekSdg[isdg][0]=="1" && cekSdg[isdg][1]==year)?nilai1:(nilai1sdg)?nilai1sdg:"";
                                                        			nilai2sdg = (cekSdg[isdg][0]=="2" && cekSdg[isdg][1]==year)?nilai2:(nilai2sdg)?nilai2sdg:"";
                                                        			nilai3sdg = (cekSdg[isdg][0]=="3" && cekSdg[isdg][1]==year)?nilai3:(nilai3sdg)?nilai3sdg:"";
                                                        			nilai4sdg = (cekSdg[isdg][0]=="4" && cekSdg[isdg][1]==year)?nilai4:(nilai4sdg)?nilai4sdg:"";
                                                        		}
                                                        		
                                                        		
                                                        		if(sts == 'yearly'){
                                                        			text += "<td style='font-size:80%;border-style:ridge;' id='rel_"+ year +"_" + xyz +"'>"+(nilai1sdg!=null?nilai1sdg:'')+"</td>";
																	xyz++;
                                                       				if(nilai1sdg!=''){
                                                           				achive = nilai1sdg;
                                                           			}	
                                                       				achiveLast = (achive!=0)?achive:achiveLast;
                                                       				achiveSum += achive;
                                                        		}else if(sts == 'semesterly'){
                                                        			if(nilai1sdg!='' || nilai2sdg!=''){
                                                        				if(hasilInd.content[m][16]=="2"){
                                                               				achive = (nilai2sdg!='')?nilai2sdg:nilai1sdg;
                                                               				achiveLast = (achive!=0)?achive:achiveLast;
                                                            			}else{
                                                               				achive = parseInt(nilai1sdg)+parseInt(nilai2sdg);
                                                               				achiveSum += achive;
                                                            			}
                                                        			}
                                                        			text += "<td style='font-size:80%;border-style:ridge;' id='rel_"+ year +"_" + xyz +"'>"+(nilai1sdg!=null?nilai1sdg:'')+"</td>";
                                                        			text += "<td style='font-size:80%;border-style:ridge;' id='rel_"+ year +"_" + xyz +"'>"+(nilai2sdg!=null?nilai2sdg:'')+"</td>";
																	xyz++;
                                                        			
                                                            	}else if(sts == 'quarterly'){
                                                        			if(nilai1sdg!='' || nilai2sdg!='' || nilai3sdg!='' || nilai4sdg!=''){
                                                        				if(hasilInd.content[m][16]=="2"){
                                                        					if(nilai4sdg!=''){
                                                        						achive = nilai4sdg;
                                                        					}else if(nilai3sdg!=''){
                                                        						achive = nilai3sdg;
                                                        					}else if(nilai2sdg!=''){
                                                        						achive = nilai2sdg;
                                                        					}else if(nilai1sdg!=''){
                                                        						achive = nilai1sdg;
                                                        					}
                                                        					achiveLast = (achive!=0)?achive:achiveLast;
                                                        				}else{
                                                        					achive = parseInt(nilai1sdg?nilai1sdg:0)+parseInt(nilai2sdg?nilai2sdg:0)+parseInt(nilai3sdg?nilai3sdg:0)+parseInt(nilai4sdg?nilai4sdg:0);	
                                                        					achiveSum += achive;
                                                        				}
                                                        			}
                                                        			
                                                        			text += "<td style='font-size:80%;border-style:ridge;' id='rel_"+ year +"_" + xyz +"'>"+(nilai1sdg!=null?nilai1sdg:'')+"</td>";
																	xyz++;
                                                        			text += "<td style='font-size:80%;border-style:ridge;' id='rel_"+ year +"_" + xyz +"'>"+(nilai2sdg!=null?nilai2sdg:'')+"</td>";
																	xyz++;
                                                        			text += "<td style='font-size:80%;border-style:ridge;' id='rel_"+ year +"_" + xyz +"'>"+(nilai3sdg!=null?nilai3sdg:'')+"</td>";
																	xyz++;
                                                        			text += "<td style='font-size:80%;border-style:ridge;' id='rel_"+ year +"_" + xyz +"'>"+(nilai4sdg!=null?nilai4sdg:'')+"</td>";
																	xyz++;
                                                        			
                                                            	}
                                                        		
                                                        		if(hasilInd.content[m][16]=="2"){
                                                        			achivehasil = achiveLast;
                                                        		}else{
                                                        			achivehasil = achiveSum;
                                                        		}
                                                        		if(achivehasil){
                                                        			if(hasilInd.content[m][4] == 'Increment'){
                                                                        if((achivehasil >= hasilInd.content[m][7])){
                                                                            color_sts = '<span class="dotOk"></span>';
                                                                        }else{
                                                                            color_sts = '<span class="dotNok"></span>';
                                                                        }
                                                                    }else{
                                                                        if((achivehasil <= hasilInd.content[m][7])){
                                                                            color_sts = '<span class="dotOk"></span>';
                                                                        }else{
                                                                            color_sts = '<span class="dotNok"></span>';
                                                                        }
                                                                    }
                                                        		}                                                        		
                                                        	}
                                                        	text += "<span style='font-size:80%;border-style:ridge;display:none;' id='res_"+ year +"_" + xyy +"'>"+achivehasil+"</span>";
                                                        }
                                        			});
                                        		}
                                        		
                                        		
                                        	}
                                    		text += (idmonper!="0")?"<td style='text-align:center;border-style:ridge;'>"+color_sts+"</td></tr>":'</tr>';
                                    		
                                    		
                                    		$.ajax({
                                                url: urls + 'get-sdg-disaggre-utama',
                                                type: 'get',
                                                data: {'id_role':idrole,'id_goals':id_goals,'id_target':id_target,'year':year,'id_monper':id_monper,'id_indicator':id_indicator,'id_prov':idprov},
                                                dataType: 'json',
                                                cache: false,
                                                async : false,
                                                success: function (hasilnya) {
                                                	if(hasilnya.content.length>0){
														kl = hasilnya.content.length;
                                                		for (var l = 0; l < hasilnya.content.length; l++) {
                                                    		var nm_disaggre;
															var nm_disaggre_detail;
                                                        	if($("#fs").is(':checked')){
                                                        		nm_disaggre = hasilnya.content[l][16];
                                                        		nm_disaggre_detail = hasilnya.content[l][18];
                                    						}else{
                                    							nm_disaggre = hasilnya.content[l][17];
                                    							nm_disaggre_detail = hasilnya.content[l][19];
                                    						}
                                                        	text += "<tr style='border-style:ridge;'>";
                                                    		text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                    		text += "<td style='font-size:80%;border-style:ridge;'><div style='margin-left:20px'>Disaggregation "+nm_disaggre+" "+nm_disaggre_detail+"</div></td>";
                                                    		text += (idmonper!="0")?"<td style='font-size:80%;border-style:ridge;'>"+(hasilnya.content[l][23]?hasilnya.content[l][23]:'')+"</td>":'';
                                                    		//text += "<td style='font-size:80%;border-style:ridge;'>"+(hasilnya.content[l][5]?hasilnya.content[l][5]:'')+"</td>";
                                                    		//text += (idmonper!="0")?"<td style='font-size:80%;border-style:ridge;'>"+(hasilnya.content[l][6]?hasilnya.content[l][6]:'')+"</td>":'';
                                                    		
                                                    		text += (idmonper!="0")?"<td style='font-size:80%;border-style:ridge;'></td>":'';
                                                    		text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                    		
                                                    		for(var z=0; z < hasilSts.content.length; z++){
                                                        		var sts  = hasilSts.content[z][0];
                                                        		var id_monper = hasilSts.content[z][1];
                                                        		var start_year = hasilSts.content[z][2];
                                                        		var end_year = hasilSts.content[z][3];
                                                        		
                                                        		var cekSdg="";
                                                                $.ajax({
                                                        			url: urls + "getentryshowreport",
                                                                    type: 'get',
                                                                    data: { "id_monper":id_monper},
                                                                    dataType: 'json',
                                                                    async:false,
                                                                    success: function (result) {
                                                                    	cekSdg = result.sdg;
                                                                    }
                                                                });

                                                                var color_sts="";
                                                                var achive = "";
                                                        		for(var year = start_year; year <= end_year; year++){
                                                        			$.ajax({
                                                                        url: urls + 'get-sdg-disaggre-slave',
                                                                        type: 'get',
                                                                        data: {'id_role':idrole,'id_goals':id_goals,'id_target':id_target,'year':year,'id_monper':id_monper,'id_indicator':id_indicator,'id_dis':hasilnya.content[l][21],'id_dis_detail':hasilnya.content[l][22],'id_prov':idprov},
                                                                        dataType: 'json',
                                                                        cache: false,
                                                                        async : false,
                                                                        success: function (hasildis) {
                                                                        	var achive = 0;
                                                                            var achiveSum = 0;
                                                                            var achiveLast = 0;
                                                                            var achivehasil;
                                                                        	if(hasildis.content.length>0){
                                                                        		for (var n = 0; n < hasildis.content.length; n++) {
                                                                            		//text += "<td>"+(hasildis.content[n][7]?hasildis.content[n][7]:'')+"</td>";
                                                                            		text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                            		var nilai1Detail=(hasildis.content[n][12])?hasildis.content[n][12]:hasildis.content[n][8];
                                                                            		var nilai2Detail=(hasildis.content[n][13])?hasildis.content[n][13]:hasildis.content[n][9];
                                                                            		var nilai3Detail=(hasildis.content[n][14])?hasildis.content[n][14]:hasildis.content[n][10];
                                                                            		var nilai4Detail=(hasildis.content[n][15])?hasildis.content[n][15]:hasildis.content[n][11];
                                                                            		console.log(nilai1Detail)
                                                                            		var nilai1sdgDetail="";
                                                                            		var nilai2sdgDetail="";
                                                                            		var nilai3sdgDetail="";
                                                                            		var nilai4sdgDetail="";
                                                                            		for(var isdg=0;isdg<cekSdg.length;isdg++){
                                                                            			nilai1sdgDetail = (cekSdg[isdg][0]=="1" && cekSdg[isdg][1]==year)?nilai1Detail:(nilai1sdgDetail)?nilai1sdgDetail:"";
                                                                            			nilai2sdgDetail = (cekSdg[isdg][0]=="2" && cekSdg[isdg][1]==year)?nilai2Detail:(nilai2sdgDetail)?nilai2sdgDetail:"";
                                                                            			nilai3sdgDetail = (cekSdg[isdg][0]=="3" && cekSdg[isdg][1]==year)?nilai3Detail:(nilai3sdgDetail)?nilai3sdgDetail:"";
                                                                            			nilai4sdgDetail = (cekSdg[isdg][0]=="4" && cekSdg[isdg][1]==year)?nilai4Detail:(nilai4sdgDetail)?nilai4sdgDetail:"";
                                                                            		}
                                                                            		
                                                                            		if(sts == 'yearly'){
                                                                            			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai1sdgDetail!=null?nilai1sdgDetail:'')+"</td>";
                                                                            			if(nilai1sdgDetail!=''){
                                                                            				achive = nilai1sdgDetail?nilai1sdgDetail:0;
                                                                            			}
                                                                            			achiveLast = (achive!=0)?achive:achiveLast;
                                                                            			achiveSum += achive;
                                                                            		}else if(sts == 'semesterly'){
                                                                            			
                                                                            			if(nilai1sdgDetail!='' || nilai2sdgDetail!=''){
                                                                            				if(hasildis.content[n][20]=="2"){
                                                                                   				achive = (nilai2sdgDetail)?nilai2sdgDetail:nilai1sdgDetail;
                                                                                   				achiveLast = (achive!=0)?achive:achiveLast;
                                                                                			}else{
                                                                                   				achive = parseInt(nilai1sdgDetail?nilai1sdgDetail:0)+parseInt(nilai2sdgDetail?nilai2sdgDetail:0);
                                                                                   				achiveSum += achive;
                                                                                			}
                                                                            			}
                                                                            			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai1sdgDetail!=null?nilai1sdgDetail:'')+"</td>";
                                                                            			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai2sdgDetail!=null?nilai2sdgDetail:'')+"</td>";
                                                                                	}
                                                                            		else if(sts == 'quarterly'){
                                                                            			if(nilai1sdgDetail!='' || nilai2sdgDetail!='' || nilai3sdgDetail!='' || nilai4sdgDetail!=''){
                                                                            				if(hasildis.content[n][20]=="2"){
                                                                            					if(nilai4sdgDetail!=''){
                                                                            						achive = nilai4sdgDetail;
                                                                            					}else if(nilai3sdgDetail!=''){
                                                                            						achive = nilai3sdgDetail;
                                                                            					}else if(nilai2sdgDetail!=''){
                                                                            						achive = nilai2sdgDetail;
                                                                            					}else if(nilai1sdgDetail!=''){
                                                                            						achive = nilai1sdgDetail;
                                                                            					}
                                                                            					achiveLast = (achive!=0)?achive:achiveLast;
                                                                            				}else{
                                                                            					achive = parseInt(nilai1sdgDetail?nilai1sdgDetail:0)+parseInt(nilai2sdgDetail?nilai2sdgDetail:0)+parseInt(nilai3sdgDetail?nilai3sdgDetail:0)+parseInt(nilai4sdgDetail?nilai4sdgDetail:0);	
                                                                            					achiveSum += achive;
                                                                            				}
                                                                            			}
                                                                            			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai1sdgDetail!=null?nilai1sdgDetail:'')+"</td>";
                                                                            			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai2sdgDetail!=null?nilai2sdgDetail:'')+"</td>";
                                                                            			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai3sdgDetail!=null?nilai3sdgDetail:'')+"</td>";
                                                                            			text += "<td style='font-size:80%;border-style:ridge;'>"+(nilai4sdgDetail!=null?nilai4sdgDetail:'')+"</td>";
                                                                                	}
                                                                            		if(hasildis.content[n][20]=="2"){
                                                                            			achivehasil = achiveLast;
                                                                            		}else{
                                                                            			achivehasil = achiveSum;
                                                                            		}
                                                                            		if(achivehasil){
                                                                            			if(hasildis.content[n][4] == 'Increment'){
                                                                                            if(achivehasil >= hasildis.content[n][7]){
                                                                                                color_sts = '<span class="dotOk"></span>';
                                                                                            }else{
                                                                                                color_sts = '<span class="dotNok"></span>';
                                                                                            }
                                                                                        }else{
                                                                                            if(achivehasil <= hasildis.content[n][7]){
                                                                                                color_sts = '<span class="dotOk"></span>';
                                                                                            }else{
                                                                                                color_sts = '<span class="dotNok"></span>';
                                                                                            }
                                                                                        }
                                                                            		}
                                                                            	}
                                                                        	}else{
                                                                        		text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                        		if(sts == 'yearly'){
                                                                        			text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                        		}else if(sts == 'semesterly'){
                                                                        			text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                        			text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                            	}
                                                                        		else if(sts == 'quarterly'){
                                                                        			text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                        			text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                        			text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                        			text += "<td style='font-size:80%;border-style:ridge;'></td>";
                                                                            	}
                                                                        	}
                                                                        	text += "<span style='font-size:80%;border-style:ridge;display:none;' id='ares_"+ year +"_" + l +"'>"+achivehasil+"</span>";
                                                                        }
                                                        			});
                                                        			
                                                        		}
                                                    		}
                                                    		text += (idmonper!="0")?"<td style='text-align:center;border-style:ridge;' ></td></tr>":'</tr>';
                                                    	}
                                                	}
                                                }
                                    		});
                                    	}
                                    }
                            	}); 
                            	text += "</tbody></table></div>";
                        	}
                        }
                	});
            	}
            	$("#indi").html(text);
				$("#dualaxes").html("");
				$('#pilgrafik').prop('disabled', false);
            }
        });	
	}

	function b(ks, kl, hasilSts, pil_graf) {
		console.log('b => ' + ks + ' ' + kl + ' ' + hasilSts.content[0][0] + ' ' + xxt);
		console.log('bb ' + tth['2021']);
		var sts = hasilSts.content[0][0];
		var ser = [];
		var tahun = [];

		for (i = 0; i < xxt; i++) {
			tahun.push($('#tahun' + i).text());
		}

		console.log(tahun);

		for (t = 0; t < ks; t++) {
			/*
			var tar = [
                            parseInt($("#tar_"+t + "_0").text(), 10),
                            parseInt($("#tar_"+t + "_1").text(), 10),
                            parseInt($("#tar_"+t + "_2").text(), 10),
                            parseInt($("#tar_"+t + "_3").text(), 10),
                            parseInt($("#tar_"+t + "_4").text(), 10)
                        ];
			*/
			var tar = [];
			var rel0 = [];
			var rel1 = [];
			var rel2 = [];
			var rel3 = [];			
			for (i = 0; i < xxt; i++) {
				var yr = $('#tahun' + i).text();
				var y = '#tar_' + yr + '_' + i;
				tar[i] = parseInt($(y).text(), 10);
			}
			ser.push({
                        name: 'Target SDGS',
                        type: 'spline',
                        data: tar
			});

			for (j = 0; j < xxt; j++) {
				var yr = $('#tahun' + j).text();
				var y = '#rel_' + yr + '_0';
				var vl = $(y);
				console.log('vl ' + vl + ' ' + y);
				if (vl != undefined && vl != NaN && vl != false) {
					console.log('vl ' + parseInt($(y).text(), 10));
					rel0[j] = parseInt($(y).text(), 10);
				}
			}

			for (j = 0; j < xxt; j++) {
				var yr = $('#tahun' + j).text();
				var y = '#rel_' + yr + '_1';
				var vl = $(y);
				if (vl != undefined && vl != NaN && vl != false) {
					rel1[j] = parseInt($(y).text(), 10);
				}
			}			

			for (j = 0; j < xxt; j++) {
				var yr = $('#tahun' + j).text();
				var y = '#rel_' + yr + '_2';
				var vl = $(y);
				if (vl != undefined && vl != NaN && vl != false) {
					rel2[j] = parseInt($(y).text(), 10);
				}
			}

			for (j = 0; j < xxt; j++) {
				var yr = $('#tahun' + j).text();
				var y = '#rel_' + yr + '_3';
				var vl = $(y);
				if (vl != undefined && vl != NaN && vl != false) {
					rel3[j] = parseInt($(y).text(), 10);
				}
			}									

			if (sts == 'yearly') {
				if (pil_graf == 'graf1') {
					ser.push({
                        name: 'Realisasi SDGS',
                        type: 'spline',
                        data: rel0,
					});								
				} else if (pil_graf == 'graf4') {
					ser.push({
                        name: 'Realisasi SDGS',
                        type: 'column',
                        data: rel0,
					});								
				} else {
					ser.push(
						{
                        name: 'Realisasi SDGS',
                        type: 'column',
                        data: rel0,
						},
						{
                        name: 'Realisasi SDGS',
                        type: 'spline',
                        data: rel0,
						},						
					);								
				}

			} else if (sts == 'semesterly') {
				if (pil_graf == 'graf1') {
					ser.push({
                        name: 'Realisasi SDGS S1',
                        type: 'spline',
                        data: rel0,
					});			
				} else if (pil_graf == 'graf4') {
					ser.push({
                        name: 'Realisasi SDGS S1',
                        type: 'column',
                        data: rel0,
					});			
				} else {
					ser.push(
						{
                        name: 'Realisasi SDGS S1',
                        type: 'column',
                        data: rel0,
						},
						{
                        name: 'Realisasi SDGS S1',
                        type: 'spline',
                        data: rel0,
						},						
					);			
				}
			} else {
				if (pil_graf == 'graf1') {
					ser.push({
                        name: 'Realisasi SDGS Q1',
                        type: 'spline',
                        data: rel0,
					});							
				} else if (pil_graf == 'graf4') {
					ser.push({
                        name: 'Realisasi SDGS Q1',
                        type: 'column',
                        data: rel0,
					});							
				} else {
					ser.push(
						{
                        name: 'Realisasi SDGS Q1',
                        type: 'column',
                        data: rel0,
						},
						{
                        name: 'Realisasi SDGS Q1',
                        type: 'spline',
                        data: rel0,
						},						
						);							
				}				

			}

			if (sts == 'yearly') {
			} else if (sts == 'semesterly') {
				if (pil_graf == 'graf1') {
					ser.push({
                        name: 'Realisasi SDGS S2',
                        type: 'spline',
                        data: rel1,
					});			
				} else if (pil_graf == 'graf4') {
					ser.push({
                        name: 'Realisasi SDGS S2',
                        type: 'column',
                        data: rel1,
					});			
				} else {
					ser.push(
						{
                        name: 'Realisasi SDGS S2',
                        type: 'column',
                        data: rel1,
						},
						{
                        name: 'Realisasi SDGS S2',
                        type: 'spline',
                        data: rel1,
						},						
					);			
				}				

			} else {
				if (pil_graf == 'graf1') {
					ser.push({
                        name: 'Realisasi SDGS Q2',
                        type: 'spline',
                        data: rel1,
					});							
				} else if (pil_graf == 'graf4') {
					ser.push({
                        name: 'Realisasi SDGS Q2',
                        type: 'column',
                        data: rel1,
					});							
				} else {
					ser.push(
						{
                        name: 'Realisasi SDGS Q2',
                        type: 'column',
                        data: rel1,
						},
						{
                        name: 'Realisasi SDGS Q2',
                        type: 'spline',
                        data: rel1,
						},						
					);							
				}								

			}						

			if (sts == 'yearly') {
			} else if (sts == 'semesterly') {
			} else {
				if (pil_graf == 'graf1') {
					ser.push({
                        name: 'Realisasi SDGS Q3',
                        type: 'spline',
                        data: rel2,
					});							
				} else if (pil_graf == 'graf4') {
					ser.push({
                        name: 'Realisasi SDGS Q3',
                        type: 'column',
                        data: rel2,
					});							
				} else {
					ser.push(
						{
                        name: 'Realisasi SDGS Q3',
                        type: 'column',
                        data: rel2,
						},
						{
                        name: 'Realisasi SDGS Q3',
                        type: 'spline',
                        data: rel2,
						},						
					);							
				}
			}						

			if (sts == 'yearly') {
			} else if (sts == 'semesterly') {
			} else {
				if (pil_graf == 'graf1') {
					ser.push({
                        name: 'Realisasi SDGS Q4',
                        type: 'spline',
                        data: rel3,
					});							
				} else if (pil_graf == 'graf4') {
					ser.push({
                        name: 'Realisasi SDGS Q4',
                        type: 'column',
                        data: rel3,
					});							
				} else {
					ser.push(
						{
							name: 'Realisasi SDGS Q4',
							type: 'column',
							data: rel3,
						},
						{
							name: 'Realisasi SDGS Q4',
							type: 'spline',
							data: rel3,
						},						
					);							
				}				
			}						

		}

		console.log(ser);

		for (t = 0; t < kl; t++) {

			tar = [];
			rel0 = [];
			rel1 = [];
			rel2 = [];
			rel3 = [];			
			var tar = [
                            parseInt($("#tar_"+t + "_0").text(), 10),
                            parseInt($("#tar_"+t + "_1").text(), 10),
                            parseInt($("#tar_"+t + "_2").text(), 10),
                            parseInt($("#tar_"+t + "_3").text(), 10),
                            parseInt($("#tar_"+t + "_4").text(), 10)
                        ];
			ser.push({
                        name: 'Target Disagregasi',
                        type: 'spline',
                        data: tar
			});

			for (j = 0; j < xxt; j++) {
				var yr = $('#tahun' + j).text();
				var y = '#arel_' + yr + '_' + t + '_0';
				var vl = $(y);
				console.log('vl ' + vl + ' ' + y);
				if (vl != undefined && vl != NaN && vl != false) {
					console.log('vl ' + parseInt($(y).text(), 10));
					rel0[j] = parseInt($(y).text(), 10);
				}
			}

			for (j = 0; j < xxt; j++) {
				var yr = $('#tahun' + j).text();
				var y = '#arel_' + yr + '_' + t + '_1';
				var vl = $(y);
				if (vl != undefined && vl != NaN && vl != false) {
					rel1[j] = parseInt($(y).text(), 10);
				}
			}			

			for (j = 0; j < xxt; j++) {
				var yr = $('#tahun' + j).text();
				var y = '#arel_' + yr + '_' + t + '_2';
				var vl = $(y);
				if (vl != undefined && vl != NaN && vl != false) {
					rel2[j] = parseInt($(y).text(), 10);
				}
			}

			for (j = 0; j < xxt; j++) {
				var yr = $('#tahun' + j).text();
				var y = '#arel_' + yr + '_' + t + '_3';
				var vl = $(y);
				if (vl != undefined && vl != NaN && vl != false) {
					rel3[j] = parseInt($(y).text(), 10);
				}
			}									

			if (sts == 'yearly') {
				ser.push({
                        name: 'Realisasi Disagregasi',
                        type: 'spline',
                        data: rel0,
				});			
			} else if (sts == 'semesterly') {
				ser.push({
                        name: 'Realisasi Disagregasi S1',
                        type: 'spline',
                        data: rel0,
				});			
			} else {
				ser.push({
                        name: 'Realisasi Disagregasi Q1',
                        type: 'spline',
                        data: rel0,
				});							
			}						

			if (sts == 'yearly') {
			} else if (sts == 'semesterly') {
				ser.push({
                        name: 'Realisasi Disagregasi S2',
                        type: 'spline',
                        data: rel1,
				});			
			} else {
				ser.push({
                        name: 'Realisasi Disagregasi Q2',
                        type: 'spline',
                        data: rel1,
				});							
			}												

			if (sts == 'yearly') {
			} else if (sts == 'semesterly') {
			} else {
				ser.push({
                        name: 'Realisasi Disagregasi Q3',
                        type: 'spline',
                        data: rel2,
				});							
			}																		

			if (sts == 'yearly') {
			} else if (sts == 'semesterly') {
			} else {
				ser.push({
                        name: 'Realisasi Disagregasi Q4',
                        type: 'spline',
                        data: rel3,
				});							
			}																		

		}

		var sb = 'Combination Chart';
                if (pil_graf == 'graf1') {
                    sb = 'Line Chart';
                } else if (pil_graf == 'graf4') {
                    sb = 'Stack Chart';
                }

		var chart4;
		var options4 ={
			chart: {
                        zoomType: 'xy',
                        renderTo: 'dualaxes'
            },

            title: {
                        text: 'Komparasi Target dan Realisasi '
            },
            credits: {
                        enabled: false
            },
            subtitle: {
                        text: sb
        	},
            xAxis: [{
                        categories: tahun
            }],
            yAxis: [{ // Primary yAxis
                        labels: {
                            format: '{value}',
                            style: {
                                color: Highcharts.getOptions().colors[1]
                            }
                        },
                        min: 0,
                        //max:100,
                        title: {
                            text: '',
                            style: {
                                color: Highcharts.getOptions().colors[1]
                            }
                        },opposite: false
                    }],
                    tooltip: {
                        shared: true
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        x: 0,
                        verticalAlign: 'top',
                        y: 55,
                        floating: true,
                        backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'
                    },
                    plotOptions: {
                        column: {
                            stacking: 'normal',
                            dataLabels: {
                                enabled: true
                            }
                        }
                    },
                    series: ser,
                    colors: Highcharts.map(Highcharts.getOptions().colors, function (color) {
                            return {
                                radialGradient: {cx: 0.5,cy: 0.3,r: 0.7},
                                stops: [[0, color],[1, Highcharts.Color(color).brighten(-0.3).get('rgb')] ]
                            };
                        })
            }
            chart4=new Highcharts.Chart(options4);				
	}


	function c(ks, kl, hasilSts, pil_graf) {
		console.log('c => ' + ks + ' ' + kl + ' ' + hasilSts.content[0][0] + ' ' + xxt);
		var sts = hasilSts.content[0][0];
		var ser = [];
		var tahun = [];

		for (i = 0; i < xxt; i++) {
			tahun.push($('#tahun' + i).text());
		}

		console.log(tahun);

		for (t = 0; t < ks; t++) {
			var tar = [];
			var rel0 = [];
			var rel1 = [];
			var rel2 = [];
			var rel3 = [];			
			for (i = 0; i < xxt; i++) {
				var yr = $('#tahun' + i).text();
				var y = '#tar_' + yr + '_0';
				console.log(y);
				tar[i] = parseInt($(y).text(), 10);

				var rl = '#rel_' + yr + '_0';
				console.log(rl);
				rel0[i] = parseInt($(rl).text(), 10);			

				var ts = '#res_' + yr + '_0';
				console.log(ts);
				rel1[i] = parseInt($(ts).text(), 10);							
			}
			ser.push({
                        name: 'Target SDGS',
                        type: 'spline',
                        data: tar
			});

			if (pil_graf == 'graf1') {
					ser.push({
                        name: 'Realisasi SDGS',
                        type: 'spline',
                        data: rel1,
					});								
			} else if (pil_graf == 'graf4') {
					ser.push({
                        name: 'Realisasi SDGS',
                        type: 'column',
                        data: rel1,
					});								
			} else {
					ser.push(
						{
                        name: 'Realisasi SDGS',
                        type: 'column',
                        data: rel1,
						},
						{
                        name: 'Realisasi SDGS',
                        type: 'spline',
                        data: rel1,
						},						
					);								
			}

		}

		console.log(ser);

		for (t = 0; t < kl; t++) {

			tar = [];
			rel0 = [];
			rel1 = [];
			rel2 = [];
			rel3 = [];			
			for (i = 0; i < xxt; i++) {
				var yr = $('#tahun' + i).text();
				var y = '#tar_' + yr + '_' + t;
				console.log(y);
				tar[i] = parseInt($(y).text(), 10);

				var rl = '#arel_' + yr + '_' + t;
				console.log(rl);
				rel0[i] = parseInt($(rl).text(), 10);			

				var ts = '#ares_' + yr + '_' + t;
				console.log(ts);
				rel1[i] = parseInt($(ts).text(), 10);							
			}
			ser.push({
                        name: 'Target Disagregasi ' + (t + 1),
                        type: 'spline',
                        data: tar
			});

			ser.push({
                        name: 'Realisasi Disagregasi ' + (t + 1),
                        type: 'spline',
                        data: rel1,
			});						

		}

		var sb = 'Combination Chart';
                if (pil_graf == 'graf1') {
                    sb = 'Line Chart';
                } else if (pil_graf == 'graf4') {
                    sb = 'Stack Chart';
                }

		var chart4;
		var options4 ={
			chart: {
                        zoomType: 'xy',
                        renderTo: 'dualaxes'
            },

            title: {
                        text: 'Komparasi Target dan Realisasi '
            },
            credits: {
                        enabled: false
            },
            subtitle: {
                        text: sb
        	},
            xAxis: [{
                        categories: tahun
            }],
            yAxis: [{ // Primary yAxis
                        labels: {
                            format: '{value}',
                            style: {
                                color: Highcharts.getOptions().colors[1]
                            }
                        },
                        min: 0,
                        //max:100,
                        title: {
                            text: '',
                            style: {
                                color: Highcharts.getOptions().colors[1]
                            }
                        },opposite: false
                    }],
                    tooltip: {
                        shared: true
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        x: 0,
                        verticalAlign: 'top',
                        y: 55,
                        floating: true,
                        backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'
                    },
                    plotOptions: {
                        column: {
                            stacking: 'normal',
                            dataLabels: {
                                enabled: true
                            }
                        }
                    },
                    series: ser,
                    colors: Highcharts.map(Highcharts.getOptions().colors, function (color) {
                            return {
                                radialGradient: {cx: 0.5,cy: 0.3,r: 0.7},
                                stops: [[0, color],[1, Highcharts.Color(color).brighten(-0.3).get('rgb')] ]
                            };
                        })
            }
            chart4=new Highcharts.Chart(options4);				
	}	

	$("#pilgrafik").on("change", function() {
		var pil_graf = $("#pilgrafik").val();
		var per = $("#periode").val();
		console.log('me change ' + pil_graf + ' ' + xtype + ' ' + per);
		if (per == 'all') {
			c(ks, kl, xhasilSts, pil_graf);
		} else {
			if (xtype == 2) {
				a(xyear, pil_graf);
			} else {
				b(ks, kl, xhasilSts, pil_graf);
			}
		}

	});
    
    var tableToExcel = (function() {
    var uri = 'data:application/vnd.ms-excel;base64,'
    , template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>'
    , base64 = function(s) { return window.btoa(unescape(encodeURIComponent(s))) }
    , format = function(s, c) { return s.replace(/{(\w+)}/g, function(m, p) { return c[p]; }) }
    return function(table, name) {
    if (!table.nodeType) table = document.getElementById(table)
    var ctx = {worksheet: name || 'Worksheet', table: table.innerHTML}
    window.location.href = uri + base64(format(template, ctx))
    }
    })()
    
</script>
</body>
</html>